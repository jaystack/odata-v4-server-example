// JayData 1.5.1 CTP
// Dual licensed under MIT and GPL v2
// Copyright JayStack Technologies (http://jaydata.org/licensing)
//
// JayData is a standards-based, cross-platform Javascript library and a set of
// practices to access and manipulate data from various online and offline sources.
//
// Credits:
//     Hajnalka Battancs, Dániel József, János Roden, László Horváth, Péter Nochta
//     Péter Zentai, Róbert Bónay, Szabolcs Czinege, Viktor Borza, Viktor Lázár,
//     Zoltán Gyebrovszki, Gábor Dolla
//
// More info: http://jaydata.org
!function(){var require=function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return i(n?n:e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(r){!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,i.acorn=e()}}(function(){return function t(n,r,i){function s(o,u){if(!r[o]){if(!n[o]){var l="function"==typeof e&&e;if(!u&&l)return l(o,!0);if(a)return a(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var d=r[o]={exports:{}};n[o][0].call(d.exports,function(e){var t=n[o][1][e];return s(t?t:e)},d,d.exports,t,n,r,i)}return r[o].exports}for(var a="function"==typeof e&&e,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){"use strict";var r=e("./tokentype"),i=e("./state"),s=i.Parser.prototype;s.checkPropClash=function(e,t){if(!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n=e.key,r=void 0;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===r&&"init"===i&&(t.proto&&this.raise(n.start,"Redefinition of __proto__ property"),t.proto=!0));r="$"+r;var s=t[r];if(s){var a="init"!==i;((this.strict||a)&&s[i]||!(a^s.init))&&this.raise(n.start,"Redefinition of property")}else s=t[r]={init:!1,get:!1,set:!1};s[i]=!0}},s.parseExpression=function(e,t){var n=this.start,i=this.startLoc,s=this.parseMaybeAssign(e,t);if(this.type===r.types.comma){var a=this.startNodeAt(n,i);for(a.expressions=[s];this.eat(r.types.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return s},s.parseMaybeAssign=function(e,t,n){if(this.type==r.types._yield&&this.inGenerator)return this.parseYield();var i=!1;t||(t={shorthandAssign:0,trailingComma:0},i=!0);var s=this.start,a=this.startLoc;(this.type==r.types.parenL||this.type==r.types.name)&&(this.potentialArrowAt=this.start);var o=this.parseMaybeConditional(e,t);if(n&&(o=n.call(this,o,s,a)),this.type.isAssign){i&&this.checkPatternErrors(t,!0);var u=this.startNodeAt(s,a);return u.operator=this.value,u.left=this.type===r.types.eq?this.toAssignable(o):o,t.shorthandAssign=0,this.checkLVal(o),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(t,!0),o},s.parseMaybeConditional=function(e,t){var n=this.start,i=this.startLoc,s=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return s;if(this.eat(r.types.question)){var a=this.startNodeAt(n,i);return a.test=s,a.consequent=this.parseMaybeAssign(),this.expect(r.types.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return s},s.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t);return this.checkExpressionErrors(t)?i:this.parseExprOp(i,n,r,-1,e)},s.parseExprOp=function(e,t,n,i,s){var a=this.type.binop;if(null!=a&&(!s||this.type!==r.types._in)&&a>i){var o=this.startNodeAt(t,n);o.left=e,o.operator=this.value;var u=this.type;this.next();var l=this.start,p=this.startLoc;return o.right=this.parseExprOp(this.parseMaybeUnary(),l,p,a,s),this.finishNode(o,u===r.types.logicalOR||u===r.types.logicalAND?"LogicalExpression":"BinaryExpression"),this.parseExprOp(o,t,n,i,s)}return e},s.parseMaybeUnary=function(e){if(this.type.prefix){var t=this.startNode(),n=this.type===r.types.incDec;return t.operator=this.value,t.prefix=!0,this.next(),t.argument=this.parseMaybeUnary(),this.checkExpressionErrors(e,!0),n?this.checkLVal(t.argument):this.strict&&"delete"===t.operator&&"Identifier"===t.argument.type&&this.raise(t.start,"Deleting local variable in strict mode"),this.finishNode(t,n?"UpdateExpression":"UnaryExpression")}var i=this.start,s=this.startLoc,a=this.parseExprSubscripts(e);if(this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var t=this.startNodeAt(i,s);t.operator=this.value,t.prefix=!1,t.argument=a,this.checkLVal(a),this.next(),a=this.finishNode(t,"UpdateExpression")}return a},s.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(e)||i?r:this.parseSubscripts(r,t,n)},s.parseSubscripts=function(e,t,n,i){for(;;)if(this.eat(r.types.dot)){var s=this.startNodeAt(t,n);s.object=e,s.property=this.parseIdent(!0),s.computed=!1,e=this.finishNode(s,"MemberExpression")}else if(this.eat(r.types.bracketL)){var s=this.startNodeAt(t,n);s.object=e,s.property=this.parseExpression(),s.computed=!0,this.expect(r.types.bracketR),e=this.finishNode(s,"MemberExpression")}else if(!i&&this.eat(r.types.parenL)){var s=this.startNodeAt(t,n);s.callee=e,s.arguments=this.parseExprList(r.types.parenR,!1),e=this.finishNode(s,"CallExpression")}else{if(this.type!==r.types.backQuote)return e;var s=this.startNodeAt(t,n);s.tag=e,s.quasi=this.parseTemplate(),e=this.finishNode(s,"TaggedTemplateExpression")}},s.parseExprAtom=function(e){var t=void 0,n=this.potentialArrowAt==this.start;switch(this.type){case r.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case r.types._this:var i=this.type===r.types._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,i);case r.types._yield:this.inGenerator&&this.unexpected();case r.types.name:var s=this.start,a=this.startLoc,o=this.parseIdent(this.type!==r.types.name);return n&&!this.canInsertSemicolon()&&this.eat(r.types.arrow)?this.parseArrowExpression(this.startNodeAt(s,a),[o]):o;case r.types.regexp:var u=this.value;return t=this.parseLiteral(u.value),t.regex={pattern:u.pattern,flags:u.flags},t;case r.types.num:case r.types.string:return this.parseLiteral(this.value);case r.types._null:case r.types._true:case r.types._false:return t=this.startNode(),t.value=this.type===r.types._null?null:this.type===r.types._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case r.types.parenL:return this.parseParenAndDistinguishExpression(n);case r.types.bracketL:return t=this.startNode(),this.next(),this.options.ecmaVersion>=7&&this.type===r.types._for?this.parseComprehension(t,!1):(t.elements=this.parseExprList(r.types.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression"));case r.types.braceL:return this.parseObj(!1,e);case r.types._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case r.types._class:return this.parseClass(this.startNode(),!1);case r.types._new:return this.parseNew();case r.types.backQuote:return this.parseTemplate();default:this.unexpected()}},s.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},s.parseParenExpression=function(){this.expect(r.types.parenL);var e=this.parseExpression();return this.expect(r.types.parenR),e},s.parseParenAndDistinguishExpression=function(e){var t=this.start,n=this.startLoc,i=void 0;if(this.options.ecmaVersion>=6){if(this.next(),this.options.ecmaVersion>=7&&this.type===r.types._for)return this.parseComprehension(this.startNodeAt(t,n),!0);for(var s=this.start,a=this.startLoc,o=[],u=!0,l={shorthandAssign:0,trailingComma:0},p=void 0,d=void 0;this.type!==r.types.parenR;){if(u?u=!1:this.expect(r.types.comma),this.type===r.types.ellipsis){p=this.start,o.push(this.parseParenItem(this.parseRest()));break}this.type!==r.types.parenL||d||(d=this.start),o.push(this.parseMaybeAssign(!1,l,this.parseParenItem))}var c=this.start,f=this.startLoc;if(this.expect(r.types.parenR),e&&!this.canInsertSemicolon()&&this.eat(r.types.arrow))return this.checkPatternErrors(l,!0),d&&this.unexpected(d),this.parseParenArrowList(t,n,o);o.length||this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(l,!0),o.length>1?(i=this.startNodeAt(s,a),i.expressions=o,this.finishNodeAt(i,"SequenceExpression",c,f)):i=o[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(t,n);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}return i},s.parseParenItem=function(e){return e},s.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var a=[];s.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(r.types.dot))return e.meta=t,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raise(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raise(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty");var n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),this.eat(r.types.parenL)?e.arguments=this.parseExprList(r.types.parenR,!1):e.arguments=a,this.finishNode(e,"NewExpression")},s.parseTemplateElement=function(){var e=this.startNode();return e.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),e.tail=this.type===r.types.backQuote,this.finishNode(e,"TemplateElement")},s.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.expect(r.types.dollarBraceL),e.expressions.push(this.parseExpression()),this.expect(r.types.braceR),e.quasis.push(t=this.parseTemplateElement());return this.next(),this.finishNode(e,"TemplateLiteral")},s.parseObj=function(e,t){var n=this.startNode(),i=!0,s={};for(n.properties=[],this.next();!this.eat(r.types.braceR);){if(i)i=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var a=this.startNode(),o=void 0,u=void 0,l=void 0;this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(u=this.start,l=this.startLoc),e||(o=this.eat(r.types.star))),this.parsePropertyName(a),this.parsePropertyValue(a,e,o,u,l,t),this.checkPropClash(a,s),n.properties.push(this.finishNode(a,"Property"))}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},s.parsePropertyValue=function(e,t,n,i,s,a){if(this.eat(r.types.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===r.types.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n);else if(this.options.ecmaVersion>=5&&!e.computed&&"Identifier"===e.key.type&&("get"===e.key.name||"set"===e.key.name)&&this.type!=r.types.comma&&this.type!=r.types.braceR){(n||t)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var o="get"===e.kind?0:1;if(e.value.params.length!==o){var u=e.value.start;"get"===e.kind?this.raise(u,"getter should have no params"):this.raise(u,"setter should have exactly one param")}"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raise(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(e.kind="init",t?((this.keywords.test(e.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(e.key.name))&&this.raise(e.key.start,"Binding "+e.key.name),e.value=this.parseMaybeDefault(i,s,e.key)):this.type===r.types.eq&&a?(a.shorthandAssign||(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},s.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(r.types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(r.types.bracketR),e.key;e.computed=!1}return e.key=this.type===r.types.num||this.type===r.types.string?this.parseExprAtom():this.parseIdent(!0)},s.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1)},s.parseMethod=function(e){var t=this.startNode();return this.initFunction(t),this.expect(r.types.parenL),t.params=this.parseBindingList(r.types.parenR,!1,!1),this.options.ecmaVersion>=6&&(t.generator=e),this.parseFunctionBody(t,!1),this.finishNode(t,"FunctionExpression")},s.parseArrowExpression=function(e,t){return this.initFunction(e),e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.finishNode(e,"ArrowFunctionExpression")},s.parseFunctionBody=function(e,t){var n=t&&this.type!==r.types.braceL;if(n)e.body=this.parseMaybeAssign(),e.expression=!0;else{var i=this.inFunction,s=this.inGenerator,a=this.labels;this.inFunction=!0,this.inGenerator=e.generator,this.labels=[],e.body=this.parseBlock(!0),e.expression=!1,this.inFunction=i,this.inGenerator=s,this.labels=a}if(this.strict||!n&&e.body.body.length&&this.isUseStrict(e.body.body[0])){var o=this.strict;this.strict=!0,e.id&&this.checkLVal(e.id,!0),this.checkParams(e),this.strict=o}else t&&this.checkParams(e)},s.checkParams=function(e){for(var t={},n=0;n<e.params.length;n++)this.checkLVal(e.params[n],!0,t)},s.parseExprList=function(e,t,n,i){for(var s=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(r.types.comma),this.type===e&&i&&!i.trailingComma&&(i.trailingComma=this.lastTokStart),t&&this.afterTrailingComma(e))break;var o=void 0;o=n&&this.type===r.types.comma?null:this.type===r.types.ellipsis?this.parseSpread(i):this.parseMaybeAssign(!1,i),s.push(o)}return s},s.parseIdent=function(e){var t=this.startNode();return e&&"never"==this.options.allowReserved&&(e=!1),this.type===r.types.name?(!e&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(this.options.ecmaVersion>=6||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raise(this.start,"The keyword '"+this.value+"' is reserved"),t.name=this.value):e&&this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"Identifier")},s.parseYield=function(){var e=this.startNode();return this.next(),this.type==r.types.semi||this.canInsertSemicolon()||this.type!=r.types.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(r.types.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},s.parseComprehension=function(e,t){for(e.blocks=[];this.type===r.types._for;){var n=this.startNode();this.next(),this.expect(r.types.parenL),n.left=this.parseBindingAtom(),this.checkLVal(n.left,!0),this.expectContextual("of"),n.right=this.parseExpression(),this.expect(r.types.parenR),e.blocks.push(this.finishNode(n,"ComprehensionBlock"))}return e.filter=this.eat(r.types._if)?this.parseParenExpression():null,e.body=this.parseExpression(),this.expect(t?r.types.parenR:r.types.bracketR),e.generator=t,this.finishNode(e,"ComprehensionExpression")}},{"./state":10,"./tokentype":14}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function i(e,t){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:65535>=e?e>=170&&d.test(String.fromCharCode(e)):t===!1?!1:r(e,f)}function s(e,t){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:65535>=e?e>=170&&c.test(String.fromCharCode(e)):t===!1?!1:r(e,f)||r(e,y)}n.__esModule=!0,n.isIdentifierStart=i,n.isIdentifierChar=s;var a={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"};n.reservedWords=a;var o="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",u={5:o,6:o+" let const class extends export import yield super"};n.keywords=u;var l="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",p="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏ᦰ-ᧀᧈᧉ᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︭︳︴﹍-﹏０-９＿",d=new RegExp("["+l+"]"),c=new RegExp("["+l+p+"]");l=p=null;var f=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,98,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,955,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,38,17,2,24,133,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,32,4,287,47,21,1,2,0,185,46,82,47,21,0,60,42,502,63,32,0,449,56,1288,920,104,110,2962,1070,13266,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,16355,541],y=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,16,9,83,11,168,11,6,9,8,2,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,112,16,16,9,82,12,9,9,535,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,4305,6,792618,239]},{}],3:[function(e,t,n){
// various contributors and released under an MIT license.
//
// Git repositories for Acorn are available at
//
//     http://marijnhaverbeke.nl/git/acorn
//     https://github.com/ternjs/acorn.git
//
// Please use the [github bug tracker][ghbt] to report issues.
//
// [ghbt]: https://github.com/ternjs/acorn/issues
//
// This file defines the main parser interface. The library also comes
// with a [error-tolerant parser][dammit] and an
// [abstract syntax tree walker][walk], defined in other files.
//
// [dammit]: acorn_loose.js
// [walk]: util/walk.js
"use strict";function r(e,t){return new a.Parser(t,e).parse()}function i(e,t,n){var r=new a.Parser(n,e,t);return r.nextToken(),r.parseExpression()}function s(e,t){return new a.Parser(t,e)}n.__esModule=!0,n.parse=r,n.parseExpressionAt=i,n.tokenizer=s;var a=e("./state");e("./parseutil"),e("./statement"),e("./lval"),e("./expression"),e("./location"),n.Parser=a.Parser,n.plugins=a.plugins;var o=e("./options");n.defaultOptions=o.defaultOptions;var u=e("./locutil");n.Position=u.Position,n.SourceLocation=u.SourceLocation,n.getLineInfo=u.getLineInfo;var l=e("./node");n.Node=l.Node;var p=e("./tokentype");n.TokenType=p.TokenType,n.tokTypes=p.types;var d=e("./tokencontext");n.TokContext=d.TokContext,n.tokContexts=d.types;var c=e("./identifier");n.isIdentifierChar=c.isIdentifierChar,n.isIdentifierStart=c.isIdentifierStart;var f=e("./tokenize");n.Token=f.Token;var y=e("./whitespace");n.isNewLine=y.isNewLine,n.lineBreak=y.lineBreak,n.lineBreakG=y.lineBreakG;var h="2.7.0";n.version=h},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(e,t,n){"use strict";var r=e("./state"),i=e("./locutil"),s=r.Parser.prototype;s.raise=function(e,t){var n=i.getLineInfo(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},s.curPosition=function(){return this.options.locations?new i.Position(this.curLine,this.pos-this.lineStart):void 0}},{"./locutil":5,"./state":10}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=1,r=0;;){s.lineBreakG.lastIndex=r;var i=s.lineBreakG.exec(e);if(!(i&&i.index<t))return new a(n,t-r);++n,r=i.index+i[0].length}}n.__esModule=!0,n.getLineInfo=i;var s=e("./whitespace"),a=function(){function e(t,n){r(this,e),this.line=t,this.column=n}return e.prototype.offset=function(t){return new e(this.line,this.column+t)},e}();n.Position=a;var o=function u(e,t,n){r(this,u),this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};n.SourceLocation=o},{"./whitespace":16}],6:[function(e,t,n){"use strict";var r=e("./tokentype"),i=e("./state"),s=e("./util"),a=i.Parser.prototype;a.toAssignable=function(e,t){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":e.type="ObjectPattern";for(var n=0;n<e.properties.length;n++){var r=e.properties[n];"init"!==r.kind&&this.raise(r.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(r.value,t)}break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,t);break;case"AssignmentExpression":if("="!==e.operator){this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");break}e.type="AssignmentPattern",delete e.operator;case"AssignmentPattern":"YieldExpression"===e.right.type&&this.raise(e.right.start,"Yield expression cannot be a default value");break;case"ParenthesizedExpression":e.expression=this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}return e},a.toAssignableList=function(e,t){var n=e.length;if(n){var r=e[n-1];if(r&&"RestElement"==r.type)--n;else if(r&&"SpreadElement"==r.type){r.type="RestElement";var i=r.argument;this.toAssignable(i,t),"Identifier"!==i.type&&"MemberExpression"!==i.type&&"ArrayPattern"!==i.type&&this.unexpected(i.start),--n}t&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)}for(var s=0;n>s;s++){var a=e[s];a&&this.toAssignable(a,t)}return e},a.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(e),this.finishNode(t,"SpreadElement")},a.parseRest=function(e){var t=this.startNode();return this.next(),e?t.argument=this.type===r.types.name?this.parseIdent():this.unexpected():t.argument=this.type===r.types.name||this.type===r.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(t,"RestElement")},a.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case r.types.name:return this.parseIdent();case r.types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(r.types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case r.types.braceL:return this.parseObj(!0);default:this.unexpected()}},a.parseBindingList=function(e,t,n,i){for(var s=[],a=!0;!this.eat(e);)if(a?a=!1:this.expect(r.types.comma),t&&this.type===r.types.comma)s.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===r.types.ellipsis){var o=this.parseRest(i);this.parseBindingListItem(o),s.push(o),this.expect(e);break}var u=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(u),s.push(u)}return s},a.parseBindingListItem=function(e){return e},a.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(r.types.eq))return n;var i=this.startNodeAt(e,t);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},a.checkLVal=function(e,t,n){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raise(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(s.has(n,e.name)&&this.raise(e.start,"Argument name clash"),n[e.name]=!0);break;case"MemberExpression":t&&this.raise(e.start,(t?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var r=0;r<e.properties.length;r++)this.checkLVal(e.properties[r].value,t,n);break;case"ArrayPattern":for(var r=0;r<e.elements.length;r++){var i=e.elements[r];i&&this.checkLVal(i,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}n.__esModule=!0;var s=e("./state"),a=e("./locutil"),o=function l(e,t,n){r(this,l),this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new a.SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])};n.Node=o;var u=s.Parser.prototype;u.startNode=function(){return new o(this,this.start,this.startLoc)},u.startNodeAt=function(e,t){return new o(this,e,t)},u.finishNode=function(e,t){return i.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},u.finishNodeAt=function(e,t,n,r){return i.call(this,e,t,n,r)}},{"./locutil":5,"./state":10}],8:[function(e,t,n){"use strict";function r(e){var t={};for(var n in o)t[n]=e&&s.has(e,n)?e[n]:o[n];return null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),s.isArray(t.onToken)&&!function(){var e=t.onToken;t.onToken=function(t){return e.push(t)}}(),s.isArray(t.onComment)&&(t.onComment=i(t,t.onComment)),t}function i(e,t){return function(n,r,i,s,o,u){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new a.SourceLocation(this,o,u)),e.ranges&&(l.range=[i,s]),t.push(l)}}n.__esModule=!0,n.getOptions=r;var s=e("./util"),a=e("./locutil"),o={ecmaVersion:5,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};n.defaultOptions=o},{"./locutil":5,"./util":15}],9:[function(e,t,n){"use strict";var r=e("./tokentype"),i=e("./state"),s=e("./whitespace"),a=i.Parser.prototype;a.isUseStrict=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.raw.slice(1,-1)},a.eat=function(e){return this.type===e?(this.next(),!0):!1},a.isContextual=function(e){return this.type===r.types.name&&this.value===e},a.eatContextual=function(e){return this.value===e&&this.eat(r.types.name)},a.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===r.types.eof||this.type===r.types.braceR||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){return this.canInsertSemicolon()?(this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0):void 0},a.semicolon=function(){this.eat(r.types.semi)||this.insertSemicolon()||this.unexpected()},a.afterTrailingComma=function(e){return this.type==e?(this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0):void 0},a.expect=function(e){this.eat(e)||this.unexpected()},a.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},a.checkPatternErrors=function(e,t){var n=e&&e.trailingComma;return t?void(n&&this.raise(n,"Trailing comma is not permitted in destructuring patterns")):!!n},a.checkExpressionErrors=function(e,t){var n=e&&e.shorthandAssign;return t?void(n&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns")):!!n}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return new RegExp("^("+e.replace(/ /g,"|")+")$")}n.__esModule=!0;var s=e("./identifier"),a=e("./tokentype"),o=e("./whitespace"),u=e("./options"),l={};n.plugins=l;var p=function(){function e(t,n,l){r(this,e),this.options=t=u.getOptions(t),this.sourceFile=t.sourceFile,this.keywords=i(s.keywords[t.ecmaVersion>=6?6:5]);var p=t.allowReserved?"":s.reservedWords[t.ecmaVersion]+("module"==t.sourceType?" await":"");this.reservedWords=i(p);var d=(p?p+" ":"")+s.reservedWords.strict;this.reservedWordsStrict=i(d),this.reservedWordsStrictBind=i(d+" "+s.reservedWords.strictBind),this.input=String(n),this.containsEsc=!1,this.loadPlugins(t.plugins),l?(this.pos=l,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",l)),this.curLine=this.input.slice(0,this.lineStart).split(o.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=a.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===t.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}return e.prototype.isKeyword=function(e){return this.keywords.test(e)},e.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},e.prototype.extend=function(e,t){this[e]=t(this[e])},e.prototype.loadPlugins=function(e){for(var t in e){var n=l[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},e.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},e}();n.Parser=p},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(e,t,n){"use strict";var r=e("./tokentype"),i=e("./state"),s=e("./whitespace"),a=i.Parser.prototype;a.parseTopLevel=function(e){var t=!0;for(e.body||(e.body=[]);this.type!==r.types.eof;){var n=this.parseStatement(!0,!0);e.body.push(n),t&&(this.isUseStrict(n)&&this.setStrict(!0),t=!1)}return this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var o={kind:"loop"},u={kind:"switch"};a.parseStatement=function(e,t){var n=this.type,i=this.startNode();switch(n){case r.types._break:case r.types._continue:return this.parseBreakContinueStatement(i,n.keyword);case r.types._debugger:return this.parseDebuggerStatement(i);case r.types._do:return this.parseDoStatement(i);case r.types._for:return this.parseForStatement(i);case r.types._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i);case r.types._class:return e||this.unexpected(),this.parseClass(i,!0);case r.types._if:return this.parseIfStatement(i);case r.types._return:return this.parseReturnStatement(i);case r.types._switch:return this.parseSwitchStatement(i);case r.types._throw:return this.parseThrowStatement(i);case r.types._try:return this.parseTryStatement(i);case r.types._let:case r.types._const:e||this.unexpected();case r.types._var:return this.parseVarStatement(i,n);case r.types._while:return this.parseWhileStatement(i);case r.types._with:return this.parseWithStatement(i);case r.types.braceL:return this.parseBlock();case r.types.semi:return this.parseEmptyStatement(i);case r.types._export:case r.types._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===r.types._import?this.parseImport(i):this.parseExport(i);default:var s=this.value,a=this.parseExpression();return n===r.types.name&&"Identifier"===a.type&&this.eat(r.types.colon)?this.parseLabeledStatement(i,s,a):this.parseExpressionStatement(i,a)}},a.parseBreakContinueStatement=function(e,t){var n="break"==t;this.next(),this.eat(r.types.semi)||this.insertSemicolon()?e.label=null:this.type!==r.types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var s=this.labels[i];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(n||"loop"===s.kind))break;if(e.label&&n)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},a.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},a.parseDoStatement=function(e){return this.next(),this.labels.push(o),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(r.types._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(r.types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},a.parseForStatement=function(e){if(this.next(),this.labels.push(o),this.expect(r.types.parenL),this.type===r.types.semi)return this.parseFor(e,null);if(this.type===r.types._var||this.type===r.types._let||this.type===r.types._const){var t=this.startNode(),n=this.type;return this.next(),this.parseVar(t,!0,n),this.finishNode(t,"VariableDeclaration"),!(this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==t.declarations.length||n!==r.types._var&&t.declarations[0].init?this.parseFor(e,t):this.parseForIn(e,t)}var i={shorthandAssign:0,trailingComma:0},s=this.parseExpression(!0,i);return this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.checkPatternErrors(i,!0),this.toAssignable(s),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(i,!0),this.parseFor(e,s))},a.parseFunctionStatement=function(e){return this.next(),this.parseFunction(e,!0)},a.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!1),e.alternate=this.eat(r.types._else)?this.parseStatement(!1):null,this.finishNode(e,"IfStatement")},a.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(r.types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},a.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(r.types.braceL),this.labels.push(u);for(var t,n=!1;this.type!=r.types.braceR;)if(this.type===r.types._case||this.type===r.types._default){var i=this.type===r.types._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(n&&this.raise(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(r.types.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},a.parseThrowStatement=function(e){return this.next(),s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var l=[];a.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===r.types._catch){var t=this.startNode();this.next(),this.expect(r.types.parenL),t.param=this.parseBindingAtom(),this.checkLVal(t.param,!0),this.expect(r.types.parenR),t.body=this.parseBlock(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(r.types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},a.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},a.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(o),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},a.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},a.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},a.parseLabeledStatement=function(e,t,n){for(var i=0;i<this.labels.length;++i)this.labels[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var s=this.type.isLoop?"loop":this.type===r.types._switch?"switch":null,i=this.labels.length-1;i>=0;i--){var a=this.labels[i];if(a.statementStart!=e.start)break;a.statementStart=this.start,a.kind=s}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(!0),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},a.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},a.parseBlock=function(e){var t=this.startNode(),n=!0,i=void 0;for(t.body=[],this.expect(r.types.braceL);!this.eat(r.types.braceR);){var s=this.parseStatement(!0);t.body.push(s),n&&e&&this.isUseStrict(s)&&(i=this.strict,this.setStrict(this.strict=!0)),n=!1}return i===!1&&this.setStrict(!1),this.finishNode(t,"BlockStatement")},a.parseFor=function(e,t){return e.init=t,this.expect(r.types.semi),e.test=this.type===r.types.semi?null:this.parseExpression(),this.expect(r.types.semi),e.update=this.type===r.types.parenR?null:this.parseExpression(),this.expect(r.types.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},a.parseForIn=function(e,t){var n=this.type===r.types._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.expect(r.types.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},a.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n.keyword;;){var i=this.startNode();if(this.parseVarId(i),this.eat(r.types.eq)?i.init=this.parseMaybeAssign(t):n!==r.types._const||this.type===r.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==i.id.type||t&&(this.type===r.types._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(r.types.comma))break}return e},a.parseVarId=function(e){e.id=this.parseBindingAtom(),this.checkLVal(e.id,!0)},a.parseFunction=function(e,t,n){return this.initFunction(e),this.options.ecmaVersion>=6&&(e.generator=this.eat(r.types.star)),(t||this.type===r.types.name)&&(e.id=this.parseIdent()),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},a.parseFunctionParams=function(e){this.expect(r.types.parenL),e.params=this.parseBindingList(r.types.parenR,!1,!1,!0)},a.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),i=!1;for(n.body=[],this.expect(r.types.braceL);!this.eat(r.types.braceR);)if(!this.eat(r.types.semi)){var s=this.startNode(),a=this.eat(r.types.star),o=this.type===r.types.name&&"static"===this.value;this.parsePropertyName(s),s["static"]=o&&this.type!==r.types.parenL,s["static"]&&(a&&this.unexpected(),a=this.eat(r.types.star),this.parsePropertyName(s)),s.kind="method";var u=!1;if(!s.computed){var l=s.key;a||"Identifier"!==l.type||this.type===r.types.parenL||"get"!==l.name&&"set"!==l.name||(u=!0,s.kind=l.name,l=this.parsePropertyName(s)),!s["static"]&&("Identifier"===l.type&&"constructor"===l.name||"Literal"===l.type&&"constructor"===l.value)&&(i&&this.raise(l.start,"Duplicate constructor in the same class"),u&&this.raise(l.start,"Constructor can't have get/set modifier"),a&&this.raise(l.start,"Constructor can't be a generator"),s.kind="constructor",i=!0)}if(this.parseClassMethod(n,s,a),u){var p="get"===s.kind?0:1;if(s.value.params.length!==p){var d=s.value.start;"get"===s.kind?this.raise(d,"getter should have no params"):this.raise(d,"setter should have exactly one param")}"set"===s.kind&&"RestElement"===s.value.params[0].type&&this.raise(s.value.params[0].start,"Setter cannot use rest params")}}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},a.parseClassMethod=function(e,t,n){t.value=this.parseMethod(n),e.body.push(this.finishNode(t,"MethodDefinition"))},a.parseClassId=function(e,t){e.id=this.type===r.types.name?this.parseIdent():t?this.unexpected():null},a.parseClassSuper=function(e){e.superClass=this.eat(r.types._extends)?this.parseExprSubscripts():null},a.parseExport=function(e){if(this.next(),this.eat(r.types.star))return this.expectContextual("from"),e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(r.types._default)){var t=this.parseMaybeAssign(),n=!0;return("FunctionExpression"==t.type||"ClassExpression"==t.type)&&(n=!1,t.id&&(t.type="FunctionExpression"==t.type?"FunctionDeclaration":"ClassDeclaration")),e.declaration=t,n&&this.semicolon(),this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(),this.eatContextual("from"))e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected();else{for(var i=0;i<e.specifiers.length;i++)(this.keywords.test(e.specifiers[i].local.name)||this.reservedWords.test(e.specifiers[i].local.name))&&this.unexpected(e.specifiers[i].local.start);e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},a.shouldParseExportStatement=function(){return this.type.keyword},a.parseExportSpecifiers=function(){var e=[],t=!0;for(this.expect(r.types.braceL);!this.eat(r.types.braceR);){if(t)t=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var n=this.startNode();n.local=this.parseIdent(this.type===r.types._default),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,e.push(this.finishNode(n,"ExportSpecifier"))}return e},a.parseImport=function(e){return this.next(),this.type===r.types.string?(e.specifiers=l,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===r.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},a.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===r.types.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(r.types.comma))return e}if(this.type===r.types.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(r.types.braceL);!this.eat(r.types.braceR);){if(t)t=!1;else if(this.expect(r.types.comma),this.afterTrailingComma(r.types.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(n.local=n.imported,this.isKeyword(n.local.name)&&this.unexpected(n.local.start),this.reservedWordsStrict.test(n.local.name)&&this.raise(n.local.start,"The keyword '"+n.local.name+"' is reserved")),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportSpecifier"))}return e}},{"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=e("./state"),s=e("./tokentype"),a=e("./whitespace"),o=function p(e,t,n,i){r(this,p),this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=i};n.TokContext=o;var u={b_stat:new o("{",!1),b_expr:new o("{",!0),b_tmpl:new o("${",!0),p_stat:new o("(",!1),p_expr:new o("(",!0),q_tmpl:new o("`",!0,!0,function(e){return e.readTmplToken()}),f_expr:new o("function",!0)};n.types=u;var l=i.Parser.prototype;l.initialContext=function(){return[u.b_stat]},l.braceIsBlock=function(e){if(e===s.types.colon){var t=this.curContext();if(t===u.b_stat||t===u.b_expr)return!t.isExpr}return e===s.types._return?a.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===s.types._else||e===s.types.semi||e===s.types.eof||e===s.types.parenR?!0:e==s.types.braceL?this.curContext()===u.b_stat:!this.exprAllowed},l.updateContext=function(e){var t=void 0,n=this.type;n.keyword&&e==s.types.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},s.types.parenR.updateContext=s.types.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===u.b_stat&&this.curContext()===u.f_expr?(this.context.pop(),this.exprAllowed=!1):e===u.b_tmpl?this.exprAllowed=!0:this.exprAllowed=!e.isExpr},s.types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?u.b_stat:u.b_expr),this.exprAllowed=!0},s.types.dollarBraceL.updateContext=function(){this.context.push(u.b_tmpl),this.exprAllowed=!0},s.types.parenL.updateContext=function(e){var t=e===s.types._if||e===s.types._for||e===s.types._with||e===s.types._while;this.context.push(t?u.p_stat:u.p_expr),this.exprAllowed=!0},s.types.incDec.updateContext=function(){},s.types._function.updateContext=function(){this.curContext()!==u.b_stat&&this.context.push(u.f_expr),this.exprAllowed=!1},s.types.backQuote.updateContext=function(){this.curContext()===u.q_tmpl?this.context.pop():this.context.push(u.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,r){try{return new RegExp(e,t)}catch(i){if(void 0!==n)throw i instanceof SyntaxError&&r.raise(n,"Error parsing regular expression: "+i.message),i}}function s(e){return 65535>=e?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(1023&e)+56320))}n.__esModule=!0;var a=e("./identifier"),o=e("./tokentype"),u=e("./state"),l=e("./locutil"),p=e("./whitespace"),d=function h(e){r(this,h),this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new l.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])};n.Token=d;var c=u.Parser.prototype,f="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);c.next=function(){this.options.onToken&&this.options.onToken(new d(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},c.getToken=function(){return this.next(),new d(this)},"undefined"!=typeof Symbol&&(c[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===o.types.eof,value:t}}}}),c.setStrict=function(e){if(this.strict=e,this.type===o.types.num||this.type===o.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},c.curContext=function(){return this.context[this.context.length-1]},c.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(o.types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},c.readToken=function(e){return a.isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},c.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(55295>=e||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},c.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){p.lineBreakG.lastIndex=t;for(var r=void 0;(r=p.lineBreakG.exec(this.input))&&r.index<this.pos;)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},c.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&10!==r&&13!==r&&8232!==r&&8233!==r;)++this.pos,r=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},c.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&14>e||e>=5760&&p.nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},c.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},c.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&57>=e)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(o.types.ellipsis)):(++this.pos,this.finishToken(o.types.dot))},c.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(o.types.assign,2):this.finishOp(o.types.slash,1)},c.readToken_mult_modulo=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(o.types.assign,2):this.finishOp(42===e?o.types.star:o.types.modulo,1);
},c.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?o.types.logicalOR:o.types.logicalAND,2):61===t?this.finishOp(o.types.assign,2):this.finishOp(124===e?o.types.bitwiseOR:o.types.bitwiseAND,1)},c.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(o.types.assign,2):this.finishOp(o.types.bitwiseXOR,1)},c.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45==t&&62==this.input.charCodeAt(this.pos+2)&&p.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(o.types.incDec,2):61===t?this.finishOp(o.types.assign,2):this.finishOp(o.types.plusMin,1)},c.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(o.types.assign,n+1):this.finishOp(o.types.bitShift,n)):33==t&&60==e&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===t&&(n=61===this.input.charCodeAt(this.pos+2)?3:2),this.finishOp(o.types.relational,n))},c.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(o.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(o.types.arrow)):this.finishOp(61===e?o.types.eq:o.types.prefix,1)},c.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(o.types.parenL);case 41:return++this.pos,this.finishToken(o.types.parenR);case 59:return++this.pos,this.finishToken(o.types.semi);case 44:return++this.pos,this.finishToken(o.types.comma);case 91:return++this.pos,this.finishToken(o.types.bracketL);case 93:return++this.pos,this.finishToken(o.types.bracketR);case 123:return++this.pos,this.finishToken(o.types.braceL);case 125:return++this.pos,this.finishToken(o.types.braceR);case 58:return++this.pos,this.finishToken(o.types.colon);case 63:return++this.pos,this.finishToken(o.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(o.types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(o.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+s(e)+"'")},c.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};var y=!!i("￿","u");c.readRegexp=function(){for(var e=this,t=void 0,n=void 0,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(p.lineBreak.test(s)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)n=!0;else if("]"===s&&n)n=!1;else if("/"===s&&!n)break;t="\\"===s}++this.pos}var a=this.input.slice(r,this.pos);++this.pos;var u=this.readWord1(),l=a;if(u){var d=/^[gim]*$/;this.options.ecmaVersion>=6&&(d=/^[gimuy]*$/),d.test(u)||this.raise(r,"Invalid regular expression flag"),u.indexOf("u")>=0&&!y&&(l=l.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,n,i){return n=Number("0x"+n),n>1114111&&e.raise(r+i+3,"Code point out of bounds"),"x"}),l=l.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}var c=null;return f||(i(l,void 0,r,this),c=i(a,u)),this.finishToken(o.types.regexp,{pattern:a,flags:u,value:c})},c.readInt=function(e,t){for(var n=this.pos,r=0,i=0,s=null==t?1/0:t;s>i;++i){var a=this.input.charCodeAt(this.pos),o=void 0;if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0,o>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},c.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),a.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(o.types.num,t)},c.readNumber=function(e){var t=this.pos,n=!1,r=48===this.input.charCodeAt(this.pos);e||null!==this.readInt(10)||this.raise(t,"Invalid number");var i=this.input.charCodeAt(this.pos);46===i&&(++this.pos,this.readInt(10),n=!0,i=this.input.charCodeAt(this.pos)),(69===i||101===i)&&(i=this.input.charCodeAt(++this.pos),(43===i||45===i)&&++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number"),n=!0),a.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(t,this.pos),u=void 0;return n?u=parseFloat(s):r&&1!==s.length?/[89]/.test(s)||this.strict?this.raise(t,"Invalid number"):u=parseInt(s,8):u=parseInt(s,10),this.finishToken(o.types.num,u)},c.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t=void 0;if(123===e){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.raise(n,"Code point out of bounds")}else t=this.readHexChar(4);return t},c.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(p.isNewLine(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(o.types.string,t)},c.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===o.types.template?36===n?(this.pos+=2,this.finishToken(o.types.dollarBraceL)):(++this.pos,this.finishToken(o.types.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(o.types.template,e));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(p.isNewLine(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},c.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return s(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&55>=t){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),"0"!==n&&(this.strict||e)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=n.length-1,String.fromCharCode(r)}return String.fromCharCode(t)}},c.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.raise(t,"Bad character escape sequence"),n},c.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(a.isIdentifierChar(i,r))this.pos+=65535>=i?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var o=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var u=this.readCodePoint();(t?a.isIdentifierStart:a.isIdentifierChar)(u,r)||this.raise(o,"Invalid Unicode escape"),e+=s(u),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},c.readWord=function(){var e=this.readWord1(),t=o.types.name;return(this.options.ecmaVersion>=6||!this.containsEsc)&&this.keywords.test(e)&&(t=o.keywords[e]),this.finishToken(t,e)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return new a(e,{beforeExpr:!0,binop:t})}function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.keyword=e,p[e]=l["_"+e]=new a(e,t)}n.__esModule=!0;var a=function d(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,d),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};n.TokenType=a;var o={beforeExpr:!0},u={startsExpr:!0},l={num:new a("num",u),regexp:new a("regexp",u),string:new a("string",u),name:new a("name",u),eof:new a("eof"),bracketL:new a("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new a("]"),braceL:new a("{",{beforeExpr:!0,startsExpr:!0}),braceR:new a("}"),parenL:new a("(",{beforeExpr:!0,startsExpr:!0}),parenR:new a(")"),comma:new a(",",o),semi:new a(";",o),colon:new a(":",o),dot:new a("."),question:new a("?",o),arrow:new a("=>",o),template:new a("template"),ellipsis:new a("...",o),backQuote:new a("`",u),dollarBraceL:new a("${",{beforeExpr:!0,startsExpr:!0}),eq:new a("=",{beforeExpr:!0,isAssign:!0}),assign:new a("_=",{beforeExpr:!0,isAssign:!0}),incDec:new a("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new a("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:i("||",1),logicalAND:i("&&",2),bitwiseOR:i("|",3),bitwiseXOR:i("^",4),bitwiseAND:i("&",5),equality:i("==/!=",6),relational:i("</>",7),bitShift:i("<</>>",8),plusMin:new a("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:i("%",10),star:i("*",10),slash:i("/",10)};n.types=l;var p={};n.keywords=p,s("break"),s("case",o),s("catch"),s("continue"),s("debugger"),s("default",o),s("do",{isLoop:!0,beforeExpr:!0}),s("else",o),s("finally"),s("for",{isLoop:!0}),s("function",u),s("if"),s("return",o),s("switch"),s("throw",o),s("try"),s("var"),s("let"),s("const"),s("while",{isLoop:!0}),s("with"),s("new",{beforeExpr:!0,startsExpr:!0}),s("this",u),s("super",u),s("class"),s("extends",o),s("export"),s("import"),s("yield",{beforeExpr:!0,startsExpr:!0}),s("null",u),s("true",u),s("false",u),s("in",{beforeExpr:!0,binop:7}),s("instanceof",{beforeExpr:!0,binop:7}),s("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),s("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),s("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(e,t,n){"use strict";function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.__esModule=!0,n.isArray=r,n.has=i},{}],16:[function(e,t,n){"use strict";function r(e){return 10===e||13===e||8232===e||8233==e}n.__esModule=!0,n.isNewLine=r;var i=/\r\n?|\n|\u2028|\u2029/;n.lineBreak=i;var s=new RegExp(i.source,"g");n.lineBreakG=s;var a=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;n.nonASCIIwhitespace=a},{}]},{},[3])(3)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){"use strict";var r=function(e,t,n){e&&t in e&&"undefined"!=typeof e[t]&&n(e[t])},i=function(e,t){if("boolean"==typeof e)return e;switch(e){case"true":return!0;case"false":return!1;default:return t}},s=/^Collection\((.*)\)$/,a=function(){function e(e,t,n){this.$data=e,this.options=t||{},this.metadata=n,this.options.container=this.$data.Container}return e.prototype._getMaxValue=function(e){return"number"==typeof e?e:"max"===e?Number.MAX_VALUE:parseInt(e)},e.prototype.createTypeDefinition=function(e,t){var n=this;r(e,"type",function(e){var r=s.exec(e);r?(t.type=n.options.collectionBaseType||"Array",t.elementType=r[1]):t.type=e})},e.prototype.createReturnTypeDefinition=function(e,t){r(e,"type",function(e){var n=s.exec(e);n?(t.returnType="$data.Queryable",t.elementType=n[1]):t.returnType=e})},e.prototype.createProperty=function(e,t){var n=this,s=this;t||(t=e,e=void 0);var a={};return this.createTypeDefinition(t,a),r(t,"nullable",function(e){a.nullable=i(e,!0),a.required=i(e,!0)===!1}),r(t,"maxLength",function(e){a.maxLength=n._getMaxValue(e)}),r(e,"key",function(e){e.propertyRefs.some(function(e){return e.name===t.name})&&(a.key=!0)}),r(t,"concurrencyMode",function(e){a.concurrencyMode=s.$data.ConcurrencyMode[e]}),{name:t.name,definition:a}},e.prototype.createNavigationProperty=function(e,t){t||(t=e,e=void 0);var n={};return this.createTypeDefinition(t,n),r(t,"nullable",function(e){n.nullable=i(e,!0),n.required=i(e,!0)===!1}),r(t,"partner",function(e){n.inverseProperty=e}),n.inverseProperty||(n.inverseProperty="$$unbound"),{name:t.name,definition:n}},e.prototype.createEntityDefinition=function(e){var t=(e.properties||[]).map(this.createProperty.bind(this,e)),n=(e.navigationProperties||[]).map(this.createNavigationProperty.bind(this,e));t=t.concat(n);var r=t.reduce(function(e,t){return e[t.name]=t.definition,e},{});return r},e.prototype.createEntityType=function(e,t){var n=(e.baseType?e.baseType:this.options.baseType)||this.$data.Entity,s=this.createEntityDefinition(e),a=t+"."+e.name,o={};return r(e,"openType",function(e){i(e,!1)&&(o.openType={value:!0})}),{namespace:t,typeName:a,baseType:n,params:[a,this.options.container,s,o],definition:s,type:"entity"}},e.prototype.createEnumOption=function(e,t,n){t||(t=e,e=void 0);var i={name:t.name,index:n};return r(t,"value",function(e){var t=+e;isNaN(t)||(i.value=t)}),i},e.prototype.createEnumDefinition=function(e){var t=(e.members||[]).map(this.createEnumOption.bind(this,e));return t},e.prototype.createEnumType=function(e,t){var n=this,r=this.createEnumDefinition(e),i=t+"."+e.name;return{namespace:t,typeName:i,baseType:n.$data.Enum,params:[i,this.options.container,e.underlyingType,r],definition:r,type:"enum"}},e.prototype.createEntitySetProperty=function(e,t){var n=e.entityType,r={name:e.name,definition:{type:this.options.entitySetType||"$data.EntitySet",elementType:n}};return r},e.prototype.indexBy=function(e,t){return[function(n,r){return n[r[e]]=r[t],n},{}]},e.prototype.createContextDefinition=function(e,t){var n=this,r=(e.entitySets||[]).map(function(t){return n.createEntitySetProperty(t,e)}),i=r.reduce.apply(r,this.indexBy("name","definition"));return i},e.prototype.createContextType=function(e,t){if(Array.isArray(e))throw new Error("Array type is not supported here");var n=this.createContextDefinition(e,t),r=this.options.contextType||this.$data.EntityContext,i=t+"."+e.name,s=[];return e.actionImports&&s.push.apply(s,e.actionImports),e.functionImports&&s.push.apply(s,e.functionImports),{namespace:t,typeName:i,baseType:r,params:[i,this.options.container,n],definition:n,type:"context",contextImportMethods:s}},e.prototype.createMethodParameter=function(e,t){var n={name:e.name};this.createTypeDefinition(e,n),t.params.push(n)},e.prototype.applyBoundMethod=function(e,t,n,s){var a=this,o={type:s,namespace:t,returnType:null,params:[]};r(e,"returnType",function(e){a.createReturnTypeDefinition(e,o)});var u=[].concat(e.parameters);if(u.forEach(function(e){return a.createMethodParameter(e,o)}),i(e.isBound,!1)){var l=o.params.shift();if(l.type===(this.options.collectionBaseType||"Array")){var p=n.filter(function(e){return e.namespace===t&&"context"===e.type});p.forEach(function(t){for(var n in t.definition){var r=t.definition[n];r.elementType===l.elementType&&(r.actions=r.actions={},r.actions[e.name]=o)}})}else{var d=n.filter(function(e){return e.typeName===l.type&&"entity"===e.type});d.forEach(function(t){t.definition[e.name]=o})}}else{delete o.namespace;var c=t+"."+e.name,p=n.filter(function(e){return"context"===e.type});p.forEach(function(t){t.contextImportMethods.forEach(function(n){(n.action===c||n["function"]===c)&&(t.definition[e.name]=o)})})}},e.prototype.processMetadata=function(e){var t=this,n=e||[],r=[],i=[],s=this;if(this.metadata.dataServices.schemas.forEach(function(e){var n=e.namespace;if(e.enumTypes){var a=e.enumTypes.map(function(e){return t.createEnumType(e,n)});r.push.apply(r,a)}if(e.complexTypes){var o=e.complexTypes.map(function(e){return t.createEntityType(e,n)});r.push.apply(r,o)}if(e.entityTypes){var u=e.entityTypes.map(function(e){return t.createEntityType(e,n)});r.push.apply(r,u)}if(e.actions&&i.push.apply(i,e.actions.map(function(e){return function(r){return t.applyBoundMethod(e,n,r,"$data.ServiceAction")}})),e.functions&&i.push.apply(i,e.functions.map(function(e){return function(r){return t.applyBoundMethod(e,n,r,"$data.ServiceFunction")}})),e.entityContainer){var l=e.entityContainer.map(function(e){return t.createContextType(e,s.options.namespace||n)});r.push.apply(r,l)}}),i.forEach(function(e){return e(r)}),n.src='(function(mod) {\n  if (typeof exports == "object" && typeof module == "object") return mod(exports, require("jaydata/core")); // CommonJS\n  if (typeof define == "function" && define.amd) return define(["exports"], mod); // AMD\n  mod($data.generatedContext || ($data.generatedContext = {}), $data); // Plain browser env\n})(function(exports, $data) {\n\nvar types = {};\n\n',n.push.apply(n,r.map(function(e){var r="";if(e.baseType==s.$data.Enum)r+='types["'+e.params[0]+'"] = $data.createEnum("'+e.params[0]+'", [\n'+Object.keys(e.params[3]).map(function(t){return"  "+JSON.stringify(e.params[3][t])}).join(",\n")+"\n]);\n\n";else{var i=t.options.container.resolveName(e.baseType);e.baseType==s.$data.EntityContext&&(r+="exports.type = "),r+='types["'+e.params[0]+'"] = '+("$data.Entity"==i||"$data.EntityContext"==i?i:'types["'+i+'"]')+'.extend("'+e.params[0]+'", ',r+=e.params[2]&&Object.keys(e.params[2]).length>0?"{\n"+Object.keys(e.params[2]).map(function(t){return"  "+t+": "+JSON.stringify(e.params[2][t])}).join(",\n")+"\n}":"null",e.params[3]&&Object.keys(e.params[3]).length>0&&(r+=", {\n"+Object.keys(e.params[3]).map(function(t){return"  "+t+": "+JSON.stringify(e.params[3][t])}).join(",\n")+"\n}"),r+=");\n\n"}n.src+=r,t.options.debug&&console.log("Type generated:",e.params[0]);var a=t.options.container.resolveType(e.baseType);return a.extend.apply(a,e.params)})),n.src+='var ctxType = exports.type;\nexports.factory = function(config){\n  if (ctxType){\n    var cfg = $data.typeSystem.extend({\n      name: "oData",\n      oDataServiceHost: "'+this.options.url.replace("/$metadata","")+'",\n      withCredentials: '+(this.options.withCredentials||!1)+',\n      maxDataServiceVersion: "'+(this.options.maxDataServiceVersion||"4.0")+'"\n    }, config);\n    return new ctxType(cfg);\n  }else{\n    return null;\n  }\n};\n\n',this.options.autoCreateContext){var a="string"==typeof this.options.autoCreateContext?this.options.autoCreateContext:"context";n.src+='exports["'+a+'"] = exports.factory();\n\n'}return n.src+="});",n},e}();n.Metadata=a},{}],4:[function(e,t,n){(function(t){"use strict";var r=e("odata-metadata"),i=e("./metadata"),s="undefined"!=typeof window?window.odatajs:"undefined"!=typeof t?t.odatajs:null,a=e("extend"),o=function(){function e(e,t){this.$data=e,this.options=t||{},this.prepareRequest=t.prepareRequest||function(){},"undefined"==typeof s||"undefined"==typeof s.oData?console.error("Not Found!:","odatajs is required"):this.oData=s.oData}return e.prototype.parse=function(e){var t=this,n=new r.Edm.Edmx(this.oData.metadata.metadataParser(null,e)),s=new i.Metadata(this.$data,this.options,n),a=s.processMetadata(),o=a.filter(function(e){return e.isAssignableTo(t.$data.EntityContext)})[0],u=this._createFactoryFunc(o);return u.type=o,u.src=a.src,u},e.prototype.load=function(){var e=this;return new Promise(function(t,n){var s=e.options.url.replace("/$metadata",""),a=s.replace(/\/+$/,"")+"/$metadata";e.options.serivceUri=s;var o=[{requestUri:a,method:e.options.method||"GET",headers:e.options.headers||{}},function(n){var s=new r.Edm.Edmx(n),a=new i.Metadata(e.$data,e.options,s),o=a.processMetadata(),u=o.filter(function(t){return t.isAssignableTo(e.$data.EntityContext)})[0],l=e._createFactoryFunc(u);l.type=u,l.src=o.src,t(l)},n,e.oData.metadataHandler];e._appendBasicAuth(o[0],e.options.user,e.options.password,e.options.withCredentials),e.prepareRequest.call(e,o),e.oData.request.apply(e.oData,o)})},e.prototype._createFactoryFunc=function(e){var t=this;return function(n){if(e){var r=a({name:"oData",oDataServiceHost:t.options.url.replace("/$metadata",""),user:t.options.user,password:t.options.password,withCredentials:t.options.withCredentials,maxDataServiceVersion:t.options.maxDataServiceVersion||"4.0"},n);return new e(r)}return null}},e.prototype._appendBasicAuth=function(e,t,n,r){e.headers=e.headers||{},!e.headers.Authorization&&t&&n&&(e.headers.Authorization="Basic "+this.__encodeBase64(t+":"+n)),r&&(e.withCredentials=r)},e.prototype.__encodeBase64=function(e){var t,n,r,i,s,a,o,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=e,p="",d=0;do t=l.charCodeAt(d++),n=l.charCodeAt(d++),r=l.charCodeAt(d++),i=t>>2,s=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,o=63&r,isNaN(n)?a=o=64:isNaN(r)&&(o=64),p=p+u.charAt(i)+u.charAt(s)+u.charAt(a)+u.charAt(o);while(d<l.length);return p},e}();n.MetadataHandler=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./metadata":3,extend:6,"odata-metadata":12}],5:[function(e,t,n){"use strict";var r=e("extend"),i=e("./metadataHandler"),s=e("jaydata-error-handler"),a=e("jaydata-promise-handler"),o=e("./metadataHandler");n.MetadataHandler=o.MetadataHandler;var u=function(){function e(){this.config={}}return e}();n.ServiceParams=u;var l=function(){function e(e){this.$data=e}return e.prototype.service=function(t,n,s){var o=new u;e.getParam(n,o),e.getParam(s,o),"object"==typeof t?r(o.config,t):"string"==typeof t&&(o.config=o.config||{},o.config.url=t);var l=new a.PromiseHandler,p=l.createCallback(o.callback),d=this;return new i.MetadataHandler(this.$data,o.config).load().then(function(e){var t=e.type,n=o.config.serviceName||o.config.storeAlias;n&&"addStore"in d.$data&&d.$data.addStore(n,e,void 0===o.config.isDefault||o.config.isDefault),p.success(e,t)},function(e){p.error(e)}),l.getPromise()},e.prototype.initService=function(t,n,i){var o=new u;e.getParam(n,o),e.getParam(i,o),"object"==typeof t?r(o.config,t):"string"==typeof t&&(o.config=o.config||{},o.config.url=t);var l=new a.PromiseHandler,p=l.createCallback(o.callback);return this.service(o.config.url,o.config,{success:function(e){var t=e();return t?t.onReady(p):p.error(new s.Exception("Missing Context Type"))},error:p.error}),l.getPromise()},e.use=function(t){var n=new e(t);t.service=n.service,t.initService=n.initService},e.getParam=function(e,t){switch(typeof e){case"object":"function"==typeof e.success||"function"==typeof e.error?t.callback=e:t.config=e;break;case"function":t.callback=e}},e}();n.DynamicMetadata=l},{"./metadataHandler":4,extend:6,"jaydata-error-handler":7,"jaydata-promise-handler":8}],6:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},a=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t=r.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var s;for(s in e);return"undefined"==typeof s||r.call(e,s)};t.exports=function o(){var e,t,n,r,i,u,l=arguments[0],p=1,d=arguments.length,c=!1;for("boolean"==typeof l?(c=l,l=arguments[1]||{},p=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});d>p;++p)if(e=arguments[p],null!=e)for(t in e)n=l[t],r=e[t],l!==r&&(c&&r&&(a(r)||(i=s(r)))?(i?(i=!1,u=n&&s(n)?n:[]):u=n&&a(n)?n:{},l[t]=o(c,u,r)):"undefined"!=typeof r&&(l[t]=r));return l}},{}],7:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t,n,r){e.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=n||"Exception",this.message=t,this.data=r}return r(t,e),t.prototype._getStackTrace=function(){},t}(Error);n.Exception=i;var s=function(){function e(){}return e.requireValue=function(t,n){("undefined"==typeof n||null===n)&&e.raise(t+" requires a value other than undefined or null")},e.requireType=function(t,n,r){var i=r instanceof Array?r:[r];return i.some(function(r){switch(typeof r){case"string":return typeof n===r;case"function":return n instanceof r;default:e.raise("Unknown type format : "+typeof r+" for: "+t)}})},e.raise=function(e){if("undefined"==typeof n.intellisense)throw e instanceof i?console.error(e.name+":",e.message+"\n",e):console.error(e),e},e.isNullOrUndefined=function(e){return void 0===e||null===e},e}();n.Guard=s},{}],8:[function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("extend"),s=e("./promiseHandlerBase"),a=function(e){function t(){e.call(this);var t=this,n=new Promise(function(e,n){t.resolve=e,t.reject=n});this.deferred={resolve:function(){t.resolve.apply(n,arguments)},reject:function(){t.reject.apply(n,arguments)},promise:n}}return r(t,e),t.prototype.createCallback=function(e){var t=s.PromiseHandlerBase.createCallbackSettings(e),n=this,r=new s.CallbackSettings;return r=i(r,{success:function(){t.success.apply(n.deferred,arguments),n.resolve.apply(n.deferred,arguments)},error:function(){Array.prototype.push.call(arguments,n.deferred),t.error.apply(n.deferred,arguments)},notify:function(){t.notify.apply(n.deferred,arguments)}})},t.prototype.getPromise=function(){return this.deferred.promise},t.compatibilityMode=function(){Promise.prototype.fail=function(e){return this.then(null,function(t){throw e(t),t})},Promise.prototype.always=function(e){return this.then(e,function(t){throw e(t),t})}},t.use=function(e){e.PromiseHandler="function"==typeof Promise?t:s.PromiseHandlerBase,e.PromiseHandlerBase=s.PromiseHandlerBase,e.Promise=s.PromiseNotImplemented},t}(s.PromiseHandlerBase);n.PromiseHandler=a},{"./promiseHandlerBase":9,extend:10}],9:[function(e,t,n){"use strict";var r=e("extend"),i=e("jaydata-error-handler"),s=function(){function e(){}return e}();n.CallbackSettings=s;var a=function(){function e(){}return e.prototype.always=function(){i.Guard.raise(new i.Exception("$data.Promise.always","Not implemented!"))},e.prototype.done=function(){i.Guard.raise(new i.Exception("$data.Promise.done","Not implemented!"))},e.prototype.fail=function(){i.Guard.raise(new i.Exception("$data.Promise.fail","Not implemented!"))},e.prototype.isRejected=function(){i.Guard.raise(new i.Exception("$data.Promise.isRejected","Not implemented!"))},e.prototype.isResolved=function(){i.Guard.raise(new i.Exception("$data.Promise.isResolved","Not implemented!"))},e.prototype.pipe=function(){i.Guard.raise(new i.Exception("$data.Promise.pipe","Not implemented!"))},e.prototype.progress=function(){i.Guard.raise(new i.Exception("$data.Promise.progress","Not implemented!"))},e.prototype.promise=function(){i.Guard.raise(new i.Exception("$data.Promise.promise","Not implemented!"))},e.prototype.state=function(){i.Guard.raise(new i.Exception("$data.Promise.state","Not implemented!"))},e.prototype.then=function(){i.Guard.raise(new i.Exception("$data.Promise.then","Not implemented!"))},e}();n.PromiseNotImplemented=a;var o=function(){function e(){}return e.defaultSuccessCallback=function(){},e.defaultNotifyCallback=function(){},e.defaultErrorCallback=function(){arguments.length>0&&arguments[arguments.length-1]&&"function"==typeof arguments[arguments.length-1].reject?((console.error||console.log).call(console,arguments[0]),arguments[arguments.length-1].reject.apply(arguments[arguments.length-1],arguments)):arguments[0]instanceof Error?console.error(arguments[0]):console.error("DefaultError:","DEFAULT ERROR CALLBACK!",arguments)},e.createCallbackSettings=function(t,n){var i=n||{success:e.defaultSuccessCallback,error:e.defaultErrorCallback,notify:e.defaultNotifyCallback},a=new s;a=null==t||void 0==t?i:"function"==typeof t?r(i,{success:t}):r(i,t);var o=function(e){function t(){e.apply(n,arguments),e=function(){}}var n=this;return t};return"function"==typeof a.error&&(a.error=o(a.error)),a},e.prototype.createCallback=function(t){return e.createCallbackSettings(t)},e.prototype.getPromise=function(){return new a},e}();n.PromiseHandlerBase=o},{extend:10,"jaydata-error-handler":11}],10:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],11:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],12:[function(e,t,n){var r,i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,a=3>s?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(3>s?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},o=e("./metacode");!function(e){var t=function(){function e(e){this.className=e}return e.prototype.toString=function(){return this.className},e}();e.PrimitiveType=t,e.Binary=new t("Edm.Binary"),e.Boolean=new t("Edm.Boolean"),e.Byte=new t("Edm.Byte"),e.Date=new t("Edm.Date"),e.DateTimeOffset=new t("Edm.DateTimeOffset"),e.Decimal=new t("Edm.Decimal"),e.Double=new t("Edm.Double"),e.Duration=new t("Edm.Duration"),e.Guid=new t("Edm.Guid"),e.Int16=new t("Edm.Int16"),e.Int32=new t("Edm.Int32"),e.Int64=new t("Edm.Int64"),e.SByte=new t("Edm.SByte"),e.Single=new t("Edm.Single"),e.Stream=new t("Edm.Stream"),e.String=new t("Edm.String"),e.TimeOfDay=new t("Edm.TimeOfDay"),e.Geography=new t("Edm.Geography"),e.GeographyPoint=new t("Edm.GeographyPoint"),e.GeographyLineString=new t("Edm.GeographyLineString"),e.GeographyPolygon=new t("Edm.GeographyPolygon"),e.GeographyMultiPoint=new t("Edm.GeographyMultiPoint"),e.GeographyMultiLineString=new t("Edm.GeographyMultiLineString"),e.GeographyMultiPolygon=new t("Edm.GeographyMultiPolygon"),e.GeographyCollection=new t("Edm.GeographyCollection"),e.Geometry=new t("Edm.Geometry"),e.GeometryPoint=new t("Edm.GeometryPoint"),e.GeometryLineString=new t("Edm.GeometryLineString"),e.GeometryPolygon=new t("Edm.GeometryPolygon"),e.GeometryMultiPoint=new t("Edm.GeometryMultiPoint"),e.GeometryMultiLineString=new t("Edm.GeometryMultiLineString"),e.GeometryMultiPolygon=new t("Edm.GeometryMultiPolygon"),e.GeometryCollection=new t("Edm.GeometryCollection");var n=o.MemberAttribute,r=o.parse,u=o.required,l=o.defaultValue,p=o.parseAs,d=o.AttributeFunctionChain,c=function(e,t){return new o.AttributeFunctionChain(function(t,n){return t[e]},function(e,t){return Array.isArray(e)?e:e?[e]:[]},function(e,n){return e.map(function(e){return t(e,n)})})},f=function(){function e(e,t){
this.parent=t,e&&this.loadFrom(e)}return e.prototype.loadFrom=function(e){var t=this,r=Object.getPrototypeOf(this);n.getMembers(r).forEach(function(i){var s=n.getAttributeValue(r,i,"serialize"),a=s.invoke(e,t);t[i]=a})},e}();e.EdmItemBase=f;var y=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"type",void 0),s([r,l(!0),a("design:type",Boolean)],t.prototype,"nullable",void 0),s([r,a("design:type",Number)],t.prototype,"maxLength",void 0),s([r,a("design:type",Number)],t.prototype,"precision",void 0),s([r,a("design:type",Number)],t.prototype,"scale",void 0),s([r,a("design:type",Boolean)],t.prototype,"unicode",void 0),s([r,l(0),a("design:type",Number)],t.prototype,"SRID",void 0),s([r,a("design:type",Object)],t.prototype,"defaultValue",void 0),s([r,a("design:type",Object)],t.prototype,"concurrencyMode",void 0),t}(f);e.Property=y;var h=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"type",void 0),s([r,l(!0),a("design:type",Boolean)],t.prototype,"nullable",void 0),s([r,a("design:type",String)],t.prototype,"partner",void 0),s([r,a("design:type",Boolean)],t.prototype,"containsTarget",void 0),s([p(c("referentialConstraint",function(e,t){return new m(e,t)})),a("design:type",Array)],t.prototype,"referentialConstraints",void 0),t}(f);e.NavigationProperty=h;var m=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"property",void 0),s([r,u,a("design:type",String)],t.prototype,"referencedProperty",void 0),t}(f);e.ReferentialConstraint=m;var x=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,a("design:type",String)],t.prototype,"alias",void 0),t}(f);e.PropertyRef=x;var g=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([p(c("propertyRef",function(e,t){return new x(e,t)})),a("design:type",Array)],t.prototype,"propertyRefs",void 0),t}(f);e.Key=g;var v=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([p(new d(function(e,t){return e.key},function(e,t){return e||[]},function(e,t){return e.map(function(e){return new g(e,t)})},function(e){return e[0]})),a("design:type",g)],t.prototype,"key",void 0),s([r,a("design:type",String)],t.prototype,"baseType",void 0),s([r,a("design:type",Boolean)],t.prototype,"abstract",void 0),s([r,a("design:type",Boolean)],t.prototype,"openType",void 0),s([r,a("design:type",Boolean)],t.prototype,"hasStream",void 0),s([p(c("property",function(e,t){return new y(e,t)})),a("design:type",Array)],t.prototype,"properties",void 0),s([p(c("navigationProperty",function(e,t){return new h(e,t)})),a("design:type",Array)],t.prototype,"navigationProperties",void 0),t}(f);e.EntityType=v;var E=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,a("design:type",String)],t.prototype,"baseType",void 0),s([r,a("design:type",Boolean)],t.prototype,"abstract",void 0),s([r,a("design:type",Boolean)],t.prototype,"openType",void 0),s([r,a("design:type",Boolean)],t.prototype,"hasStream",void 0),s([p(c("property",function(e,t){return new y(e,t)})),a("design:type",Array)],t.prototype,"properties",void 0),s([p(c("navigationProperty",function(e,t){return new h(e,t)})),a("design:type",Array)],t.prototype,"navigationProperties",void 0),t}(f);e.ComplexType=E;var b=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"type",void 0),s([r,l(!0),a("design:type",Boolean)],t.prototype,"nullable",void 0),s([r,a("design:type",Number)],t.prototype,"maxLength",void 0),s([r,a("design:type",Number)],t.prototype,"precision",void 0),s([r,a("design:type",Number)],t.prototype,"scale",void 0),s([r,a("design:type",Boolean)],t.prototype,"unicode",void 0),s([r,l(0),a("design:type",Number)],t.prototype,"SRID",void 0),t}(f);e.Parameter=b;var T=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,a("design:type",String)],t.prototype,"type",void 0),s([r,l(!0),a("design:type",Boolean)],t.prototype,"nullable",void 0),t}(f);e.ReturnType=T;var C=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(f);e.Invokable=C;var _=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,a("design:type",Boolean)],t.prototype,"isBound",void 0),s([r,a("design:type",String)],t.prototype,"entitySetPath",void 0),s([p(c("parameter",function(e,t){return new b(e,t)})),a("design:type",Array)],t.prototype,"parameters",void 0),s([p(new d(function(e,t){return e.returnType},function(e,t){return new T(e,t)})),a("design:type",T)],t.prototype,"returnType",void 0),t}(C);e.Action=_;var S=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,a("design:type",Boolean)],t.prototype,"isBound",void 0),s([r,a("design:type",String)],t.prototype,"entitySetPath",void 0),s([p(c("parameter",function(e,t){return new b(e,t)})),a("design:type",Array)],t.prototype,"parameters",void 0),s([p(new d(function(e,t){return e.returnType},function(e,t){return new T(e,t)})),a("design:type",T)],t.prototype,"returnType",void 0),s([r,a("design:type",Boolean)],t.prototype,"isComposable",void 0),t}(C);e.Function=S;var P=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,a("design:type",Number)],t.prototype,"value",void 0),t}(f);e.Member=P;var M=function(n){function o(){n.apply(this,arguments)}return i(o,n),s([r,u,a("design:type",String)],o.prototype,"name",void 0),s([r,u,a("design:type",String)],o.prototype,"namespace",void 0),s([r,l(e.Int32),a("design:type",t)],o.prototype,"underlyingType",void 0),s([r,a("design:type",Boolean)],o.prototype,"isFlags",void 0),s([p(c("member",function(e,t){return new P(e,t)})),a("design:type",Array)],o.prototype,"members",void 0),o}(f);e.EnumType=M;var j=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"entityType",void 0),t}(f);e.EntitySet=j;var w=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"action",void 0),t}(f);e.ActionImport=w;var A=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,u,a("design:type",String)],t.prototype,"name",void 0),s([r,u,a("design:type",String)],t.prototype,"function",void 0),s([r,l(!1),a("design:type",Boolean)],t.prototype,"includeInServiceDocument",void 0),t}(f);e.FunctionImport=A;var O=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([r,a("design:type",String)],t.prototype,"name",void 0),s([p(c("entitySet",function(e,t){return new j(e,t)})),a("design:type",Array)],t.prototype,"entitySets",void 0),s([p(c("actionImport",function(e,t){return new w(e,t)})),a("design:type",Array)],t.prototype,"actionImports",void 0),s([p(c("functionImport",function(e,t){return new A(e,t)})),a("design:type",Array)],t.prototype,"functionImports",void 0),t}(f);e.EntityContainer=O;var N=function(t){function n(){t.apply(this,arguments)}return i(n,t),s([r,u,a("design:type",String)],n.prototype,"namespace",void 0),s([r,a("design:type",String)],n.prototype,"alias",void 0),s([p(c("enumType",function(e,t){return new M(e,t)})),a("design:type",Array)],n.prototype,"enumTypes",void 0),s([p(c("complexType",function(e,t){return new E(e,t)})),a("design:type",Array)],n.prototype,"complexTypes",void 0),s([p(c("entityType",function(e,t){return new v(e,t)})),a("design:type",Array)],n.prototype,"entityTypes",void 0),s([p(c("action",function(e,t){return new _(e,t)})),a("design:type",Array)],n.prototype,"actions",void 0),s([p(c("function",function(t,n){return new e.Function(t,n)})),a("design:type",Array)],n.prototype,"functions",void 0),s([p(c("entityContainer",function(t,n){return new e.EntityContainer(t,n)})),a("design:type",Array)],n.prototype,"entityContainer",void 0),n}(f);e.Schema=N;var k=function(e){function t(){e.apply(this,arguments)}return i(t,e),s([p(c("schema",function(e,t){return new N(e,t)})),a("design:type",Array)],t.prototype,"schemas",void 0),t}(f);e.DataServices=k;var V=function(t){function n(){t.apply(this,arguments)}return i(n,t),s([p(new d(function(t){return new e.DataServices(t.dataServices)})),a("design:type",Array)],n.prototype,"dataServices",void 0),n}(f);e.Edmx=V}(r=n.Edm||(n.Edm={}))},{"./metacode":13}],13:[function(e,t,n){function r(e){return"function"==typeof e}function i(e){return void 0===e}var s=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};e("reflect-metadata");var a=function(){function e(e){this.attributeName=e}return e.prototype.registerMember=function(e,t){var n=Reflect.getMetadata("members",e)||[];n.indexOf(t)<0&&n.push(t),Reflect.defineMetadata("members",n,e)},e.prototype.getDecoratorValue=function(e,t,n){return n},e.prototype.decorate=function(e){var t=this;return function(n,r,i){t.registerMember(n,r);var s=t.getDecoratorValue(n,r,e);Reflect.defineMetadata(t.attributeName,s,n,r)}},Object.defineProperty(e.prototype,"decorator",{get:function(){return this.decorate()},enumerable:!0,configurable:!0}),e.prototype.isApplied=function(e,t){return Reflect.getMetadataKeys(Object.getPrototypeOf(e),t).indexOf(this.attributeName)>-1},e.getMembers=function(e){return Reflect.getMetadata("members",r(e)?e.prototype:e)},e.getAttributeNames=function(e,t){return Reflect.getMetadataKeys(e,t)},e.getAttributeValue=function(e,t,n){return Reflect.getMetadata(n,e,t)},e}();n.MemberAttribute=a;var o=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.steps=[],this.steps=e}return e.prototype.invoke=function(e,t){var n=e;return this.steps.forEach(function(e){n=e(n,t)}),n},e}();n.AttributeFunctionChain=o;var u=function(e){function t(){e.call(this,"serialize")}return s(t,e),t.prototype.getDecoratorValue=function(e,t,n){return i(n)?new o(function(e){return e[t]}):n},t}(a);n.ParseAttribute=u,n.required=new a("required").decorate(!0),n.defaultValueAttribute=new a("defaultValue"),n.defaultValue=n.defaultValueAttribute.decorate.bind(n.defaultValueAttribute),n.parseAttribute=new u,n.parse=n.parseAttribute.decorator,n.parseAs=n.parseAttribute.decorate.bind(n.parseAttribute),n.typeArgument=new a("typeArgument")},{"reflect-metadata":15}],14:[function(e,t,n){function r(){p=!1,o.length?l=o.concat(l):d=-1,l.length&&i()}function i(){if(!p){var e=setTimeout(r);p=!0;for(var t=l.length;t;){for(o=l,l=[];++d<t;)o&&o[d].run();d=-1,t=l.length}o=null,p=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var o,u=t.exports={},l=[],p=!1,d=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new s(e,t)),1!==l.length||p||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],15:[function(e,t,n){(function(t){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){"use strict";function r(e,t,n,r){if(_(r)){if(_(n)){if(!S(e))throw new TypeError;if(!M(t))throw new TypeError;return f(e,t)}if(!S(e))throw new TypeError;if(!P(t))throw new TypeError;return n=w(n),h(e,t,n)}if(!S(e))throw new TypeError;if(!P(t))throw new TypeError;if(_(n))throw new TypeError;if(!P(r))throw new TypeError;return n=w(n),y(e,t,n,r)}function i(e,t){function n(n,r){if(_(r)){if(!M(n))throw new TypeError;b(e,t,n,void 0)}else{if(!P(n))throw new TypeError;r=w(r),b(e,t,n,r)}}return n}function s(e,t,n,r){if(!P(n))throw new TypeError;return _(r)||(r=w(r)),b(e,t,n,r)}function a(e,t,n){if(!P(t))throw new TypeError;return _(n)||(n=w(n)),x(e,t,n)}function o(e,t,n){if(!P(t))throw new TypeError;return _(n)||(n=w(n)),g(e,t,n)}function u(e,t,n){if(!P(t))throw new TypeError;return _(n)||(n=w(n)),v(e,t,n)}function l(e,t,n){if(!P(t))throw new TypeError;return _(n)||(n=w(n)),E(e,t,n)}/**
      * Gets the metadata keys defined on the target object or its prototype chain.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns An array of unique metadata keys.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getMetadataKeys(C);
      *
      *     // property (on constructor)
      *     result = Reflect.getMetadataKeys(C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getMetadataKeys(C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getMetadataKeys(C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getMetadataKeys(C.prototype, "method");
      *
      */
function p(e,t){if(!P(e))throw new TypeError;return _(t)||(t=w(t)),T(e,t)}/**
      * Gets the unique metadata keys defined on the target object.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns An array of unique metadata keys.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getOwnMetadataKeys(C);
      *
      *     // property (on constructor)
      *     result = Reflect.getOwnMetadataKeys(C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getOwnMetadataKeys(C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getOwnMetadataKeys(C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getOwnMetadataKeys(C.prototype, "method");
      *
      */
function d(e,t){if(!P(e))throw new TypeError;return _(t)||(t=w(t)),C(e,t)}function c(e,t,n){if(!P(t))throw new TypeError;_(n)||(n=w(n));var r=m(t,n,!1);if(_(r))return!1;if(!r["delete"](e))return!1;if(r.size>0)return!0;var i=$.get(t);return i["delete"](n),i.size>0?!0:($["delete"](t),!0)}function f(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!_(i)){if(!M(i))throw new TypeError;t=i}}return t}function y(e,t,n,r){for(var i=e.length-1;i>=0;--i){var s=e[i],a=s(t,n,r);if(!_(a)){if(!P(a))throw new TypeError;r=a}}return r}function h(e,t,n){for(var r=e.length-1;r>=0;--r){var i=e[r];i(t,n)}}function m(e,t,n){var r=$.get(e);if(!r){if(!n)return;r=new G,$.set(e,r)}var i=r.get(t);if(!i){if(!n)return;i=new G,r.set(t,i)}return i}function x(e,t,n){var r=g(e,t,n);if(r)return!0;var i=A(t);return null!==i?x(e,i,n):!1}function g(e,t,n){var r=m(t,n,!1);return void 0===r?!1:Boolean(r.has(e))}function v(e,t,n){var r=g(e,t,n);if(r)return E(e,t,n);var i=A(t);return null!==i?v(e,i,n):void 0}function E(e,t,n){var r=m(t,n,!1);if(void 0!==r)return r.get(e)}function b(e,t,n,r){var i=m(n,r,!0);i.set(e,t)}function T(e,t){var n=C(e,t),r=A(e);if(null===r)return n;var i=T(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var s=new B,a=[],o=0;o<n.length;o++){var u=n[o],l=s.has(u);l||(s.add(u),a.push(u))}for(var p=0;p<i.length;p++){var u=i[p],l=s.has(u);l||(s.add(u),a.push(u))}return a}function C(e,t){var n=m(e,t,!1),r=[];return n&&n.forEach(function(e,t){return r.push(t)}),r}function _(e){return void 0===e}function S(e){return Array.isArray(e)}function P(e){return"object"==typeof e?null!==e:"function"==typeof e}function M(e){return"function"==typeof e}function j(e){return"symbol"==typeof e}function w(e){return j(e)?e:String(e)}function A(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===V)return t;if(t!==V)return t;var n=e.prototype,r=Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i?t:i===e?t:i}function O(){function e(){this._keys=[],this._values=[],this._cache=t}var t={};return e.prototype={get size(){return this._keys.length},has:function(e){return e===this._cache?!0:this._find(e)>=0?(this._cache=e,!0):!1},get:function(e){var t=this._find(e);return t>=0?(this._cache=e,this._values[t]):void 0},set:function(e,t){return this["delete"](e),this._keys.push(e),this._values.push(t),this._cache=e,this},"delete":function(e){var n=this._find(e);return n>=0?(this._keys.splice(n,1),this._values.splice(n,1),this._cache=t,!0):!1},clear:function(){this._keys.length=0,this._values.length=0,this._cache=t},forEach:function(e,t){for(var n=this.size,r=0;n>r;++r){var i=this._keys[r],s=this._values[r];this._cache=i,e.call(this,s,i,this)}},_find:function(e){for(var t=this._keys,n=t.length,r=0;n>r;++r)if(t[r]===e)return r;return-1}},e}function N(){function e(){this._map=new G}return e.prototype={get size(){return this._map.length},has:function(e){return this._map.has(e)},add:function(e){return this._map.set(e,e),this},"delete":function(e){return this._map["delete"](e)},clear:function(){this._map.clear()},forEach:function(e,t){this._map.forEach(e,t)}},e}function k(){function n(){this._key=a()}function r(e,t){for(var n=0;t>n;++n)e[n]=255*Math.random()|0}function i(e){if(p){var t=p.randomBytes(e);return t}if("function"==typeof Uint8Array){var t=new Uint8Array(e);return"undefined"!=typeof crypto?crypto.getRandomValues(t):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(t):r(t,e),t}var t=new Array(e);return r(t,e),t}function s(){var e=i(u);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",n=0;u>n;++n){var r=e[n];(4===n||6===n||8===n)&&(t+="-"),16>r&&(t+="0"),t+=r.toString(16).toLowerCase()}return t}function a(){var e;do e="@@WeakMap@@"+s();while(d.call(c,e));return c[e]=!0,e}function o(e,t){if(!d.call(e,f)){if(!t)return;Object.defineProperty(e,f,{value:Object.create(null)})}return e[f]}var u=16,l="undefined"!=typeof t&&"[object process]"===Object.prototype.toString.call(t.process),p=l&&e("crypto"),d=Object.prototype.hasOwnProperty,c={},f=a();return n.prototype={has:function(e){var t=o(e,!1);return t?this._key in t:!1},get:function(e){var t=o(e,!1);return t?t[this._key]:void 0},set:function(e,t){var n=o(e,!0);return n[this._key]=t,this},"delete":function(e){var t=o(e,!1);return t&&this._key in t?delete t[this._key]:!1},clear:function(){this._key=a()}},n}var V=Object.getPrototypeOf(Function),G="function"==typeof Map?Map:O(),B="function"==typeof Set?Set:N(),D="function"==typeof WeakMap?WeakMap:k(),$=new D;n.decorate=r,n.metadata=i,n.defineMetadata=s,n.hasMetadata=a,n.hasOwnMetadata=o,n.getMetadata=u,n.getOwnMetadata=l,n.getMetadataKeys=p,n.getOwnMetadataKeys=d,n.deleteMetadata=c,function(e){if("undefined"!=typeof e.Reflect){if(e.Reflect!==n)for(var t in n)e.Reflect[t]=n[t]}else e.Reflect=n}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:"undefined"!=typeof t?t:Function("return this;")())}(n||(n={}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:2}],16:[function(e,t,n){t.exports={name:"jaydata",description:"Cross-platform HTML5 data-management, JavaScript Language Query (JSLQ) support for OData, SQLite, WebSQL, IndexedDB, YQL and Facebook (packaged for Node.JS)",keywords:["HTML5 data management","JavaScript","JavaScript Language Query","JSLQ","OData","SQLite","WebSQL","IndexedDB","YQL","Facebook","cross-platform","iPhone","Android"],version:"1.5.1",homepage:"http://jaydata.org",author:{name:"JayData",url:"http://jaydata.org"},dependencies:{acorn:"^3.0.2",atob:"^2.0.0",btoa:"^1.1.2",dot:"^1.0.3","jaydata-dynamic-metadata":"^0.0.5","jaydata-error-handler":"^0.0.1","jaydata-odatajs":"^4.0.0","jaydata-promise-handler":"^0.0.1","odata-metadata":"^0.1.0",xmldom:"^0.1.19"},contributors:[{name:"Dániel József"},{name:"Hajnalka Battancs"},{name:"János Roden"},{name:"László Horváth"},{name:"Péter Zentai"},{name:"Péter Nochta"},{name:"Róbert Bónay"},{name:"Szabolcs Czinege"},{name:"Viktor Borza"},{name:"Viktor Lázár"},{name:"Zoltán Gyebrovszki"}],repository:{type:"git",url:"git://github.com/jaydata/jaydata.git"},engines:{node:">=0.6.0"},license:"(MIT OR GPL-2.0)",devDependencies:{babel:"^6.1.18","babel-eslint":"^5.0.0-beta4","babel-plugin-add-module-exports":"^0.1.1","babel-preset-es2015":"^6.1.18","babel-register":"^6.2.0",babelify:"^7.2.0",browserify:"^12.0.1","browserify-derequire":"^0.9.4","browserify-shim":"^3.8.11",chai:"^3.4.1",del:"^2.2.0","google-closure-compiler":"^20151015.0.0",gulp:"^3.9.0","gulp-babel":"^6.1.1","gulp-browserify":"^0.5.1","gulp-closure-compiler":"^0.3.1","gulp-concat":"^2.6.0","gulp-derequire":"^2.1.0","gulp-eslint":"^1.1.1","gulp-footer":"^1.0.5","gulp-header":"^1.7.1","gulp-nightwatch":"^0.2.6","gulp-nuget-pack":"0.0.6","gulp-rename":"^1.2.2","gulp-replace":"^0.5.4","gulp-sourcemaps":"^1.6.0","gulp-uglify":"^1.5.1","gulp-vinyl-zip":"^1.1.2","gulp-webserver":"^0.9.1",istanbul:"^0.4.1","jaguarjs-jsdoc":"0.0.1",jsdoc:"^3.4.0",minimist:"^1.2.0",nightwatch:"^0.8.8",npm:"^3.5.2","selenium-standalone":"^4.7.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",yargs:"^3.31.0"},"browserify-shim":{atob:"global:atob",btoa:"global:btoa",jquery:"global:jQuery","jaydata-odatajs":"global:odatajs",angular:"global:angular",Handlebars:"global:Handlebars",kendo:"global:kendo",ko:"global:ko",q:"global:Q",Ext:"global:Ext"},scripts:{test:"mocha --compilers js:babel-register"}}},{}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i),a=e("jaydata-dynamic-metadata");s["default"].DynamicMetadata=a.DynamicMetadata;var o=new a.DynamicMetadata(s["default"]);s["default"].service=o.service.bind(o),s["default"].initService=o.initService.bind(o),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32,"jaydata-dynamic-metadata":5}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(e,t){f[e]=f[e]||[],f[e].push(t)}var n=e;n&&n.addChildContainer(this);var r={},i=[],a=[];this.classNames=r,this.consolidatedClassNames=i,this.classTypes=a;var p=[];this.mappedTo=p;var d=this;this.holder=null;var c=function(e,t){var n=d.resolveType(e),r=Object.create(n.prototype);return n.apply(r,t),r},f={};this.pendingResolutions=f,this.addChildContainer=function(e){},this.createInstance=function(e,t){return c(e,t)},this.mapType=function(e,t){u.Guard.requireValue("aliasType",e),u.Guard.requireValue("realType",t);var n=this.getType(e),r=this.getType(t),i=a.indexOf(n),s=a.indexOf(r);p[i]=s},this.isPrimitiveType=function(e){var t=this.resolveType(e);switch(!0){case t===Number:case t===String:case t===Date:case t===Boolean:case t===Array:case t===Object:case t===o["default"].Number:case t===o["default"].Integer:case t===o["default"].Date:case t===o["default"].String:case t===o["default"].Boolean:case t===o["default"].Array:case t===o["default"].Object:case t===o["default"].Guid:case t===o["default"].Byte:case t===o["default"].SByte:case t===o["default"].Decimal:case t===o["default"].Float:case t===o["default"].Int16:case t===o["default"].Int32:case t===o["default"].Int64:case t===o["default"].DateTimeOffset:case t===o["default"].Time:case t===o["default"].Day:case t===o["default"].Duration:case t===o["default"].SimpleBase:case t===o["default"].Geospatial:case t===o["default"].GeographyBase:case t===o["default"].GeographyPoint:case t===o["default"].GeographyLineString:case t===o["default"].GeographyPolygon:case t===o["default"].GeographyMultiPoint:case t===o["default"].GeographyMultiLineString:case t===o["default"].GeographyMultiPolygon:case t===o["default"].GeographyCollection:case t===o["default"].GeometryBase:case t===o["default"].GeometryPoint:case t===o["default"].GeometryLineString:case t===o["default"].GeometryPolygon:case t===o["default"].GeometryMultiPoint:case t===o["default"].GeometryMultiLineString:case t===o["default"].GeometryMultiPolygon:case t===o["default"].GeometryCollection:return!0;default:return!1}},this.resolveName=function(e){var t=this.resolveType(e),n=a.indexOf(t);return i[n]},this.resolveType=function(e,t){var n=e;n=this.getType(n,t?!0:!1,t);var r=a.indexOf(n);return"undefined"==typeof p[r]?n:a[p[r]]},this.getType=function(e,i,s){if(u.Guard.requireValue("typeOrName",e),"function"==typeof e)return e;if(!(e in r)){if(n){var o=n.getType(e,!0);if(o)return o}if(s)return void t(e,s);if(i)return;u.Guard.raise(new u.Exception("Unable to resolve type:"+e))}var l=a[r[e]];return s&&s(l),l},this.getName=function(e){var t=this.getType(e),n=a.indexOf(t);return-1==n&&u.Guard.raise("unknown type to request name for: "+e),i[n]},this.getTypes=function(){for(var e=Object.keys(r),t=[],n=0;n<e.length;n++){var i=e[n];t.push({name:i,type:a[r[i]],toString:function(){return this.name}})}return t},this.getTypeName=function(e){switch("undefined"==typeof e?"undefined":s(e)){case"object":if(null==e)return"$data.Object";if(e instanceof Array)return"$data.Array";if(e.getType)return e.getType().fullName;if(e instanceof Date)return"$data.Date";if(e instanceof o["default"].Guid)return"$data.Guid";if(e instanceof o["default"].DateTimeOffset)return"$data.DateTimeOffset";if(e instanceof o["default"].GeographyPoint)return"$data.GeographyPoint";if(e instanceof o["default"].GeographyLineString)return"$data.GeographyLineString";if(e instanceof o["default"].GeographyPolygon)return"$data.GeographyPolygon";if(e instanceof o["default"].GeographyMultiPoint)return"$data.GeographyMultiPoint";if(e instanceof o["default"].GeographyMultiLineString)return"$data.GeographyMultiLineString";if(e instanceof o["default"].GeographyMultiPolygon)return"$data.GeographyMultiPolygon";if(e instanceof o["default"].GeographyCollection)return"$data.GeographyCollection";if(e instanceof o["default"].GeographyBase)return"$data.GeographyBase";if(e instanceof o["default"].GeometryPoint)return"$data.GeometryPoint";if(e instanceof o["default"].GeometryLineString)return"$data.GeometryLineString";if(e instanceof o["default"].GeometryPolygon)return"$data.GeometryPolygon";if(e instanceof o["default"].GeometryMultiPoint)return"$data.GeometryMultiPoint";if(e instanceof o["default"].GeometryMultiLineString)return"$data.GeometryMultiLineString";if(e instanceof o["default"].GeometryMultiPolygon)return"$data.GeometryMultiPolygon";if(e instanceof o["default"].GeometryCollection)return"$data.GeometryCollection";if(e instanceof o["default"].GeometryBase)return"$data.GeometryBase";if(e instanceof o["default"].Geospatial)return"$data.Geospatial";if(e instanceof o["default"].SimpleBase)return"$data.SimpleBase";if("function"==typeof e.toHexString)return"$data.ObjectID";default:return"undefined"==typeof e?"undefined":s(e)}},this.isTypeRegistered=function(e){return"function"==typeof e?a.indexOf(e)>-1:e in r},this.unregisterType=function(e){u.Guard.raise("Unimplemented")},this.getDefault=function(e){var t=this.resolveType(e);switch(t){case o["default"].Number:return 0;case o["default"].Float:return 0;case o["default"].Decimal:return"0.0";case o["default"].Integer:return 0;case o["default"].Int16:return 0;case o["default"].Int32:return 0;case o["default"].Int64:return"0";case o["default"].Byte:return 0;case o["default"].SByte:return 0;case o["default"].String:return null;case o["default"].Boolean:return!1;default:return null}},this.getIndex=function(e){var t=this.resolveType(e);return a.indexOf(t)},this.resolveByIndex=function(e){return a[e]},this.registerType=function(e,t,s){if(e){"string"==typeof t&&(t=d.resolveType(t));var o=[];if("string"==typeof e){var u=[];u.push(e),o=u}else o=e;for(var l=0;l<o.length;l++){var p=o[l].split("."),y={};y.shortName=p[p.length-1],y.fullName=o[l],o[l]=y}var h=function(){return c(t,arguments)};"undefined"!=typeof intellisense&&intellisense.annotate(h,t);for(var l=0,m=o.length;m>l;l++){var y=o[l];"create"+y.shortName in d||("function"==typeof s?d["create"+y.shortName]=s:d["create"+y.shortName]=h);var x=a.indexOf(t);if(-1==x){x=a.push(t)-1;y.fullName;i[x]=y.fullName}r[y.fullName]=x;var g=f[y.fullName]||[];g.length>0&&(g.forEach(function(e){e(t)}),f[y.fullName]=[])}if(n&&n.registerType.apply(n,arguments),!t.name)try{t.name=o[0].shortName}catch(v){}}};var y={from:{},to:{}};this.converters=y,this.convertTo=function(e,t,n,r){if(u.Guard.requireValue("typeOrName",t),u.Guard.isNullOrUndefined(e))return e;var i,s=l.getTypeName(e),a=l.resolveType(s),s=l.resolveName(a),p=l.resolveType(t),d=l.resolveName(p);try{if("function"==typeof p["from"+s])i=p["from"+s].apply(p,arguments);else if("function"==typeof a["to"+d])i=a["to"+d].apply(a,arguments);else if(y.to[d]&&y.to[d][s])i=y.to[d][s].apply(y,arguments);else if(y.from[s]&&y.from[s][d])i=y.from[s][d].apply(y,arguments);else if(d===s||e instanceof p)i=e;else{if(!y.to[d]||!y.to[d]["default"])throw"converter not found";i=y.to[d]["default"].apply(y,arguments)}}catch(c){u.Guard.raise(new u.Exception("Value '"+s+"' not convertable to '"+d+"'","TypeError",e))}if(p===o["default"].Array&&n&&Array.isArray(i))for(var f=0;f<i.length;f++)i[f]=this.convertTo.call(this,i[f],n,void 0,r);return i},this.registerConverter=function(e,t,n,r){var i=l.resolveName(e);if(l.isTypeRegistered(t)){y.to[i]=y.to[i]||{},y.from[i]=y.from[i]||{};var s=l.resolveName(t);n&&(y.to[i][s]=n),r&&(y.from[i][s]=r)}else y.to[i]?y.to[i]=o["default"].typeSystem.extend(y.to[i],t):y.to[i]=t,y.from[i]?y.from[i]=o["default"].typeSystem.extend(y.from[i],n):y.from[i]=n},this.createOrGetNamespace=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t[r]){var i={};i.__namespace=!0,t[r]=i}t=t[r]}return t}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.ContainerInstance=void 0,n.ContainerCtor=i;var a=e("./initializeJayData.js"),o=r(a),u=e("jaydata-error-handler"),l=(e("./Extensions.js"),new i);n.ContainerInstance=l},{"./Extensions.js":19,"./initializeJayData.js":33,"jaydata-error-handler":7}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.StringFunctions={startsWith:function(){var e,t;if(2==arguments.length)e=arguments[0],t=arguments[1];else if(1==arguments.length&&"string"==typeof this)e=this,t=arguments[0];else{if(!(this instanceof String))return!1;e=this.valueOf(),t=arguments[0]}return"string"!=typeof e?!1:0===e.indexOf(t)},endsWith:function(){var e,t;if(2==arguments.length)e=arguments[0],t=arguments[1];else if(1==arguments.length&&"string"==typeof this)e=this,t=arguments[0];else{if(!(this instanceof String))return!1;e=this.valueOf(),t=arguments[0]}return"string"!=typeof e?!1:e.slice(-t.length)===t},contains:function(){var e,t;if(2==arguments.length)e=arguments[0],t=arguments[1];else if(1==arguments.length&&"string"==typeof this)e=this,t=arguments[0];else{if(!(this instanceof String))return!1;e=this.valueOf(),t=arguments[0]}return"string"!=typeof e?!1:e.indexOf(t)>=0}}},{}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);s["default"].Class.define("$data.Logger",s["default"].TraceBase,null,{log:function(){Array.prototype.unshift.call(arguments,this.getDateFormat()),console.log.apply(console,arguments)},warn:function(){Array.prototype.unshift.call(arguments,this.getDateFormat()),console.warn.apply(console,arguments)},error:function(){Array.prototype.unshift.call(arguments,this.getDateFormat()),console.error.apply(console,arguments)},getDateFormat:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds()}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);s["default"].Class.define("$data.TraceBase",null,null,{log:function(){},warn:function(){},error:function(){}}),s["default"].Trace=new s["default"].TraceBase,n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],22:[function(e,t,n){(function(t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.MemberDefinition=n.Container=n.$C=void 0;var a=e("./initializeJayData.js"),o=i(a),u=e("jaydata-error-handler"),l=e("./Extensions.js"),p=e("./Container.js");o["default"].StringFunctions=l.StringFunctions;var d=null;o["default"].setModelContainer=function(e){d=e},o["default"].defaults=o["default"].defaults||{},o["default"].defaults.openTypeDefaultPropertyName="dynamicProperties",o["default"].defaults.openTypeDefaultType="$data.Object",o["default"].defaults.openTypeDefaultValue=function(){return{}},o["default"].__global=t.browser?window:r,o["default"].setGlobal=function(e){o["default"].__global=e},function(e){function t(t,n){if(this.kind=i.property,Object.defineProperty(this,"definedBy",{value:n,enumerable:!1,configurable:!1,writable:!1}),t){if("function"==typeof t||"function"==typeof t.asFunction)this.method=t,this.kind=i.method;else if(this.enumerable=!0,this.configurable=!0,"number"==typeof t)this.value=t,this.type=e.Number,this.dataType=e.Number;else if("string"==typeof t)this.value=t,this.dataType=e.String,this.type=e.String;else for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);void 0!==this.type?this.dataType=this.dataType||this.type:this.type=this.dataType,this.originalType=this.type,void 0!==this.elementType&&(this.originalElementType=this.elementType)}}function n(){}function r(){this.classNames={}}function i(){}t.prototype.createPropertyDescriptor=function(e,t){var n=this,r={enumerable:void 0==this.enumerable?!0:this.enumerable,configurable:void 0==this.configurable?!0:this.configurable};return this.set&&this.get?(r.set=this.set,r.get=this.get):"value"in this||t?(r.value=t||this.value,r.writable=!0):(r.set=function(e){this.storeProperty(n,e)},r.get=function(){return this.retrieveProperty(n)}),r},t.prototype.createStorePropertyDescriptor=function(e){var t=this;return{enumerable:!1,writable:!0,configurable:t.configurable,value:e}},t.prototype.createGetMethod=function(){var e=this;return{enumerable:!1,writable:!1,configurable:!1,value:function(t,n){return this.getProperty(e,t,n)}}},t.prototype.createSetMethod=function(){var e=this;return{enumerable:!1,writable:!1,configurable:!1,value:function(t,n,r){return this.setProperty(e,t,n,r)}}},t.translateDefinition=function(n,r,i){function s(t){t&&t.isAssignableTo&&e.Entity&&t.isAssignableTo(e.Entity)&&i.childResolverThunks.push(function(){t.resolveForwardDeclarations&&t.resolveForwardDeclarations()})}var a,o=i;n.type&&c.isTypeRegistered(n.type)&&(o=c.resolveType(n.type),"function"==typeof o.translateDefinition?(a=o.translateDefinition.apply(o,arguments),a.name=a.name||r):o=i),a instanceof t||(a=new t(a||n,o),a.name=r),i.resolverThunks=i.resolverThunks||[],i.childResolverThunks=i.childResolverThunks||[];var u=a.type,l=a.elementType;return s(u),s(l),"string"==typeof u&&("@"===u[0]?(a.type=u.substr(1),a.dataType=u.substr(1)):i.resolverThunks.push(function(){var e=i.container.resolveType(u);s(e),a.type=e,a.dataType=e})),l&&"string"==typeof l&&("@"===l[0]?a.elementType=l.substr(1):i.resolverThunks.push(function(){var e=i.container.resolveType(l);s(e),a.elementType=e})),i.resolveForwardDeclarations=function(){i.resolveForwardDeclarations=function(){},e.Trace.log("resolving: "+i.fullName),this.resolverThunks.forEach(function(e){e()}),this.childResolverThunks.forEach(function(e){e()})},a},t.prototype.toJSON=function(){var e={};for(var t in this)if("defineBy"!==t&&"storageModel"!==t)if("type"!==t&&"dataType"!==t||!this[t]||"function"!=typeof this[t])e[t]=this[t];else try{e[t]=c.resolveName(this[t])}catch(n){e[t]=this[t]}return e},e.MemberDefinition=t;var s="$";n.prototype={clearCache:function(){this.arrayCache=void 0,this.pubMapPropsCache=void 0,this.keyPropsCache=void 0,this.propByTypeCache=void 0,this.pubMapMethodsCache=void 0,this.pubMapPropNamesCache=void 0},asArray:function(){if(!this.arrayCache){this.arrayCache=[];for(var e in this)0===e.indexOf(s)&&this.arrayCache.push(this[e])}return this.arrayCache},getPublicMappedProperties:function(){if(!this.pubMapPropsCache){this.pubMapPropsCache=[];for(var e in this)0===e.indexOf(s)&&"property"==this[e].kind&&!this[e].notMapped&&this[e].enumerable&&this.pubMapPropsCache.push(this[e])}return this.pubMapPropsCache},getPublicMappedPropertyNames:function(){if(!this.pubMapPropNamesCache){this.pubMapPropNamesCache=[];for(var e in this)0===e.indexOf(s)&&"property"==this[e].kind&&!this[e].notMapped&&this[e].enumerable&&this.pubMapPropNamesCache.push(this[e].name)}return this.pubMapPropNamesCache},getKeyProperties:function(){if(!this.keyPropsCache){this.keyPropsCache=[];for(var e in this)0===e.indexOf(s)&&"property"==this[e].kind&&this[e].key&&this.keyPropsCache.push(this[e])}return this.keyPropsCache},getPublicMappedMethods:function(){if(!this.pubMapMethodsCache){this.pubMapMethodsCache=[];for(var e in this)0===e.indexOf(s)&&"method"==this[e].kind&&this[e].method&&this.pubMapMethodsCache.push(this[e])}return this.pubMapMethodsCache},getPropertyByType:function(e){if(!this.propByTypeCache){this.propByTypeCache=[];for(var t in this)0===t.indexOf(s)&&this[t].dataType==e&&this.propByTypeCache.push(this[t])}return this.propByTypeCache},getMember:function(e){return this[s+e]},setMember:function(e){this[s+e.name]=e}},n.prototype.constructor=n,e.MemberDefinitionCollection=n,i.__enum=!0,i.method="method",i.property="property",i.navProperty="navProperty",i.complexProperty="complexProperty",i.field="field",e.MemberTypes=i,r.prototype={define:function(e,t,n,r,i){return this.defineEx(e,[{type:t}],n,r,i)},defineEx:function(t,n,r,i,s){r=r||e.Container,0==n.length?n.push({type:e.Base}):n.length>0&&!n[0].type&&(n[0].type=e.Base);for(var a=0,o=n.length;o>a;a++)"function"==typeof n[a]&&(n[a]={type:n[a]});var u=(i?i.constructor:void 0,t.split(".")),l=u.splice(u.length-1,1)[0];e.models=e.models||{};var p=r===e.Container?e.models:r;p=e.Container.createOrGetNamespace(u,p);var c=null;if(c=this.classFunctionBuilder(l,n,s,i),c.fullName=t,c.namespace=u.join("."),c.container=r,c.container.registerType(t,c),this.buildType(c,n,i,s),"undefined"!=typeof intellisense&&i&&i.constructor&&intellisense.annotate(c,i.constructor),p[l]=this.classNames[t]=c,"$data"==u[0]){var f=[].concat(u);f.shift();var y=e.Container.createOrGetNamespace(f,e);y[l]=c}if(d&&r==e.Container){var h=e.Container.createOrGetNamespace(u,d);h[l]=c}for(var m=c.baseTypes.length,a=0;m>a;a++){var x=c.baseTypes[a];"inheritedTypeProcessor"in x&&x.inheritedTypeProcessor(c)}return c},classFunctionBuilder:function(t,n,r,i){var s=this.bodyBuilder(n,r,i);return new Function("base","classDefinition","instanceDefinition","name","$data","return function "+t+" (){ "+s+" \n}; ")(n,r,i,t,e)},bodyBuilder:function(t,n,r){for(var i="",s="",a="",o=0,u=t.length;u>o;o++){var l=t[o],p=o;0==p?l&&l.type&&l.type!==e.Base&&l.type.fullName&&(s+="    var baseArguments = $data.typeSystem.createCtorParams(arguments, base["+p+"].params, this); \n",s+="    $data.models."+l.type.fullName+".apply(this, baseArguments); \n"):l&&l.type&&l.propagateTo?(a+="    "+(a?"":"var ")+"propagationArguments = $data.typeSystem.createCtorParams(arguments, base["+p+"].params, this); \n",a+='    this["'+l.propagateTo+'"] =  Object.create($data.models.'+l.type.fullName+".prototype); \n    $data.models."+l.type.fullName+'.apply(this["'+l.propagateTo+'"], propagationArguments); \n'):l&&l.type&&l.type.memberDefinitions&&l.type.memberDefinitions.$constructor&&!l.propagateTo&&(i+="    $data.models."+l.type.fullName+".memberDefinitions.$constructor.method.apply(this); \n")}return r&&r.constructor!=Object&&(s+="    instanceDefinition.constructor.apply(this, arguments); \n"),"\n    //mixins \n"+i+"\n    //construction \n"+s+"\n    //propagations \n"+a},buildType:function(t,r,i,s){var a=r[0].type;if(t.inheritsFrom=a,a){t.prototype=Object.create(a.prototype),t.memberDefinitions=Object.create(a.memberDefinitions||new n),t.memberDefinitions.clearCache();var o=a.staticDefinitions;if(o&&(o=o.asArray()))for(var l=0;l<o.length;l++)this.buildMember(t,o[l],void 0,"staticDefinitions");t.baseTypes=a.baseTypes?[].concat(a.baseTypes):[];for(var l=0;l<r.length;l++)t.baseTypes.push(r[l].type);t.isAssignableTo||Object.defineProperty(t,"isAssignableTo",{value:function(e){return this===e||this.baseTypes.indexOf(e)>=0},writable:!1,enumerable:!1,configurable:!1})}var p=t.staticDefinitions&&t.staticDefinitions.getMember("openType");if(s&&(p&&delete s.openType,this.buildStaticMembers(t,s),s.constructor&&(t.classConstructor=s.constructor)),i){if(!p&&s&&("string"==typeof t.openType||t.openType===!0)&&t.isAssignableTo(e.Entity)){var d=e.defaults.openTypeDefaultPropertyName,f=c.resolveType(e.defaults.openTypeDefaultType),y=e.defaults.openTypeDefaultValue;"string"==typeof t.openType&&(d=t.openType);var h=t.getMemberDefinition(d);if(h&&c.resolveType(h.type||h.dataType)!==f&&u.Guard.raise(new u.Exception("Type Error","OpenType default type missmatch")),!h&&i[d]){var m=c.resolveType(i[d].type||i[d].dataType);m!==f&&u.Guard.raise(new u.Exception("Type Error","OpenType default type missmatch"))}if(!h&&!i[d]){var x="undefined"!=typeof y?y:function(){return{}};i[d]={type:f,defaultValue:x}}}this.buildInstanceMembers(t,i)}var g=[].concat(r);g.shift(),Object.keys(g).length>0&&this.buildInstanceMixins(t,g),t.__class=!0,t.prototype.constructor=t,Object.defineProperty(t.prototype,"getType",{value:function(){return t},writable:!1,enumerable:!1,configurable:!1})},addMethod:function(e,t,n,r){r&&"undefined"==typeof intellisense?e[t]=function(){return n.apply(this[r],arguments)}:e[t]=n},addProperty:function(e,t,n,r){if(r){if(n.configurable=!0,n.get){var i=n.get;n.get=function(){return this[r]||u.Guard.raise(new u.Exception("not inicialized")),i.apply(this[r],arguments)}}if(n.set){var s=n.set;n.set=function(){this[r]||u.Guard.raise(new u.Exception("not inicialized")),s.apply(this[r],arguments)}}}Object.defineProperty(e,t,n)},addField:function(e,t,n){u.Guard.raise("not implemented")},buildMethod:function(e,t,n){var r=t.classMember?e:e.prototype;this.addMethod(r,t.name,t.method,n)},buildProperty:function(e,t,n){var r=t.classMember?e:e.prototype,i=t.createPropertyDescriptor(e);if(this.addProperty(r,t.name,i,n),!t.classMember&&1==e.__setPropertyfunctions&&t.withoutGetSetMethod!==!0&&!("get_"+t.name in r||"set_"+t.name in r)){var s=t.createGetMethod();this.addProperty(r,"get_"+t.name,s,n);var a=t.createSetMethod();this.addProperty(r,"set_"+t.name,a,n)}},buildMember:function(e,t,r,s){switch(s=s||"memberDefinitions",e[s]=e[s]||new n,e[s].setMember(t),t.kind){case i.method:this.buildMethod(e,t,r);break;case i.navProperty:case i.complexProperty:case i.property:this.buildProperty(e,t,r);break;default:u.Guard.raise("Unknown member type: "+t.kind+","+t.name)}},buildStaticMembers:function(e,n){var r=this;for(var i in n)if(n.hasOwnProperty(i)){var s=t.translateDefinition(n[i],i,e);s.classMember=!0,r.buildMember(e,s,void 0,"staticDefinitions")}},buildInstanceMembers:function(e,n){var r=this;for(var i in n)if(n.hasOwnProperty(i)){var s=t.translateDefinition(n[i],i,e);r.buildMember(e,s,void 0,"memberDefinitions")}},copyMembers:function(e,t){function n(e){"undefined"!=typeof intellisense&&intellisense.logMessage(e)}Object.keys(e.prototype).forEach(function(r,i,s){"constructor"!==r&&"toString"!==r&&(n("copying item:"+r),t.prototype[r]=e[r])})},buildInstanceMixins:function(e,t){e.mixins=e.mixins||[],e.propagations=e.propagations||[];for(var n=0;n<t.length;n++){var r=t[n];r.propagateTo?(this.buildInstancePropagation(e,r),e.propagations.push(r),e.propagations[r.type.name]=!0):(this.buildInstanceMixin(e,r),e.mixins.push(r),e.mixins[r.type.name]=!0)}},buildInstanceMixin:function(e,t){for(var n=t.type.memberDefinitions.asArray(),r=0,i=n.length;i>r;r++){var s=n[r].name;"constructor"===s||e.memberDefinitions.getMember(s)||this.buildMember(e,n[r])}if(t.type.staticDefinitions)for(var a=t.type.staticDefinitions.asArray(),r=0,i=a.length;i>r;r++){var s=a[r].name;"constructor"===s||e.memberDefinitions.getMember(s)||this.buildMember(e,a[r],void 0,"staticDefinitions")}},buildInstancePropagation:function(e,t){for(var n=t.type.memberDefinitions.asArray(),r=0,i=n.length;i>r;r++){var s=n[r].name;"constructor"===s||e.memberDefinitions.getMember(s)||this.buildMember(e,n[r],t.propagateTo)}}};var a;e.Class=a=new r,e.ContainerClass=p.ContainerCtor;var o;e.Container=o=p.ContainerInstance,e.createContainer=function(){return new p.ContainerCtor(e.Container)};var l=function(e,t){var n="_"+e.name;this[n]?this[n]=t:Object.defineProperty(this,n,e.createStorePropertyDescriptor(t))},f=function(e){var t="_"+e.name;return this[t]};e.Class.define("$data.Base",function(){},null,{storeProperty:l,retrieveProperty:f,setProperty:function(e,t,n){this[e.name]=t,n()},getProperty:function(e,t){t.apply(this,[this[e.name]])}},{create:function(){return c.createInstance(this,arguments)},extend:function(t,n,r,i){return!n||n instanceof p.ContainerCtor||(i=r,r=n,n=void 0),e.Class.define(t,this,n,r,i)},getMemberDefinition:function(e){return this.memberDefinitions.getMember(e)},addProperty:function(n,r,i,s){var a,o=r,u=i;"string"==typeof o&&(a=r,o=i,u=s);var l={notMapped:!0,storeOnObject:!0,get:"function"==typeof o?o:function(){},set:"function"==typeof u?u:function(){},type:a},p=t.translateDefinition(l,n,this);return e.Class.buildMember(this,p),this.memberDefinitions.clearCache(),this},addMember:function(n,r,i){var s=t.translateDefinition(r,n,this);return i?(s.classMember=!0,e.Class.buildMember(this,s,void 0,"staticDefinitions"),
this.staticDefinitions.clearCache()):(e.Class.buildMember(this,s),this.memberDefinitions.clearCache()),this},describeField:function(e,t){var n=this.memberDefinitions.getMember(e);return n?u.Guard.raise(new u.Exception("Field '"+e+"' already defined!","Invalid operation")):this.addMember(e,t),this},storeProperty:l,retrieveProperty:f,"from$data.Object":function(e){return e}}),e.Class.ConstructorParameter=e.Class.define("ConstructorParameter",null,null,{constructor:function(e){this.paramIndex=e},paramIndex:{}})}(o["default"]),o["default"].defaultErrorCallback=function(){arguments.length>0&&arguments[arguments.length-1]&&"function"==typeof arguments[arguments.length-1].reject?((console.error||console.log).call(console,arguments[0]),arguments[arguments.length-1].reject.apply(arguments[arguments.length-1],arguments)):arguments[0]instanceof Error?u.Guard.raise(arguments[0]):u.Guard.raise(new u.Exception("DEFAULT ERROR CALLBACK!","DefaultError",arguments))},o["default"].defaultSuccessCallback=function(){},o["default"].defaultNotifyCallback=function(){},o["default"].typeSystem={__namespace:!0,extend:function(e){"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e&&u.Guard.raise("Target must be object or function");for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!==n&&"undefined"!=typeof n)for(var r in n)e[r]=n[r]}return e},createCallbackSetting:function(e,t){function n(e){function t(){e.apply(n,arguments),e=function(){}}var n=this;return t}var r={success:o["default"].defaultSuccessCallback,error:o["default"].defaultErrorCallback,notify:o["default"].defaultNotifyCallback};void 0!=t&&null!=t&&(r=t);var i;return i=null==e||void 0==e?r:"function"==typeof e?this.extend(r,{success:e}):this.extend(r,e),"function"==typeof i.error&&(i.error=n(i.error)),i},createCtorParams:function(e,t,n){if(t){for(var r=[],i=0,s=t.length;s>i;i++){var a=i;t[a]instanceof o["default"].Class.ConstructorParameter?r.push(e[t[a].paramIndex]):"function"==typeof t[a]?r.push(t[a].apply(n)):r.push(t[a])}return r}return e},writePropertyValues:function(e){e&&e.getType&&e.getType().memberDefinitions&&this.writeProperties(e,e.getType().memberDefinitions.asArray().filter(function(e){return("property"==e.kind||"navProperty"==e.kind||"complexProperty"==e.kind)&&!e.prototypeProperty}))},writeProperties:function(e,t){for(var n={},r=0,i=t.length;i>r;r++){var s=t[r];n[s.name]=s.createPropertyDescriptor(null,s.value)}Object.defineProperties(e,n)},writeProperty:function(e,t,n){var r="string"==typeof t?e.getType().memberDefinitions.getMember(t):t;if(r){var i=r.createPropertyDescriptor(null,n);Object.defineProperty(e,r.name,i)}}},o["default"].debug=function(){(console.debug||console.log).apply(console,arguments)},o["default"].debugWith=function(){var e=arguments;return function(t){(console.debug||console.log).apply(console,e),"undefined"!=typeof Error&&t instanceof Error||"undefined"!=typeof u.Exception&&t instanceof u.Exception?(console.error||console.log).apply(console,arguments):(console.debug||console.log).apply(console,arguments)}},o["default"].fdebug={success:o["default"].debugWith("success"),error:o["default"].debugWith("error")};var c=(n.$C=function(){o["default"].Class.define.apply(o["default"].Class,arguments)},n.Container=o["default"].Container);n.MemberDefinition=o["default"].MemberDefinition;n["default"]=o["default"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Container.js":18,"./Extensions.js":19,"./initializeJayData.js":33,_process:14,"jaydata-error-handler":7}],23:[function(_dereq_,module,exports){(function(global){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_TypeSystem=_dereq_("../TypeSystem.js"),_TypeSystem2=_interopRequireDefault(_TypeSystem),_jaydataErrorHandler=_dereq_("jaydata-error-handler"),_btoa="undefined"!=typeof window?window.btoa:"undefined"!=typeof global?global.btoa:null,_btoa2=_interopRequireDefault(_btoa),bufferOrArray=eval('typeof Buffer !== "undefined" ? Buffer : Uint8Array');_TypeSystem2["default"].Blob=function(){},_TypeSystem2["default"].Blob.createFromHexString=function(e){if(e==e.match(new RegExp("[0-9a-fA-F]+"))[0]){for(var t=new bufferOrArray(e.length>>1),n=0,r=1,i=0;n<e.length;n+=2,r+=2,i++)t[i]=parseInt("0x"+e[n]+e[r],16);return t}_jaydataErrorHandler.Guard.raise(new _jaydataErrorHandler.Exception("TypeError: ","value not convertable to $data.Blob",e))},_TypeSystem2["default"].Blob.toString=function(e){if(!e||!e.length)return null;for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},_TypeSystem2["default"].Blob.toBase64=function(e){return e&&e.length?(0,_btoa2["default"])(_TypeSystem2["default"].Blob.toString(e)):null},_TypeSystem2["default"].Blob.toArray=function(e){if(!e||!e.length)return null;for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t},_TypeSystem2["default"].Blob.toHexString=function(e){if(!e||!e.length)return null;for(var t="",n=0;n<e.length;n++)t+=("00"+e[n].toString(16)).slice(-2);return t.toUpperCase()},_TypeSystem2["default"].Blob.toDataURL=function(e){return e&&e.length?"data:application/octet-stream;base64,"+(0,_btoa2["default"])(_TypeSystem2["default"].Blob.toString(e)):null},_TypeSystem2["default"].Container.registerType(["$data.Blob","blob","JayBlob"],_TypeSystem2["default"].Blob),_TypeSystem2["default"].Container.registerConverter("$data.Blob",{"$data.String":function(e){if(e&&e.length){for(var t=new bufferOrArray(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}return null},"$data.Array":function(e){return new bufferOrArray(e)},"$data.Number":function(e){return new bufferOrArray(_TypeSystem2["default"].packIEEE754(e,11,52).reverse())},"$data.Boolean":function(e){return new bufferOrArray([0|e])},"default":function(e){if("undefined"!=typeof Blob&&e instanceof Blob){var t=new XMLHttpRequest;return t.open("GET",URL.createObjectURL(e),!1),t.send(null),_TypeSystem2["default"].Container.convertTo(t.response,_TypeSystem2["default"].Blob)}if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return new bufferOrArray(new Uint8Array(e));if(e instanceof Uint8Array)return e;if(e.buffer)return new bufferOrArray(e);if("object"==("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Object){var n=[];for(var r in e)n[r]=e[r];if(!n.length)throw 0;return new bufferOrArray(n)}throw 0}},{"$data.String":function(e){return _TypeSystem2["default"].Blob.toString(e)},"$data.Array":function(e){return _TypeSystem2["default"].Blob.toArray(e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../TypeSystem.js":22,"jaydata-error-handler":7}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem.js"),a=r(s);a["default"].Container.registerConverter("$data.Boolean",{"$data.String":function(e){return"true"==e.toLowerCase()?!0:"false"==e.toLowerCase()?!1:!!e},"default":function(e){return!!e}}),a["default"].Container.registerConverter("$data.Integer",{"default":function(e){if(e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY||e===Number.MAX_VALUE||e===Number.MIN_VALUE)return e;var t=parseInt(+e,10);if(isNaN(t))throw 0;return t}}),a["default"].Container.registerConverter("$data.Int32",{"default":function(e){return 0|e}}),a["default"].Container.registerConverter("$data.Number",{"default":function(e){var t=+e;if(isNaN(t))throw 0;return t}}),a["default"].Container.registerConverter("$data.Byte",{"default":function(e){return 255&(0|e)}}),a["default"].Container.registerConverter("$data.Date",{"default":function(e){var t=new Date(e);if(isNaN(t))throw 0;return t}}),a["default"].Container.registerConverter("$data.DateTimeOffset",{"$data.Date":function(e){return e},"default":function(e){var t=new Date(e);if(isNaN(t))throw 0;return t}}),function(){function e(e){var t=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]|[0-9])(:([0-5][0-9]|[0-9])(\.(\d+))?)?$/,n=t.exec(e);if(!n)throw 0;var r="";return r+=("00"+n[1]).slice(-2),r+=":"+("00"+n[2]).slice(-2),r+=n[4]?":"+("00"+n[4]).slice(-2):":00",n[6]&&(r+="."+(n[6]+"000").slice(0,3)),r}a["default"].Container.registerConverter("$data.Time",{"$data.String":e,"$data.Number":function(t){for(var n=[1e3,60,60],r=[0,0,0,0|t],i=0;i<n.length;i++)r[n.length-(i+1)]=r[n.length-i]/n[i]|0,r[n.length-i]-=r[n.length-(i+1)]*n[i];for(var s="",i=0;i<r.length;i++)i<r.length-1?(s+=("00"+r[i]).slice(-2),i<r.length-2&&(s+=":")):s+="."+("000"+r[i]).slice(-3);return e(s)},"$data.Date":function(t){var n=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),r=t.getMilliseconds();return r&&(n+="."+r),e(n)}})}(),function(){function e(e){var t=/^(-?)([0-9]{1,4})-(1[0-2]|0[0-9]|[0-9])-([0-2][0-9]|3[0-1]|[0-9])$/,n=t.exec(e);if(!n)throw 0;var r=n[1];return r+=("0000"+n[2]).slice(-4),r+="-"+("00"+n[3]).slice(-2),r+="-"+("00"+n[4]).slice(-2)}function t(t){var n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();return e(n)}a["default"].Container.registerConverter("$data.Day",{"$data.String":e,"$data.Number":function(e){var n=864e5,r=e*n;if(isNaN(r))throw 0;return t(new Date(r))},"$data.Date":t})}(),function(){function e(e){return e}a["default"].Container.registerConverter("$data.Duration",{"$data.String":e})}(),a["default"].Container.registerConverter("$data.Decimal",{"$data.Boolean":function(e){return e?"1":"0"},"$data.Number":function(e){return e.toString()},"$data.String":function(e){if(!/^\-?([0-9]+(\.[0-9]+)?|Infinity)$/.test(e))throw 0;return e},"$data.Date":function(e){var t=e.valueOf();if(isNaN(t))throw 0;return t.toString()}}),a["default"].packIEEE754=function(e,t,n){var r,i,s,a,o,u,l,p,d=(1<<t-1)-1;for(e!==e?(i=(1<<d)-1,s=Math.pow(2,n-1),r=0):e===1/0||e===-(1/0)?(i=(1<<d)-1,s=0,r=0>e?1:0):0===e?(i=0,s=0,r=1/e===-(1/0)?1:0):(r=0>e,e=Math.abs(e),e>=Math.pow(2,1-d)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),d),i=a+d,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,s=Math.round(e/Math.pow(2,1-d-n)))),u=[],o=n;o;o-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(o=t;o;o-=1)u.push(i%2?1:0),i=Math.floor(i/2);for(u.push(r?1:0),u.reverse(),l=u.join(""),p=[];l.length;)p.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return p},a["default"].unpackIEEE754=function(e,t,n){var r,i,s,a,o,u,l,p,d=[];for(r=e.length;r;r-=1)for(s=e[r-1],i=8;i;i-=1)d.push(s%2?1:0),s>>=1;return d.reverse(),a=d.join(""),o=(1<<t-1)-1,u=parseInt(a.substring(0,1),2)?-1:1,l=parseInt(a.substring(1,1+t),2),p=parseInt(a.substring(1+t),2),l===(1<<t)-1?0!==p?NaN:u*(1/0):l>0?u*Math.pow(2,l-o)*(1+p/Math.pow(2,n)):0!==p?u*Math.pow(2,-(o-1))*(p/Math.pow(2,n)):0>u?-0:0},a["default"].IEEE754=function(e,t,n){return a["default"].unpackIEEE754(a["default"].packIEEE754(e,t,n),t,n)},a["default"].Container.registerConverter("$data.Float",{"default":function(e){var t=+e;if(isNaN(t))throw 0;return a["default"].IEEE754(t,8,23)}}),a["default"].Container.registerConverter("$data.Int16",{"default":function(e){var t=65535&(0|e);return t>=32768?t-65536:t}}),a["default"].Container.registerConverter("$data.Int64",{"$data.Boolean":function(e){return e?"1":"0"},"$data.Number":function(e){var t=e.toString();if(t.indexOf(".")>0)return t.split(".")[0];if(0==t.indexOf("."))throw 0;return t},"$data.String":function(e){if(!/^\-?([0-9]+(\.[0-9]+)?|Infinity)$/.test(e))throw 0;if(e.indexOf(".")>0)return e.split(".")[0];if(0==e.indexOf("."))throw 0;return e},"$data.Date":function(e){var t=e.valueOf();if(isNaN(t))throw 0;return t.toString()}}),a["default"].Container.registerConverter("$data.SByte",{"default":function(e){var t=255&(0|e);return t>=128?t-256:t}}),a["default"].Container.registerConverter("$data.String",{"$data.Date":function(e){return e.toISOString()},"$data.ObjectID":function(e){return btoa(e.toString())},"default":function(e){return"object"===("undefined"==typeof e?"undefined":i(e))?JSON.stringify(e):e.toString()}}),a["default"].Container.registerConverter("$data.Object",{"$data.String":function(e){return JSON.parse(e)},"$data.Function":function(){throw 0}}),a["default"].Container.registerConverter("$data.Array",{"$data.String":function(e){var t=JSON.parse(e);if(!Array.isArray(t))throw 0;return t}}),a["default"].Container.registerConverter("$data.ObjectID",{"$data.ObjectID":function(e){try{return btoa(e.toString())}catch(t){return e}},"$data.String":function(e){return e}}),a["default"].Container.proxyConverter=function(e){return e},a["default"].Container.defaultConverter=function(e){return function(t){return a["default"].Container.convertTo(t,e)}},n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],25:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);!function(e){function t(){}function n(){}function r(){}function i(){}function s(){}function a(){}function o(){}function u(){}function l(){}function p(){}function d(){}function c(){}function f(){}function y(){}function h(){}function m(){}function x(){}function g(){}function v(){}function E(){}function b(){}function T(){}function C(){}function _(){}function S(){}function P(){}function M(){}function j(){}function w(){}function A(){}function O(){}function N(){}function k(){}e.Container.registerType("Edm.Boolean",t),e.Container.mapType(t,e.Boolean),e.Container.registerType("Edm.Binary",n),e.Container.mapType(n,e.Blob),e.Container.registerType("Edm.DateTime",r),e.Container.mapType(r,e.Date),e.Container.registerType("Edm.DateTimeOffset",i),e.Container.mapType(i,e.DateTimeOffset),e.Container.registerType("Edm.Time",s),e.Container.mapType(s,e.Time),e.Container.registerType("Edm.TimeOfDay",a),e.Container.mapType(a,e.Time),e.Container.registerType("Edm.Date",o),e.Container.mapType(o,e.Day),e.Container.registerType("Edm.Duration",u),e.Container.mapType(u,e.Duration),e.Container.registerType("Edm.Decimal",l),e.Container.mapType(l,e.Decimal),e.Container.registerType("Edm.Float",p),e.Container.mapType(p,e.Float),e.Container.registerType("Edm.Single",d),e.Container.mapType(d,e.Float),e.Container.registerType("Edm.Double",c),e.Container.mapType(c,e.Number),e.Container.registerType("Edm.Guid",f),e.Container.mapType(f,e.Guid),e.Container.registerType("Edm.Int16",y),e.Container.mapType(y,e.Int16),e.Container.registerType("Edm.Int32",h),e.Container.mapType(h,e.Integer),e.Container.registerType("Edm.Int64",m),e.Container.mapType(m,e.Int64),e.Container.registerType("Edm.Byte",x),e.Container.mapType(x,e.Byte),e.Container.registerType("Edm.SByte",g),e.Container.mapType(g,e.SByte),e.Container.registerType("Edm.String",v),e.Container.mapType(v,e.String),e.Container.registerType("Edm.GeographyPoint",E),e.Container.mapType(E,e.GeographyPoint),e.Container.registerType("Edm.GeographyLineString",b),e.Container.mapType(b,e.GeographyLineString),e.Container.registerType("Edm.GeographyPolygon",T),e.Container.mapType(T,e.GeographyPolygon),e.Container.registerType("Edm.GeographyMultiPoint",C),e.Container.mapType(C,e.GeographyMultiPoint),e.Container.registerType("Edm.GeographyMultiLineString",_),e.Container.mapType(_,e.GeographyMultiLineString),e.Container.registerType("Edm.GeographyMultiPolygon",S),e.Container.mapType(S,e.GeographyMultiPolygon),e.Container.registerType("Edm.GeographyCollection",P),e.Container.mapType(P,e.GeographyCollection),e.Container.registerType("Edm.GeometryPoint",M),e.Container.mapType(M,e.GeometryPoint),e.Container.registerType("Edm.GeometryLineString",j),e.Container.mapType(j,e.GeometryLineString),e.Container.registerType("Edm.GeometryPolygon",w),e.Container.mapType(w,e.GeometryPolygon),e.Container.registerType("Edm.GeometryMultiPoint",A),e.Container.mapType(A,e.GeometryMultiPoint),e.Container.registerType("Edm.GeometryMultiLineString",O),e.Container.mapType(O,e.GeometryMultiLineString),e.Container.registerType("Edm.GeometryMultiPolygon",N),e.Container.mapType(N,e.GeometryMultiPolygon),e.Container.registerType("Edm.GeometryCollection",k),e.Container.mapType(k,e.GeometryCollection),e.oDataEdmMapping={"$data.Byte":"Edm.Byte","$data.SByte":"Edm.SByte","$data.Decimal":"Edm.Decimal","$data.Float":"Edm.Float","$data.Int16":"Edm.Int16","$data.Int64":"Edm.Int64","$data.DateTimeOffset":"Edm.DateTimeOffset","$data.Time":"Edm.TimeOfDay","$data.Day":"Edm.Date","$data.Duration":"Edm.Duration","$data.Boolean":"Edm.Boolean","$data.Blob":"Edm.Binary","$data.Date":"Edm.DateTime","$data.Number":"Edm.Double","$data.Integer":"Edm.Int32","$data.Int32":"Edm.Int32","$data.String":"Edm.String","$data.ObjectID":"Edm.String","$data.GeographyPoint":"Edm.GeographyPoint","$data.GeographyLineString":"Edm.GeographyLineString","$data.GeographyPolygon":"Edm.GeographyPolygon","$data.GeographyMultiPoint":"Edm.GeographyMultiPoint","$data.GeographyMultiLineString":"Edm.GeographyMultiLineString","$data.GeographyMultiPolygon":"Edm.GeographyMultiPolygon","$data.GeographyCollection":"Edm.GeographyCollection","$data.GeometryPoint":"Edm.GeometryPoint","$data.GeometryLineString":"Edm.GeometryLineString","$data.GeometryPolygon":"Edm.GeometryPolygon","$data.GeometryMultiPoint":"Edm.GeometryMultiPoint","$data.GeometryMultiLineString":"Edm.GeometryMultiLineString","$data.GeometryMultiPolygon":"Edm.GeometryMultiPolygon","$data.GeometryCollection":"Edm.GeometryCollection","$data.Guid":"Edm.Guid"}}(s["default"]),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],26:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem.js"),a=r(s),o=e("jaydata-error-handler");a["default"].GeographyBase=function(){a["default"].Geospatial.apply(this,arguments),this.crs=this.crs||a["default"].GeographyBase.defaultCrs,a["default"].GeographyBase.validateGeoJSON(this)},a["default"].GeographyBase.disableSRID=!1,a["default"].GeographyBase.defaultCrs={properties:{name:"EPSG:4326"},type:"name"},a["default"].GeographyBase.parseFromString=function(e){var t=e.indexOf("(");if(t>=0){var n=e.substring(0,t).toLowerCase(),r=a["default"].GeographyBase.registered[n];if(r&&r.parseFromString&&r!=a["default"].GeographyBase)return r.parseFromString(e);o.Guard.raise(new o.Exception("parseFromString","Not Implemented",e))}},a["default"].GeographyBase.stringifyToUrl=function(e){if(e instanceof a["default"].GeographyBase&&e.constructor&&e.constructor.stringifyToUrl)return e.constructor.stringifyToUrl(e);if(e instanceof a["default"].GeographyBase&&e.constructor&&Array.isArray(e.constructor.validMembers)&&"coordinates"===e.constructor.validMembers[0]){var t,n=function(){var n=function(e){if(!a["default"].GeographyBase.disableSRID&&e.crs&&e.crs.properties&&e.crs.properties.name){var n=/EPSG:(\d+)/i,r=n.exec(e.crs.properties.name);r&&(t+="SRID="+r[1]+";")}return t},r=function i(e){if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)n>0&&(t+=","),Array.isArray(e[n][0])&&(t+="("),i(e[n]),Array.isArray(e[n][0])&&(t+=")");else t+=e.join(" ");return t};return t="geography'",t=n(e),t+=e.type+"(",t=r(e.coordinates),t+=")'",{v:t}}();if("object"===("undefined"==typeof n?"undefined":i(n)))return n.v}else o.Guard.raise(new o.Exception("stringifyToUrl on instance type","Not Implemented",e))},a["default"].GeographyBase.registerType=function(e,t,n){a["default"].SimpleBase.registerType(e,t,n||a["default"].GeographyBase),a["default"].GeographyBase.registered=a["default"].GeographyBase.registered||{},a["default"].GeographyBase.registered[e.toLowerCase()]=t},a["default"].GeographyBase.validateGeoJSON=function(e){var t=e.type;if(t){var n=a["default"].GeographyBase.registered[t.toLowerCase()];if("function"==typeof n.validateGeoJSON){var r=n.validateGeoJSON(e);if(r)return r;o.Guard.raise(new o.Exception("Invalid '"+t+"' format!","Format Exception",e))}}console.log("GeoJSON validation missing",e)},a["default"].SimpleBase.registerType("GeographyBase",a["default"].GeographyBase,a["default"].Geospatial),a["default"].Container.registerType(["$data.GeographyBase"],a["default"].GeographyBase),a["default"].GeographyPoint=function(e,t){e&&"object"===("undefined"==typeof e?"undefined":i(e))&&Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):e&&"object"===("undefined"==typeof e?"undefined":i(e))&&("longitude"in e||"latitude"in e)?a["default"].GeographyBase.call(this,{coordinates:[e.longitude,e.latitude]}):e&&"object"===("undefined"==typeof e?"undefined":i(e))&&("lng"in e||"lat"in e)?a["default"].GeographyBase.call(this,{coordinates:[e.lng,e.lat]}):e&&"object"===("undefined"==typeof e?"undefined":i(e))?a["default"].GeographyBase.call(this,e):a["default"].GeographyBase.call(this,{coordinates:[e||0,t||0]})},a["default"].GeographyPoint.validateGeoJSON=function(e){return e&&Array.isArray(e.coordinates)&&2==e.coordinates.length&&"number"==typeof e.coordinates[0]&&"number"==typeof e.coordinates[1]},a["default"].GeographyPoint.parseFromString=function(e){var t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),n=t.split(" ");return new a["default"].GeographyPoint(parseFloat(n[0]),parseFloat(n[1]))},a["default"].GeographyPoint.validMembers=["coordinates"],a["default"].GeographyBase.registerType("Point",a["default"].GeographyPoint),Object.defineProperty(a["default"].GeographyPoint.prototype,"longitude",{get:function(){return this.coordinates[0]},set:function(e){this.coordinates[0]=e}}),Object.defineProperty(a["default"].GeographyPoint.prototype,"latitude",{get:function(){return this.coordinates[1]},set:function(e){this.coordinates[1]=e}}),a["default"].Container.registerType(["$data.GeographyPoint","GeographyPoint","$data.Geography","Geography","geography","geo"],a["default"].GeographyPoint),a["default"].Geography=a["default"].GeographyPoint,a["default"].GeographyLineString=function(e){Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyLineString.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++){var r=e.coordinates[n];t=t&&Array.isArray(r)&&2==r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}return t},a["default"].GeographyLineString.validMembers=["coordinates"],a["default"].GeographyBase.registerType("LineString",a["default"].GeographyLineString),a["default"].Container.registerType(["$data.GeographyLineString","GeographyLineString"],a["default"].GeographyLineString),a["default"].GeographyPolygon=function(e){if("object"===("undefined"==typeof e?"undefined":i(e))&&("topLeft"in e&&"bottomRight"in e||"topRight"in e&&"bottomLeft"in e)){var t,n,r,s;"topLeft"in e&&"bottomRight"in e?(t=e.topLeft instanceof a["default"].GeographyPoint?e.topLeft:new a["default"].GeographyPoint(e.topLeft),s=e.bottomRight instanceof a["default"].GeographyPoint?e.bottomRight:new a["default"].GeographyPoint(e.bottomRight),n=new a["default"].GeographyPoint([s.coordinates[0],t.coordinates[1]]),r=new a["default"].GeographyPoint([t.coordinates[0],s.coordinates[1]])):(n=e.topRight instanceof a["default"].GeographyPoint?e.topRight:new a["default"].GeographyPoint(e.topRight),r=e.bottomLeft instanceof a["default"].GeographyPoint?e.bottomLeft:new a["default"].GeographyPoint(e.bottomLeft),t=new a["default"].GeographyPoint([r.coordinates[0],n.coordinates[1]]),s=new a["default"].GeographyPoint([n.coordinates[0],r.coordinates[1]]));var o=[];o.push([].concat(t.coordinates)),o.push([].concat(n.coordinates)),o.push([].concat(s.coordinates)),o.push([].concat(r.coordinates)),o.push([].concat(t.coordinates)),a["default"].GeographyBase.call(this,{coordinates:[o]})}else Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyPolygon.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++){var s=r[i];t=t&&Array.isArray(s)&&2==s.length&&"number"==typeof s[0]&&"number"==typeof s[1]}return t},a["default"].GeographyPolygon.parseFromString=function(e){for(var t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),n=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split("),("),t=[],r=0;r<n.length;r++){for(var i=[],s=n[r].split(","),o=0;o<s.length;o++){var u=s[o].split(" ");i.push([parseFloat(u[0]),parseFloat(u[1])])}t.push(i)}return new a["default"].GeographyPolygon(t)},a["default"].GeographyPolygon.validMembers=["coordinates"],a["default"].GeographyBase.registerType("Polygon",a["default"].GeographyPolygon),a["default"].Container.registerType(["$data.GeographyPolygon","GeographyPolygon"],a["default"].GeographyPolygon),a["default"].GeographyMultiPoint=function(e){Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyMultiPoint.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++){var r=e.coordinates[n];t=t&&Array.isArray(r)&&2==r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}return t},a["default"].GeographyMultiPoint.validMembers=["coordinates"],a["default"].GeographyBase.registerType("MultiPoint",a["default"].GeographyMultiPoint),a["default"].Container.registerType(["$data.GeographyMultiPoint","GeographyMultiPoint"],a["default"].GeographyMultiPoint),a["default"].GeographyMultiLineString=function(e){Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyMultiLineString.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++){var s=r[i];t=t&&Array.isArray(s)&&2==s.length&&"number"==typeof s[0]&&"number"==typeof s[1]}return t},a["default"].GeographyMultiLineString.validMembers=["coordinates"],a["default"].GeographyBase.registerType("MultiLineString",a["default"].GeographyMultiLineString),a["default"].Container.registerType(["$data.GeographyMultiLineString","GeographyMultiLineString"],a["default"].GeographyMultiLineString),a["default"].GeographyMultiPolygon=function(e){Array.isArray(e)?a["default"].GeographyBase.call(this,{coordinates:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyMultiPolygon.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++)for(var s=r[i],t=t&&Array.isArray(s),a=0;t&&a<s.length;a++){var o=s[a];t=t&&Array.isArray(o)&&2==o.length&&"number"==typeof o[0]&&"number"==typeof o[1]}return t},a["default"].GeographyMultiPolygon.validMembers=["coordinates"],a["default"].GeographyBase.registerType("MultiPolygon",a["default"].GeographyMultiPolygon),a["default"].Container.registerType(["$data.GeographyMultiPolygon","GeographyMultiPolygon"],a["default"].GeographyMultiPolygon),a["default"].GeographyCollection=function(e){Array.isArray(e)?a["default"].GeographyBase.call(this,{geometries:e}):a["default"].GeographyBase.call(this,e)},a["default"].GeographyCollection.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.geometries),n=0;t&&n<e.geometries.length;n++){var r=e.geometries[n];try{t=t&&a["default"].GeographyBase.validateGeoJSON(r)}catch(i){t=!1}}return t},a["default"].GeographyCollection.validMembers=["geometries"],a["default"].GeographyBase.registerType("GeometryCollection",a["default"].GeographyCollection),a["default"].Container.registerType(["$data.GeographyCollection","GeographyCollection"],a["default"].GeographyCollection),a["default"].Container.registerConverter(a["default"].GeographyPoint,a["default"].Object,function(e){return e?new a["default"].GeographyPoint(e):e}),a["default"].Container.registerConverter(a["default"].GeographyLineString,a["default"].Object,function(e){return e?new a["default"].GeographyLineString(e):e}),a["default"].Container.registerConverter(a["default"].GeographyPolygon,a["default"].Object,function(e){return e?new a["default"].GeographyPolygon(e):e}),a["default"].Container.registerConverter(a["default"].GeographyMultiPoint,a["default"].Object,function(e){return e?new a["default"].GeographyMultiPoint(e):e}),a["default"].Container.registerConverter(a["default"].GeographyMultiLineString,a["default"].Object,function(e){return e?new a["default"].GeographyMultiLineString(e):e}),a["default"].Container.registerConverter(a["default"].GeographyMultiPolygon,a["default"].Object,function(e){return e?new a["default"].GeographyMultiPolygon(e):e}),a["default"].Container.registerConverter(a["default"].GeographyCollection,a["default"].Object,function(e){return e?new a["default"].GeographyCollection(e):e}),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem.js":22,"jaydata-error-handler":7}],27:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem.js"),a=r(s),o=e("jaydata-error-handler");a["default"].GeometryBase=function(){a["default"].Geospatial.apply(this,arguments),this.crs=this.crs||a["default"].GeometryBase.defaultCrs,a["default"].GeometryBase.validateGeoJSON(this)},a["default"].GeometryBase.disableSRID=!1,a["default"].GeometryBase.defaultCrs={properties:{name:"EPSG:0"},type:"name"},a["default"].GeometryBase.parseFromString=function(e){var t=e.indexOf("(");if(t>=0){var n=e.substring(0,t).toLowerCase(),r=a["default"].GeometryBase.registered[n];if(r&&r.parseFromString&&r!=a["default"].GeometryBase)return r.parseFromString(e);o.Guard.raise(new o.Exception("parseFromString","Not Implemented",e))}},a["default"].GeometryBase.stringifyToUrl=function(e){if(e instanceof a["default"].GeometryBase&&e.constructor&&e.constructor.stringifyToUrl)return e.constructor.stringifyToUrl(e);if(e instanceof a["default"].GeometryBase&&e.constructor&&Array.isArray(e.constructor.validMembers)&&"coordinates"===e.constructor.validMembers[0]){var t,n=function(){var n=function(e){if(!a["default"].GeometryBase.disableSRID&&e.crs&&e.crs.properties&&e.crs.properties.name){var n=/EPSG:(\d+)/i,r=n.exec(e.crs.properties.name);r&&(t+="SRID="+r[1]+";")}return t},r=function i(e){if(Array.isArray(e[0]))for(var n=0;n<e.length;n++)n>0&&(t+=","),Array.isArray(e[n][0])&&(t+="("),i(e[n]),Array.isArray(e[n][0])&&(t+=")");else t+=e.join(" ");return t};return t="geometry'",t=n(e),t+=e.type+"(",t=r(e.coordinates),t+=")'",{v:t}}();if("object"===("undefined"==typeof n?"undefined":i(n)))return n.v}else o.Guard.raise(new o.Exception("stringifyToUrl on instance type","Not Implemented",e))},a["default"].GeometryBase.registerType=function(e,t,n){a["default"].SimpleBase.registerType(e,t,n||a["default"].GeometryBase),a["default"].GeometryBase.registered=a["default"].GeometryBase.registered||{},a["default"].GeometryBase.registered[e.toLowerCase()]=t},a["default"].GeometryBase.validateGeoJSON=function(e){var t=e.type;if(t){var n=a["default"].GeometryBase.registered[t.toLowerCase()];if("function"==typeof n.validateGeoJSON){var r=n.validateGeoJSON(e);if(r)return r;o.Guard.raise(new o.Exception("Invalid '"+t+"' format!","Format Exception",e))}}console.log("GeoJSON validation missing",e)},a["default"].SimpleBase.registerType("GeometryBase",a["default"].GeometryBase,a["default"].Geospatial),
a["default"].Container.registerType(["$data.GeometryBase"],a["default"].GeometryBase),a["default"].GeometryPoint=function(e,t){var n=e;n&&"object"===("undefined"==typeof n?"undefined":i(n))&&Array.isArray(n)?a["default"].GeometryBase.call(this,{coordinates:n}):n&&"object"===("undefined"==typeof n?"undefined":i(n))&&("x"in n||"y"in n)?a["default"].GeometryBase.call(this,{coordinates:[n.x,n.y]}):n&&"object"===("undefined"==typeof n?"undefined":i(n))?a["default"].GeometryBase.call(this,n):a["default"].GeometryBase.call(this,{coordinates:[e||0,t||0]})},a["default"].GeometryPoint.validateGeoJSON=function(e){return e&&Array.isArray(e.coordinates)&&2==e.coordinates.length&&"number"==typeof e.coordinates[0]&&"number"==typeof e.coordinates[1]},a["default"].GeometryPoint.parseFromString=function(e){var t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),n=t.split(" ");return new a["default"].GeometryPoint(parseFloat(n[0]),parseFloat(n[1]))},a["default"].GeometryPoint.validMembers=["coordinates"],a["default"].GeometryBase.registerType("Point",a["default"].GeometryPoint),Object.defineProperty(a["default"].GeometryPoint.prototype,"x",{get:function(){return this.coordinates[0]},set:function(e){this.coordinates[0]=e}}),Object.defineProperty(a["default"].GeometryPoint.prototype,"y",{get:function(){return this.coordinates[1]},set:function(e){this.coordinates[1]=e}}),a["default"].Container.registerType(["$data.GeometryPoint","GeometryPoint"],a["default"].GeometryPoint),a["default"].GeometryLineString=function(e){Array.isArray(e)?a["default"].GeometryBase.call(this,{coordinates:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryLineString.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++){var r=e.coordinates[n];t=t&&Array.isArray(r)&&2==r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}return t},a["default"].GeometryLineString.validMembers=["coordinates"],a["default"].GeometryBase.registerType("LineString",a["default"].GeometryLineString),a["default"].Container.registerType(["$data.GeometryLineString","GeometryLineString"],a["default"].GeometryLineString),a["default"].GeometryPolygon=function(e){if("object"===("undefined"==typeof e?"undefined":i(e))&&("topLeft"in e&&"bottomRight"in e||"topRight"in e&&"bottomLeft"in e)){var t,n,r,s;"topLeft"in e&&"bottomRight"in e?(t=e.topLeft instanceof a["default"].GeometryPoint?e.topLeft:new a["default"].GeometryPoint(e.topLeft),s=e.bottomRight instanceof a["default"].GeometryPoint?e.bottomRight:new a["default"].GeometryPoint(e.bottomRight),n=new a["default"].GeometryPoint([s.coordinates[0],t.coordinates[1]]),r=new a["default"].GeometryPoint([t.coordinates[0],s.coordinates[1]])):(n=e.topRight instanceof a["default"].GeometryPoint?e.topRight:new a["default"].GeometryPoint(e.topRight),r=e.bottomLeft instanceof a["default"].GeometryPoint?e.bottomLeft:new a["default"].GeometryPoint(e.bottomLeft),t=new a["default"].GeometryPoint([r.coordinates[0],n.coordinates[1]]),s=new a["default"].GeometryPoint([n.coordinates[0],r.coordinates[1]]));var o=[];o.push([].concat(t.coordinates)),o.push([].concat(n.coordinates)),o.push([].concat(s.coordinates)),o.push([].concat(r.coordinates)),o.push([].concat(t.coordinates)),a["default"].GeometryBase.call(this,{coordinates:[o]})}else Array.isArray(e)?a["default"].GeometryBase.call(this,{coordinates:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryPolygon.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++){var s=r[i];t=t&&Array.isArray(s)&&2==s.length&&"number"==typeof s[0]&&"number"==typeof s[1]}return t},a["default"].GeometryPolygon.parseFromString=function(e){for(var t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")),n=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split("),("),t=[],r=0;r<n.length;r++){for(var i=[],s=n[r].split(","),o=0;o<s.length;o++){var u=s[o].split(" ");i.push([parseFloat(u[0]),parseFloat(u[1])])}t.push(i)}return new a["default"].GeometryPolygon(t)},a["default"].GeometryPolygon.validMembers=["coordinates"],a["default"].GeometryBase.registerType("Polygon",a["default"].GeometryPolygon),a["default"].Container.registerType(["$data.GeometryPolygon","GeometryPolygon"],a["default"].GeometryPolygon),a["default"].GeometryMultiPoint=function(e){Array.isArray(e)?a["default"].GeometryBase.call(this,{coordinates:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryMultiPoint.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++){var r=e.coordinates[n];t=t&&Array.isArray(r)&&2==r.length&&"number"==typeof r[0]&&"number"==typeof r[1]}return t},a["default"].GeometryMultiPoint.validMembers=["coordinates"],a["default"].GeometryBase.registerType("MultiPoint",a["default"].GeometryMultiPoint),a["default"].Container.registerType(["$data.GeometryMultiPoint","GeometryMultiPoint"],a["default"].GeometryMultiPoint),a["default"].GeometryMultiLineString=function(e){Array.isArray(e)?a["default"].GeometryBase.call(this,{coordinates:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryMultiLineString.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++){var s=r[i];t=t&&Array.isArray(s)&&2==s.length&&"number"==typeof s[0]&&"number"==typeof s[1]}return t},a["default"].GeometryMultiLineString.validMembers=["coordinates"],a["default"].GeometryBase.registerType("MultiLineString",a["default"].GeometryMultiLineString),a["default"].Container.registerType(["$data.GeometryMultiLineString","GeometryMultiLineString"],a["default"].GeometryMultiLineString),a["default"].GeometryMultiPolygon=function(e){Array.isArray(e)?a["default"].GeometryBase.call(this,{coordinates:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryMultiPolygon.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.coordinates),n=0;t&&n<e.coordinates.length;n++)for(var r=e.coordinates[n],t=t&&Array.isArray(r),i=0;t&&i<r.length;i++)for(var s=r[i],t=t&&Array.isArray(s),a=0;t&&a<s.length;a++){var o=s[a];t=t&&Array.isArray(o)&&2==o.length&&"number"==typeof o[0]&&"number"==typeof o[1]}return t},a["default"].GeometryMultiPolygon.validMembers=["coordinates"],a["default"].GeometryBase.registerType("MultiPolygon",a["default"].GeometryMultiPolygon),a["default"].Container.registerType(["$data.GeometryMultiPolygon","GeometryMultiPolygon"],a["default"].GeometryMultiPolygon),a["default"].GeometryCollection=function(e){Array.isArray(e)?a["default"].GeometryBase.call(this,{geometries:e}):a["default"].GeometryBase.call(this,e)},a["default"].GeometryCollection.validateGeoJSON=function(e){for(var t=e&&Array.isArray(e.geometries),n=0;t&&n<e.geometries.length;n++){var r=e.geometries[n];try{t=t&&a["default"].GeometryBase.validateGeoJSON(r)}catch(i){t=!1}}return t},a["default"].GeometryCollection.validMembers=["geometries"],a["default"].GeometryBase.registerType("GeometryCollection",a["default"].GeometryCollection),a["default"].Container.registerType(["$data.GeometryCollection","GeometryCollection"],a["default"].GeometryCollection),a["default"].Container.registerConverter(a["default"].GeometryPoint,a["default"].Object,function(e){return e?new a["default"].GeometryPoint(e):e}),a["default"].Container.registerConverter(a["default"].GeometryLineString,a["default"].Object,function(e){return e?new a["default"].GeometryLineString(e):e}),a["default"].Container.registerConverter(a["default"].GeometryPolygon,a["default"].Object,function(e){return e?new a["default"].GeometryPolygon(e):e}),a["default"].Container.registerConverter(a["default"].GeometryMultiPoint,a["default"].Object,function(e){return e?new a["default"].GeometryMultiPoint(e):e}),a["default"].Container.registerConverter(a["default"].GeometryMultiLineString,a["default"].Object,function(e){return e?new a["default"].GeometryMultiLineString(e):e}),a["default"].Container.registerConverter(a["default"].GeometryMultiPolygon,a["default"].Object,function(e){return e?new a["default"].GeometryMultiPolygon(e):e}),a["default"].Container.registerConverter(a["default"].GeometryCollection,a["default"].Object,function(e){return e?new a["default"].GeometryCollection(e):e}),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem.js":22,"jaydata-error-handler":7}],28:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);s["default"].Geospatial=function(){if(this.type=this.constructor.type,Array.isArray(this.constructor.validMembers))for(var e=0;e<this.constructor.validMembers.length;e++){var t=this.constructor.validMembers[e];this[t]=void 0}s["default"].SimpleBase.apply(this,arguments),this.type=this.constructor.type||"Unknown"},s["default"].SimpleBase.registerType("Geospatial",s["default"].Geospatial),s["default"].Container.registerType(["$data.Geospatial","Geospatial"],s["default"].Geospatial),s["default"].point=function(e){if(e&&e.crs)return e.crs.properties&&e.crs.properties.name===s["default"].GeometryBase.defaultCrs.properties.name?new s["default"].GeometryPoint(e):new s["default"].GeographyPoint(e);if(e){if("x"in e&&"y"in e)return new s["default"].GeometryPoint(e.x,e.y);if("longitude"in e&&"latitude"in e)return new s["default"].GeographyPoint(e.longitude,e.latitude);if("lng"in e&&"lat"in e)return new s["default"].GeographyPoint(e.lng,e.lat)}},n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],29:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);s["default"].Guid=function(e){if(!(void 0===e||"string"==typeof e&&/^[a-zA-z0-9]{8}-[a-zA-z0-9]{4}-[a-zA-z0-9]{4}-[a-zA-z0-9]{4}-[a-zA-z0-9]{12}$/.test(e)))throw Guard.raise(new Exception("TypeError: ","value not convertable to $data.Guid",e));this.value=e||"00000000-0000-0000-0000-000000000000"},s["default"].Container.registerType(["$data.Guid","Guid","guid"],s["default"].Guid),s["default"].Container.registerConverter("$data.Guid",{"$data.String":function(e){return e?s["default"].parseGuid(e).toString():e},"$data.Guid":function(e){return e?e.toString():e}},{"$data.String":function(e){return e?e.toString():e}}),s["default"].Guid.prototype.toJSON=function(){return this.value},s["default"].Guid.prototype.valueOf=function(){return this.value},s["default"].Guid.prototype.toString=function(){return this.value},s["default"].Guid.NewGuid=function(){return s["default"].createGuid()},s["default"].parseGuid=function(e){return new s["default"].Guid(e)},function(){/*!
    Math.uuid.js (v1.4)
    http://www.broofa.com
    mailto:robert@broofa.com
      Copyright (c) 2010 Robert Kieffer
    Dual licensed under the MIT and GPL licenses.
    */
var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");s["default"].createGuid=function(t){if(t)return new s["default"].Guid(t);var n,r,i=e,a=[],o=i.length;if(n)for(r=0;n>r;r++)a[r]=i[0|Math.random()*o];else{var u;for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",r=0;36>r;r++)a[r]||(u=0|16*Math.random(),a[r]=i[19==r?3&u|8:u])}return s["default"].parseGuid(a.join(""))}}(),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],30:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem.js"),a=r(s);a["default"].SimpleBase=function(e){if("object"===("undefined"==typeof e?"undefined":i(e))&&e)if(Array.isArray(this.constructor.validMembers))for(var t=0;t<this.constructor.validMembers.length;t++){var n=this.constructor.validMembers[t];void 0!==e[n]&&(this[n]=e[n])}else delete e.type,a["default"].typeSystem.extend(this,e)},a["default"].SimpleBase.registerType=function(e,t,n){n=n||a["default"].SimpleBase,t.type=e,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},a["default"].Container.registerType(["$data.SimpleBase","SimpleBase"],a["default"].SimpleBase),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],31:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem.js"),s=r(i);s["default"].Number="undefined"!=typeof Number?Number:function(){},s["default"].Date="undefined"!=typeof Date?Date:function(){},s["default"].String="undefined"!=typeof String?String:function(){},s["default"].Boolean="undefined"!=typeof Boolean?Boolean:function(){},s["default"].Array="undefined"!=typeof Array?Array:function(){},s["default"].Object="undefined"!=typeof Object?Object:function(){},s["default"].Function=Function,s["default"].Byte=function(){},s["default"].SByte=function(){},s["default"].Decimal=function(){},s["default"].Float=s["default"].Single=function(){},s["default"].Integer=function(){},s["default"].Int16=function(e){},s["default"].Int32=function(){},s["default"].Int64=function(e){},s["default"].ObjectID="undefined"!=typeof s["default"].mongoDBDriver&&"undefined"!=typeof s["default"].mongoDBDriver.ObjectID?s["default"].mongoDBDriver.ObjectID:function(){},s["default"].Time=function(){},s["default"].Day=function(){},s["default"].Duration=function(){},s["default"].DateTimeOffset=function(e){this.value=e},s["default"].DateTimeOffset.prototype.toJSON=function(){return this.value instanceof Date?this.value.toISOString():this.value},s["default"].Container.registerType(["$data.Number","number","JayNumber","double"],s["default"].Number),s["default"].Container.registerType(["$data.Integer","int","integer","JayInteger"],s["default"].Integer),s["default"].Container.registerType(["$data.Int32","int32","JayInt32"],s["default"].Int32),s["default"].Container.registerType(["$data.Byte","byte","JayByte"],s["default"].Byte),s["default"].Container.registerType(["$data.SByte","sbyte","JaySByte"],s["default"].SByte),s["default"].Container.registerType(["$data.Decimal","decimal","JayDecimal"],s["default"].Decimal),s["default"].Container.registerType(["$data.Float","$data.Single","float","single","JayFloat"],s["default"].Float),s["default"].Container.registerType(["$data.Int16","int16","word","JayInt16"],s["default"].Int16),s["default"].Container.registerType(["$data.Int64","int64","long","JayInt64"],s["default"].Int64),s["default"].Container.registerType(["$data.String","string","text","character","JayString"],s["default"].String),s["default"].Container.registerType(["$data.Array","array","Array","[]","JayArray"],s["default"].Array,function(){return s["default"].Array.apply(void 0,arguments)}),s["default"].Container.registerType(["$data.Date","datetime","date","JayDate"],s["default"].Date),s["default"].Container.registerType(["$data.Time","time","JayTime"],s["default"].Time),s["default"].Container.registerType(["$data.Day","day","JayDay"],s["default"].Day),s["default"].Container.registerType(["$data.Duration","duration","JayDuration"],s["default"].Duration),s["default"].Container.registerType(["$data.DateTimeOffset","offset","datetimeoffset","JayDateTimeOffset"],s["default"].DateTimeOffset),s["default"].Container.registerType(["$data.Boolean","bool","boolean","JayBoolean"],s["default"].Boolean),s["default"].Container.registerType(["$data.Object","Object","object","{}","JayObject"],s["default"].Object),s["default"].Container.registerType(["$data.Function","Function","function"],s["default"].Function),s["default"].Container.registerType(["$data.ObjectID","ObjectID","objectId","objectid","ID","Id","id","JayObjectID"],s["default"].ObjectID),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem.js":22}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.Container=n.$C=n.Exception=n.Guard=void 0;var i=e("./TypeSystem.js"),s=r(i),a=e("./Types/Types.js"),o=(r(a),e("./Trace/Trace.js")),u=(r(o),e("./Trace/Logger.js")),l=(r(u),e("./Types/SimpleBase.js")),p=(r(l),e("./Types/Geospatial.js")),d=(r(p),e("./Types/Geography.js")),c=(r(d),e("./Types/Geometry.js")),f=(r(c),e("./Types/Guid.js")),y=(r(f),e("./Types/Blob.js")),h=(r(y),e("./Types/EdmTypes.js")),m=(r(h),e("./Types/Converter.js")),x=(r(m),e("jaydata-error-handler"));n.Guard=x.Guard;s["default"].Guard=x.Guard;n.Exception=x.Exception;s["default"].Exception=x.Exception;n.$C=i.$C;s["default"].$C=i.$C;n.Container=i.Container;n["default"]=s["default"]},{"./Trace/Logger.js":20,"./Trace/Trace.js":21,"./TypeSystem.js":22,"./Types/Blob.js":23,"./Types/Converter.js":24,"./Types/EdmTypes.js":25,"./Types/Geography.js":26,"./Types/Geometry.js":27,"./Types/Geospatial.js":28,"./Types/Guid.js":29,"./Types/SimpleBase.js":30,"./Types/Types.js":31,"jaydata-error-handler":7}],33:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./initializeJayDataClient.js"),a=i(s),o=e("acorn"),u=r(o),l=e("../../package.json"),p=r(l);"undefined"==typeof console&&(console={warn:function(){},error:function(){},log:function(){},dir:function(){},time:function(){},timeEnd:function(){}}),console.warn||(console.warn=function(){}),console.error||(console.error=function(){}),function(e){e.__namespace=!0,e.version="JayData "+p.version,e.versionNumber=p.version,e.root={},e.Acorn=u}(a["default"]),n["default"]=a["default"],t.exports=n["default"]},{"../../package.json":16,"./initializeJayDataClient.js":34,acorn:1}],34:[function(e,t,n){"use strict";function r(){if(console.log("@@@@",this),this instanceof r){var e=r.implementation.apply(this,arguments);return new e(arguments[1])}return r.implementation.apply(this,arguments)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r,t.exports=n["default"]},{}],35:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Access",null,null,{},{isAuthorized:function(e,t,n,r){var i=new s["default"].PromiseHandler,a=i.createCallback(r),o=i.getPromise();return a.success(!0),o},getAccessBitmaskFromPermission:function(e){var t=s["default"].Access.None;return e.Create&&(t|=s["default"].Access.Create),e.Read&&(t|=s["default"].Access.Read),e.Update&&(t|=s["default"].Access.Update),e.Delete&&(t|=s["default"].Access.Delete),e.DeleteBatch&&(t|=s["default"].Access.DeleteBatch),e.Execute&&(t|=s["default"].Access.Execute),t},None:{value:0},Create:{value:1},Read:{value:2},Update:{value:4},Delete:{value:8},DeleteBatch:{value:16},Execute:{value:32}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],36:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].ajax=s["default"].ajax||function(){var e=arguments[arguments.length-1],t=s["default"].PromiseHandlerBase.createCallbackSettings(e);t.error("Not implemented")},n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],37:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../TypeSystem/index.js"),a=r(s);"undefined"!=typeof Ext&&i(Ext.Ajax)&&(a["default"].ajax=a["default"].ajax||function(e){Ext.Ajax.request(e)}),n["default"]=a["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],38:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);"undefined"!=typeof WinJS&&WinJS.xhr&&(s["default"].ajax=s["default"].ajax||function(e){s["default"].typeSystem.extend(e,{dataType:"json",headers:{}});var t={json:{accept:"application/json, text/javascript",convert:JSON.parse},text:{accept:"text/plain",convert:function(e){return e}},html:{accept:"text/html",convert:function(e){return e}},xml:{accept:"application/xml, text/xml",convert:function(e){return e}}},n=t[e.dataType.toLowerCase()];e.headers.Accept=n.accept;var r=e.success||s["default"].defaultSuccessCallback,i=e.error||s["default"].defaultErrorCallback,a=e.progress,o=function(e){var t=n.convert(e.responseText);r(t)},u=function p(e){var p=n.convert(e.responseText);i(p)},l=a;WinJS.xhr(e).done(o,u,l)}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);"undefined"!=typeof jQuery&&jQuery.ajax&&(s["default"].ajax=s["default"].ajax||jQuery.ajax),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],40:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Authentication.Anonymous",s["default"].Authentication.AuthenticationBase,null,{constructor:function(e){this.configuration=e||{},this.Authenticated=!1},Login:function(e){},Logout:function(){},CreateRequest:function(e){s["default"].ajax(e)}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],41:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Authentication.AuthenticationBase",null,null,{constructor:function(e){this.configuration=e||{},this.Authenticated=!1},Login:function(e){i.Guard.raise("Pure class")},Logout:function(){i.Guard.raise("Pure class")},CreateRequest:function(e){i.Guard.raise("Pure class")}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Authentication.BasicAuth.BasicAuth",s["default"].Authentication.AuthenticationBase,null,{constructor:function(e){this.configuration=s["default"].typeSystem.extend({Username:"",Password:""},e)},Login:function(e){e&&"function"==typeof e.pending&&e.pending()},Logout:function(){},CreateRequest:function(e){if(e){var t=this,n=e.beforeSend;e.beforeSend=function(e){e.setRequestHeader("Authorization","Basic  "+t.__encodeBase64(t.configuration.Username+":"+t.configuration.Password)),"function"==typeof n&&n(e)},s["default"].ajax(e)}},__encodeBase64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";input=e;var n,r,i,s,a,o="",u="",l="",p=0;do n=input.charCodeAt(p++),r=input.charCodeAt(p++),u=input.charCodeAt(p++),i=n>>2,s=(3&n)<<4|r>>4,a=(15&r)<<2|u>>6,l=63&u,isNaN(r)?a=l=64:isNaN(u)&&(l=64),o=o+t.charAt(i)+t.charAt(s)+t.charAt(a)+t.charAt(l),n=r=u="",i=s=a=l="";while(p<input.length);return o}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],43:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _index=_dereq_("../../TypeSystem/index.js"),_index2=_interopRequireDefault(_index);_index2["default"].Class.define("$data.Authentication.FacebookAuth",_index2["default"].Authentication.AuthenticationBase,null,{constructor:function(e){this.configuration=_index2["default"].typeSystem.extend({Url_code:"",type_code:"",scope:"",Url_token:"",type_token:"",access_token:"",app_id:""},e)},Login:function(e){if(!this.Authenticated){var t=this;t.configuration.stateCallbacks=e||{},_index2["default"].ajax({url:this.configuration.Url_code,data:"type="+t.configuration.type_code+"&client_id="+t.configuration.app_id+"&scope="+t.configuration.scope,type:"POST",dataType:"json",success:function(e){"function"==typeof t.configuration.stateCallbacks.pending&&t.configuration.stateCallbacks.pending(e),t._processRequestToken(e),t.Authenticated=!0},error:function(){"function"==typeof t.configuration.stateCallbacks.error&&t.configuration.stateCallbacks.error(arguments)}})}},Logout:function(){this.Authenticated=!1},CreateRequest:function(e){if(e){if(-1===e.url.indexOf("access_token=")&&e.url&&this.Authenticated){var t="?";e.url.indexOf(t)>0&&(t="&"),this.configuration.access_token&&(e.url=e.url+t+"access_token="+this.configuration.access_token)}_index2["default"].ajax(e)}},_processRequestToken:function _processRequestToken(verification_data){var provider=this;_index2["default"].ajax({url:provider.configuration.Url_token,data:"type="+provider.configuration.type_token+"&client_id="+provider.configuration.app_id+"&code="+verification_data.code,type:"POST",dataType:"json",success:function(e){provider.configuration.access_token=e.access_token,"function"==typeof provider.configuration.stateCallbacks.success&&provider.configuration.stateCallbacks.success(e)},error:function error(obj){var data=eval("("+obj.responseText+")");data.error&&("authorization_pending"==data.error.message?setTimeout(function(){provider._processRequestToken(verification_data)},2e3):"function"==typeof provider.configuration.stateCallbacks.abort&&provider.configuration.stateCallbacks.abort(arguments))}})}},null),exports["default"]=_index2["default"],module.exports=exports["default"]},{"../../TypeSystem/index.js":32}],44:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Entity=n.Event=void 0;var s=e("../TypeSystem/index.js"),a=r(s),o=a["default"].Class.define("EventSubscriber",null,null,{constructor:function(e,t,n){this.handler=e,this.state=t,this.thisArg=n},handler:{},state:{},thisArg:{}});a["default"].Event=a["default"].Class.define("$data.Event",null,null,{constructor:function(e,t){function n(e,t){e.forEach(function(n,r){n.handler==t&&e.splice(r,1)})}var r=null;this.attach=function(e,n,i){r||(r=[]),r.push(new o(e,n,i||t))},this.detach=function(e){n(r,e)},this.fire=function(e,n){var i=n||t||this;r&&r.forEach(function(t){try{t.handler.call(t.thisArg,i,e,t.state)}catch(n){console.log("unhandled exception in event handler. exception suppressed"),console.dir(n)}})},this.fireCancelAble=function(e,n){var i=n||t||this,s=!0;return r&&r.forEach(function(t){try{s=s&&(t.handler.call(t.thisArg,i,e,t.state)===!1?!1:!0)}catch(n){console.log("unhandled exception in event handler. exception suppressed"),console.dir(n)}}),s}}});var u=a["default"].Class.define("EventData",null,null,{eventName:{}}),l=a["default"].Class.define("PropertyChangeEventData",u,null,{constructor:function(e,t,n){this.propertyName=e,this.oldValue=t,this.newValue=n},propertyName:{},oldValue:{},newValue:{}}),p=a["default"].Class.define("PropertyValidationEventData",u,null,{constructor:function(e,t,n,r){this.propertyName=e,this.oldValue=t,this.newValue=n,this.errors=r,this.cancel=!1},propertyName:{},oldValue:{},newValue:{},errors:{},cancel:{}});a["default"].Entity=a["default"].Class.define("$data.Entity",null,null,{constructor:function(e,t){this.initData={};var n=this.getType();n.__copyPropertiesToInstance&&a["default"].typeSystem.writePropertyValues(this);var r=null;if(this.context=r,"setDefaultValues"in n&&(t&&t.setDefaultValues===!1||(!e||Object.keys(e).length<1)&&(e=n.setDefaultValues(e))),"object"===("undefined"==typeof e?"undefined":i(e))){var o=n.memberDefinitions,u=o.getPublicMappedPropertyNames();for(var l in e)if(u.indexOf(l)>-1){var p=o.getMember(l),d=s.Container.resolveType(p.type),c=e[l];if(p.concurrencyMode===a["default"].ConcurrencyMode.Fixed)this.initData[l]=c;else{if(t&&t.converters){var f=t.converters[s.Container.resolveName(d)];f&&(c=f(c))}this.initData[l]=s.Container.convertTo(c,d,p.elementType,t)}}}t&&t.entityBuilder&&t.entityBuilder(this,n.memberDefinitions.asArray(),n),this.changedProperties=void 0,this.entityState=void 0},toString:function(){return this.getType().fullName+"("+(this.Id||this.Name||"")+")"},toJSON:function(){var e={},t=this;return this.getType().memberDefinitions.getPublicMappedProperties().forEach(function(n){t[n.name]instanceof Date&&n.type&&s.Container.resolveType(n.type)===a["default"].DateTimeOffset?e[n.name]=new a["default"].DateTimeOffset(t[n.name]):e[n.name]=t[n.name]}),e},equals:function(e){if(e.getType()!==this.getType())return!1;for(var t=this.getType().memberDefinitions.getKeyProperties(),n=0;n<t.length;n++)if(this[t[n].name]!=e[t[n].name])return!1;return!0},propertyChanging:{dataType:a["default"].Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyChanging||(this._propertyChanging=new a["default"].Event("propertyChanging",this)),this._propertyChanging},set:function(e){this._propertyChanging=e}},propertyChanged:{dataType:a["default"].Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyChanged||(this._propertyChanged=new a["default"].Event("propertyChanged",this)),this._propertyChanged},set:function(e){this._propertyChanged=e}},propertyValidationError:{dataType:a["default"].Event,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,prototypeProperty:!0,get:function(){return this._propertyValidationError||(this._propertyValidationError=new a["default"].Event("propertyValidationError",this)),this._propertyValidationError},set:function(e){this._propertyValidationError=e}},storeProperty:function(e,t){e.concurrencyMode!==a["default"].ConcurrencyMode.Fixed&&(t=s.Container.convertTo(t,e.type,e.elementType));var n=null;if(0!=e.monitorChanges&&(this._propertyChanging||this._propertyChanged||"instancePropertyChanged"in this.constructor)){var r=this[e.name];n=new l(e.name,r,t),this._propertyChanging&&this.propertyChanging.fire(n)}if(0!=e.monitorChanges&&(this._propertyValidationError||"instancePropertyValidationError"in this.constructor)){var i=a["default"].Validation.Entity.ValidateEntityField(this,e,t);if(i.length>0){var r=this[e.name],o=new p(e.name,r,t,i);if(this._propertyValidationError&&this.propertyValidationError.fire(o),"instancePropertyValidationError"in this.constructor&&this.constructor.instancePropertyValidationError.fire(o,this),1==o.cancel)return}}if(1==e.storeOnObject){var u="_"+e.name;this[u]=t}else this.initData[e.name]=t;this.isValidated=!1,0!=e.monitorChanges&&this.entityState==a["default"].EntityState.Unchanged&&(this.entityState=a["default"].EntityState.Modified),this._setPropertyChanged(e),0!=e.monitorChanges&&(this._propertyChanged&&this.propertyChanged.fire(n),"instancePropertyChanged"in this.constructor&&this.constructor.instancePropertyChanged.fire(n,this))},_setPropertyChanged:function(e){0!=e.monitorChanges&&"ValidationErrors"!=e.name&&(this.changedProperties||(this.changedProperties=[]),this.changedProperties.some(function(t){return t.name==e.name})||this.changedProperties.push(e))},retrieveProperty:function(e){if(1==e.storeOnObject){var t="_"+e.name;return this[t]}return this.initData[e.name]},getProperty:function(e,t,n){if(t=a["default"].PromiseHandlerBase.createCallbackSettings(t),void 0!=this[e.name])return void(n instanceof a["default"].Transaction?t.success(this[e.name],n):t.success(this[e.name]));var r=this.context;if(this.context)return r.loadItemProperty(this,e,t,n);try{var i=this,o=this.storeToken||this.getType().storeToken;if(o&&"function"==typeof o.factory){var u=o.factory();return u.onReady().then(function(n){return n.loadItemProperty(i,e,t)})}}catch(l){}s.Guard.raise(new s.Exception("Entity not in context","Invalid operation"))},setProperty:function(e,t,n,r){this[e.name]=t;var i=new a["default"].PromiseHandler;return n=i.createCallback(n),n.success(this[e.name]),i.getPromise()},isValid:function(){return this.isValidated||(this.ValidationErrors=a["default"].Validation.Entity.ValidateEntity(this),this.isValidated=!0),0==this.ValidationErrors.length},isValidated:{dataType:"bool",storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1,value:!1},ValidationErrors:{dataType:Array,elementType:a["default"].Validation.ValidationError,storeOnObject:!0,monitorChanges:!0,notMapped:!0,enumerable:!1},resetChanges:function(){delete this._changedProperties},changedProperties:{dataType:Array,elementType:s.MemberDefinition,storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1},entityState:{dataType:"integer",storeOnObject:!0,monitorChanges:!1,notMapped:!0,enumerable:!1},remove:function(){if(a["default"].ItemStore&&"EntityInstanceRemove"in a["default"].ItemStore)return a["default"].ItemStore.EntityInstanceRemove.apply(this,arguments);throw"not implemented"},save:function(){if(a["default"].ItemStore&&"EntityInstanceSave"in a["default"].ItemStore)return a["default"].ItemStore.EntityInstanceSave.apply(this,arguments);throw"not implemented"},refresh:function(){if(a["default"].ItemStore&&"EntityInstanceRefresh"in a["default"].ItemStore)return a["default"].ItemStore.EntityInstanceRefresh.apply(this,arguments);throw"not implemented"},storeToken:{type:Object,monitorChanges:!1,notMapped:!0,storeOnObject:!0},getFieldUrl:function(e){if(this.context)return this.context.getFieldUrl(this,e);if(this.getType().storeToken&&"function"==typeof this.getType().storeToken.factory){var t=this.getType().storeToken.factory();return t.getFieldUrl(this,e)}if(this.getType().storeToken)try{var n=a["default"].ItemStore._getContextPromise("default",this.getType());if(n instanceof a["default"].EntityContext)return n.getFieldUrl(this,e)}catch(r){}return"#"}},{__setPropertyfunctions:{value:!0,notMapped:!0,enumerable:!1,storeOnObject:!0},__copyPropertiesToInstance:{value:!1,notMapped:!0,enumerable:!1,storeOnObject:!0},inheritedTypeProcessor:function(e){a["default"].ItemStore&&"EntityInheritedTypeProcessor"in a["default"].ItemStore&&a["default"].ItemStore.EntityInheritedTypeProcessor.apply(this,arguments),e.defaultValues={},e.memberDefinitions.asArray().forEach(function(t){t.hasOwnProperty("defaultValue")&&(e.defaultValues[t.name]=t.defaultValue)}),Object.keys(e.defaultValues).length>0&&(e.setDefaultValues=function(t,n){t=t||{};var r=e.defaultValues;for(var i in r)if(!(i in t)){var s=r[i];"function"==typeof s?t[i]=r[i](i,n):t[i]=r[i]}return t})},addEventListener:function(e,t){var n="on"+e;n in this||(this[n]=new a["default"].Event(e,this)),this[n].attach(t)},removeEventListener:function(e,t){var n="on"+e;n in this&&this[n].detach(t)},raiseEvent:function(e,t){var n="on"+e;n in this&&this[n].fire(t)},getFieldNames:function(){return this.memberDefinitions.getPublicMappedPropertyNames()},"from$data.Object":function(e,t,n,r){if(s.Guard.isNullOrUndefined(e))return e;var i;return r&&r.converters&&(i={converters:r.converters}),new this(e,i)}}),a["default"].define=function(e,t,n){if(!t||t instanceof a["default"].ContainerClass||(n=t,t=void 0),!n)throw new Error("json object type is not supported yet");var r={},s=[];if(Object.keys(n).forEach(function(e){var t=n[e];"object"===("undefined"==typeof t?"undefined":i(t))&&("type"in t||"get"in t||"set"in t)?(r[e]=t,t.key&&s.push(t),!("get"in t||"set"in t)||"notMapped"in t&&t.notMapped!==!0||(t.notMapped=!0,t.storeOnObject=!0),"get"in t&&!("set"in t)?t.set=function(){}:"set"in t&&!("get"in t)&&(t.get=function(){})):r[e]={type:t}}),s.length<1){var o;switch(!0){case"id"in r:o="id";break;case"Id"in r:o="Id";break;case"ID"in r:o="ID"}if(o){r[o].key=!0;a["default"].Container.resolveName(r[o].type);r[o].computed=!0}else r.Id={type:"int",key:!0,computed:!0}}var u=a["default"].Entity.extend(e,t,r);return u},a["default"].implementation=function(e){return s.Container.resolveType(e)};n.Event=a["default"].Event,n.Entity=a["default"].Entity;n["default"]=a["default"]},{"../TypeSystem/index.js":32}],45:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.EntityAttachMode",null,null,{},{defaultMode:"Default",AllChanged:function(e){for(var t=e.getType().memberDefinitions.getPublicMappedProperties(),n=0;n<t.length;n++)e._setPropertyChanged(t[n]);e.entityState=s["default"].EntityState.Modified},KeepChanges:function(e){e.changedProperties&&e.changedProperties.length>0?e.entityState=s["default"].EntityState.Modified:e.entityState=s["default"].EntityState.Unchanged},Default:function(e){e.entityState=s["default"].EntityState.Unchanged,e.changedProperties=void 0}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],46:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0});var _index=_dereq_("../TypeSystem/index.js"),_index2=_interopRequireDefault(_index);!function(){_index2["default"].defaults=_index2["default"].defaults||{},_index2["default"].defaults.defaultDatabaseName="JayDataDefault",_index2["default"].defaults.enableRelatedEntityReadMethods=!0,_index2["default"].defaults.relatedEntityReadMethodPrefix="get",_index2["default"].defaults.relatedEntityProxyPrefix="$relatedProxy"}(),_index2["default"].Class.define("$data.StorageModel",null,null,{constructor:function(){this.ComplexTypes=[],this.Enums=[],this.Associations=[]},LogicalType:{},LogicalTypeName:{},PhysicalType:{},PhysicalTypeName:{},EventHandlers:{},TableName:{},TableOptions:{value:void 0},ComplexTypes:{},Enums:{},Associations:{},ContextType:{},Roles:{}},null),_index2["default"].Class.define("$data.Association",null,null,{constructor:function(e){e&&(this.From=e.From,this.FromType=e.FromType,this.FromMultiplicity=e.FromMultiplicity,this.FromPropertyName=e.FromPropertyName,this.To=e.To,this.ToType=e.ToType,this.ToMultiplicity=e.ToMultiplicity,this.ToPropertyName=e.ToPropertyName)},From:{},FromType:{},FromMultiplicity:{},FromPropertyName:{},To:{},ToType:{},ToMultiplicity:{},ToPropertyName:{},ReferentialConstraint:{}},null),_index2["default"].Class.define("$data.ComplexType",_index2["default"].Association,null,{},null),_index2["default"].Class.define("$data.EntityContext",null,null,{constructor:function(e){_index2["default"].ItemStore&&"ContextRegister"in _index2["default"].ItemStore&&_index2["default"].ItemStore.ContextRegister.apply(this,arguments),e.queryCache&&(this.queryCache=e.queryCache),"string"==typeof e&&(e=0===e.indexOf("http")?{name:"oData",oDataServiceHost:e}:{name:"local",databaseName:e}),"provider"in e&&(e.name=e.provider),this.lazyLoad=!1,this.trackChanges=!1,this._entitySetReferences={},this._storageModel=[];var t=this;t._isOK=!1;var n=this._successInitProvider;if(this._successInitProvider=function(e){e instanceof _index2["default"].EntityContext?n(t):n(t,e)},this._storageModel.getStorageModel=function(e){var n=_index.Container.resolveName(e);return t._storageModel[n]},"string"==typeof e.name){var r=e.name;e.name=[r]}var i=[].concat(e.name),s=_index2["default"].PromiseHandlerBase.createCallbackSettings({success:this._successInitProvider,error:this._successInitProvider});this._initStorageModelSync(),t._initializeEntitySets(t.getType()),_index2["default"].StorageProviderLoader.load(i,{success:function(n){t.storageProvider=new n(e,t),t.storageProvider.setContext(t),t.stateManager=new _index2["default"].EntityStateManager(t);var r=t.getType();n.name in r._storageModelCache?t._storageModel=r._storageModelCache[n.name]:(_index2["default"].defaults.enableRelatedEntityReadMethods&&t._applyRelatedEntityMethodsToTypes(),t._initializeStorageModel(),r._storageModelCache[n.name]=t._storageModel),_index2["default"].defaults.enableRelatedEntityReadMethods&&t._applyRelatedEntityMethodsToContext(),e&&e.user&&Object.defineProperty(t,"user",{value:e.user,enumerable:!0}),e&&e.checkPermission&&Object.defineProperty(t,"checkPermission",{value:e.checkPermission,enumerable:!0}),t._initializeStore(s)},error:function(){s.error("Provider fallback failed!")}}),this.addEventListener=function(e,t){var n="on"+e;n in this||(this[n]=new _index2["default"].Event(e,this)),this[n].attach(t)},this.removeEventListener=function(e,t){var n="on"+e;n in this&&this[n].detach(t)},this.raiseEvent=function(e,t){var n="on"+e;n in this&&this[n].fire(t)},this.ready=this.onReady({success:_index2["default"].defaultSuccessCallback,error:function(){_index2["default"].PromiseHandler!==_index2["default"].PromiseHandlerBase?_index2["default"].defaultErrorCallback.apply(this,arguments):_index2["default"].Trace.error(arguments)}})},beginTransaction:function(){function e(e){_index.Guard.isNullOrUndefined(e)||("boolean"==typeof e?r=e:Array.isArray(e)?t=e:n=e)}var t=null,n=null,r=!1;e(arguments[0]),e(arguments[1]),e(arguments[2]);var i=new _index2["default"].PromiseHandler;return n=i.createCallback(n),this.storageProvider._beginTran(t,r,n),i.getPromise()},_isReturnTransaction:function(e){return e instanceof _index2["default"].Base||"returnTransaction"===e},_applyTransaction:function(e,t,n,r,i){i===!0?r instanceof _index2["default"].Transaction?(Array.prototype.push.call(n,r),t.apply(e,n)):this.beginTransaction(function(r){Array.prototype.push.call(n,r),t.apply(e,n)}):t.apply(e,n)},getDataType:function getDataType(dataType){if("string"==typeof dataType){var memDef_dataType=this[dataType];return(void 0===memDef_dataType||null===memDef_dataType)&&(memDef_dataType=eval(dataType)),memDef_dataType}return dataType},_initializeEntitySets:function(e){for(var t=0,n=this._storageModel.length;n>t;t++){var r=this._storageModel[t];this[r.ItemName]=new _index2["default"].EntitySet(r.LogicalType,this,r.ItemName,r.EventHandlers,r.Roles);var i=this[r.ItemName];i.name=r.ItemName,i.tableName=r.TableName,i.tableOptions=r.TableOptions,i.eventHandlers=r.EventHandlers,this._entitySetReferences[r.LogicalType.name]=i,this._initializeActions(i,e,e.getMemberDefinition(r.ItemName));
}},_initializeStore:function(e){this.storageProvider&&this.storageProvider.initializeStore(e)},_initStorageModelSync:function(){for(var e=this.getType().memberDefinitions.asArray(),t=0;t<e.length;t++){var n=e[t];if("dataType"in n){var r=_index.Container.resolveType(n.dataType);if(r&&r.isAssignableTo&&r.isAssignableTo(_index2["default"].EntitySet)){var i=_index.Container.resolveType(n.elementType),s=new _index2["default"].StorageModel;s.TableName=n.tableName||n.name,s.TableOptions=n.tableOptions,s.ItemName=n.name,s.LogicalType=i,s.LogicalTypeName=i.name,s.PhysicalTypeName=_index2["default"].EntityContext._convertLogicalTypeNameToPhysical(s.LogicalTypeName),s.ContextType=this.getType(),s.Roles=n.roles,n.indices&&(s.indices=n.indices),n.beforeCreate&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.beforeCreate=n.beforeCreate),n.beforeRead&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.beforeRead=n.beforeRead),n.beforeUpdate&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.beforeUpdate=n.beforeUpdate),n.beforeDelete&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.beforeDelete=n.beforeDelete),n.afterCreate&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.afterCreate=n.afterCreate),n.afterRead&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.afterRead=n.afterRead),n.afterUpdate&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.afterUpdate=n.afterUpdate),n.afterDelete&&(s.EventHandlers||(s.EventHandlers={}),s.EventHandlers.afterDelete=n.afterDelete),this._storageModel.push(s);var a=_index.Container.resolveName(i);this._storageModel[a]=s}}}},_initializeStorageModel:function(){this.getType().memberDefinitions.asArray();if("undefined"==typeof intellisense)for(var e=0;e<this._storageModel.length;e++){var t=this._storageModel[e],n={};t.Associations=t.Associations||[],t.ComplexTypes=t.ComplexTypes||[],t.Enums=t.Enums||[];for(var r=0;r<t.LogicalType.memberDefinitions.getPublicMappedProperties().length;r++){var i=t.LogicalType.memberDefinitions.getPublicMappedProperties()[r],s=_index.Container.resolveType(i.dataType);if((this.storageProvider.supportedDataTypes.indexOf(s)>-1||s.isAssignableTo&&s.isAssignableTo(_index2["default"].Enum))&&_index.Guard.isNullOrUndefined(i.inverseProperty)){var a=JSON.parse(JSON.stringify(i));a.dataType=s,n[i.name]=a,s.isAssignableTo&&s.isAssignableTo(_index2["default"].Enum)&&this._build_EnumDefinition(n,t,s,i)}else if(this._buildDbType_navigationPropertyComplite(i,s,t),(s===_index2["default"].Array||s.isAssignableTo&&s.isAssignableTo(_index2["default"].EntitySet))&&i.inverseProperty&&"$$unbound"!==i.inverseProperty)this._buildDbType_Collection_OneManyDefinition(n,t,s,i);else if(i.inverseProperty)if("$$unbound"===i.inverseProperty)s===_index2["default"].Array?this._buildDbType_Collection_OneManyDefinition(n,t,s,i):this._buildDbType_ElementType_OneManyDefinition(n,t,s,i);else{var o=s.memberDefinitions.getMember(i.inverseProperty);if(o)if(o.elementType){var u=_index.Container.resolveType(o.elementType);u===t.LogicalType?this._buildDbType_ElementType_OneManyDefinition(n,t,s,i):"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Inverse property not valid, refereed item element type not match: "+t.LogicalTypeName,", property: "+i.name))}else this._buildDbType_ElementType_OneOneDefinition(n,t,s,i);else"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Inverse property not valid"))}else this._buildDbType_addComplexTypePropertyDefinition(n,t,s,i)}this._buildDbType_modifyInstanceDefinition(n,t,this);var l={};l.convertTo=this._buildDbType_generateConvertToFunction(t,this),this._buildDbType_modifyClassDefinition(l,t,this),t.PhysicalType=_index2["default"].Class.define(t.PhysicalTypeName,_index2["default"].Entity,t.LogicalType.container,n,l)}},_initializeActions:function(e,t,n){if(n&&n.actions)for(var r=Object.keys(n.actions),i=0;i<r.length;i++){var s=r[i],a=n.actions[s];if("function"==typeof a)e[s]=a;else{var o=_index2["default"].MemberDefinition.translateDefinition(a,s,t);o instanceof _index2["default"].MemberDefinition&&o.kind===_index2["default"].MemberTypes.method&&(e[s]=o.method)}}},_buildDbType_navigationPropertyComplite:function(e,t,n){if(e.inverseProperty){var r=null;r=t===_index2["default"].Array||t.isAssignableTo&&t.isAssignableTo(_index2["default"].EntitySet)?this._storageModel.getStorageModel(_index.Container.resolveType(e.elementType)):this._storageModel.getStorageModel(t);var i=r.LogicalType.memberDefinitions.getMember(e.inverseProperty);i&&(i.inverseProperty?i.inverseProperty!=e.name&&"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Inverse property mismatch")):i.inverseProperty=e.name)}else{var s=null;if(t===_index2["default"].Array||t.isAssignableTo&&t.isAssignableTo(_index2["default"].EntitySet)){var r=this._storageModel.getStorageModel(_index.Container.resolveType(e.elementType));if(r){s=[];for(var a=r.LogicalType.memberDefinitions.getPublicMappedProperties(),o=0;o<a.length;o++){var u=a[o];u.inverseProperty==e.name&&_index.Container.resolveType(u.dataType)===_index.Container.resolveType(n.LogicalType)&&s.push(u)}}}else{var r=this._storageModel.getStorageModel(t);if(r){s=[];for(var a=r.LogicalType.memberDefinitions.getPublicMappedProperties(),o=0;o<a.length;o++){var u=a[o];u.elementType&&u.inverseProperty==e.name&&_index.Container.resolveType(u.elementType)===n.LogicalType?s.push(u):u.inverseProperty==e.name&&_index.Container.resolveType(u.dataType)===n.LogicalType&&s.push(u)}}}if(s){s.length>1&&"undefined"!=typeof intellisense&&_index.Guard.raise(new _index.Exception("More than one inverse property refer to this member definition: "+e.name+", type: "+_index.Container.resolveName(n.LogicalType)));var l=s.pop();l&&(e.inverseProperty=l.name)}}},_buildDbType_generateConvertToFunction:function(e){return function(e){return e}},_buildDbType_modifyInstanceDefinition:function(e,t){},_buildDbType_modifyClassDefinition:function(e,t){},_buildDbType_addComplexTypePropertyDefinition:function(e,t,n,r){this._addNavigationPropertyDefinition(e,r,r.name,_index2["default"].MemberTypes.complexProperty);var i=this._createComplexElement(t.LogicalType,"",r.name,n,"","");t.ComplexTypes[r.name]=i,t.ComplexTypes.push(i)},_buildDbType_Collection_OneManyDefinition:function(e,t,n,r){var i=_index.Container.resolveType(r.elementType);(void 0===i||null===i)&&"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Element type definition error","Field definition",r));var s=this._storageModel.getStorageModel(i);s||"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("No EntitySet definition for the following element type","Field definition",r)),this._addNavigationPropertyDefinition(e,r,r.name);var a="$$unbound"===r.inverseProperty?"$$unbound":"0..1",o=this._addAssociationElement(t.LogicalType,a,r.name,s.LogicalType,"*",r.inverseProperty);t.Associations[r.name]=o,t.Associations.push(o)},_buildDbType_ElementType_OneManyDefinition:function(e,t,n,r){var i=_index.Container.resolveType(r.dataType);(void 0===i||null===i)&&"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Element type definition error","Field definition",r));var s=this._storageModel.getStorageModel(i);s||"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("No EntitySet definition for the following element type","Field definition",r)),this._addNavigationPropertyDefinition(e,r,r.name);var a="$$unbound"===r.inverseProperty?"$$unbound":"*",o=this._addAssociationElement(t.LogicalType,a,r.name,s.LogicalType,"0..1",r.inverseProperty);t.Associations[r.name]=o,t.Associations.push(o)},_buildDbType_ElementType_OneOneDefinition:function(e,t,n,r){var i=_index.Container.resolveType(r.dataType);(void 0===i||null===i)&&"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("Element type definition error","Field definition",r));var s=this._storageModel.getStorageModel(i);s||"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("No EntitySet definition following element type","Field definition",r));var a=s.LogicalType.memberDefinitions.getMember(r.inverseProperty);a.required||r.required||"undefined"==typeof intellisense&&"undefined"==typeof intellisense&&_index.Guard.raise(new _index.Exception("In one to one connection, one side must required!","One to One connection",r)),this._addNavigationPropertyDefinition(e,r,r.name);var o=this._addAssociationElement(t.LogicalType,r.required?"0..1":"1",r.name,s.LogicalType,r.required?"1":"0..1",r.inverseProperty);t.Associations[r.name]=o,t.Associations.push(o)},_addNavigationPropertyDefinition:function(e,t,n,r){var i=JSON.parse(JSON.stringify(t));i.dataType=_index2["default"].EntitySet,i.notMapped=!0,i.kind=r?r:_index2["default"].MemberTypes.navProperty,i.association=n,e[t.name]=i},_addAssociationElement:function(e,t,n,r,i,s){return new _index2["default"].Association({From:e.name,FromType:e,FromMultiplicity:t,FromPropertyName:n,To:r.name,ToType:r,ToMultiplicity:i,ReferentialConstraint:[],ToPropertyName:s})},_createComplexElement:function(e,t,n,r,i,s){return new _index2["default"].ComplexType({From:e.name,FromType:e,FromMultiplicity:t,FromPropertyName:n,To:r.name,ToType:r,ToMultiplicity:i,ReferentialConstraint:[],ToPropertyName:s})},_build_EnumDefinition:function(e,t,n,r){t.Enums.push(n);var i=_index.Container.resolveName(n),s=this.storageProvider.fieldConverter,a=function(e){e[i]=function(t){return e["$data.Enum"].call(this,t,n)}};for(var o in s)!s[o][i]&&s[o]["$data.Enum"]&&a(s[o])},_successInitProvider:function(e,t){if(e instanceof _index2["default"].EntityContext&&void 0!==e._isOK)if(t){if(e._isOK=t,e.onReadyFunction){for(var n=0;n<e.onReadyFunction.length;n++)e.onReadyFunction[n].error(t);e.onReadyFunction=void 0}}else if(e._isOK=!0,e.onReadyFunction){for(var n=0;n<e.onReadyFunction.length;n++)e.onReadyFunction[n].success(e);e.onReadyFunction=void 0}},onReady:function(e){var t=new _index2["default"].PromiseHandler,n=t.createCallback(e);return this._isOK===!0?n.success(this):this._isOK!==!1?n.error(this._isOK):(this.onReadyFunction=this.onReadyFunction||[],this.onReadyFunction.push(n)),t.getPromise()},ready:{type:_index2["default"].Promise},getEntitySetFromElementType:function getEntitySetFromElementType(elementType){var result=this._entitySetReferences[elementType];if(!result)try{result=this._entitySetReferences[eval(elementType).name]}catch(ex){}return result},executeQuery:function(e,t,n){var r=new _index2["default"].Query(e.expression,e.defaultType,this);r.transaction=n instanceof _index2["default"].Transaction?n:void 0;var i=this._isReturnTransaction(n);t=_index2["default"].PromiseHandlerBase.createCallbackSettings(t);var s=this,a={};a.success=s.executeQuerySuccess(s,i,t),a.error=s.executeQueryError(s,i,t);var o=r.getEntitySets(),u=function(){var e=!0,t=s,n=function(n){n===!1&&(e=!1),e?r.transaction?_index2["default"].QueryCache&&_index2["default"].QueryCache.isInCache(s,r)?_index2["default"].QueryCache.executeQuery(s,r,a):t.storageProvider.executeQuery(r,a):t.beginTransaction(function(e){r.transaction=e,_index2["default"].QueryCache&&_index2["default"].QueryCache.isInCache(s,r)?_index2["default"].QueryCache.executeQuery(s,r,a):t.storageProvider.executeQuery(r,a)}):(r.rawDataList=[],r.result=[],a.success(r))},i=0,u=function l(t){t===!1&&(e=!1);var s=o[i];if(s.beforeRead){i++;var a=s.beforeRead.call(this,o,r);"function"==typeof a?a.call(this,i<o.length&&e?l:n,o,r):(a===!1&&(e=!1),i<o.length&&e?l():n())}else n()};o.length?u():n()};this.user&&this.checkPermission?this.checkPermission(r.expression.nodeType===_index2["default"].Expressions.ExpressionType.BatchDelete?_index2["default"].Access.DeleteBatch:_index2["default"].Access.Read,this.user,o,{success:u,error:a.error}):u()},executeQuerySuccess:function(e,t,n){return function(r){_index2["default"].QueryCache&&_index2["default"].QueryCache.isCacheable(e,r)&&_index2["default"].QueryCache.addToCache(e,r),r.buildResultSet(e),_index2["default"].ItemStore&&"QueryResultModifier"in _index2["default"].ItemStore&&_index2["default"].ItemStore.QueryResultModifier.call(e,r);var i;if(r.expression.nodeType===_index2["default"].Expressions.ExpressionType.Single||r.expression.nodeType===_index2["default"].Expressions.ExpressionType.Find||r.expression.nodeType===_index2["default"].Expressions.ExpressionType.Count||r.expression.nodeType===_index2["default"].Expressions.ExpressionType.BatchDelete||r.expression.nodeType===_index2["default"].Expressions.ExpressionType.Some||r.expression.nodeType===_index2["default"].Expressions.ExpressionType.Every){if(1!==r.result.length)return void n.error(new _index.Exception("result count failed"));i=r.result[0]}else if(r.expression.nodeType===_index2["default"].Expressions.ExpressionType.First){if(0===r.result.length)return void n.error(new _index.Exception("result count failed"));i=r.result[0]}else"number"==typeof r.__count&&r.result&&(r.result.totalCount=r.__count),e.storageProvider._buildContinuationFunction(e,r),i=r.result;var s=function(){e._applyTransaction(n,n.success,[i],r.transaction,t)},a=0,o=r.getEntitySets(),u=function l(){var e=o[a];if(e.afterRead){a++;var t=e.afterRead.call(this,i,o,r);"function"==typeof t?t.call(this,a<o.length?l:s,i,o,r):a<o.length?l():s()}else s()};o.length?u():s()}},executeQueryError:function(e,t,n){return function(){t?n.error.apply(this,arguments):n.error.apply(this,Array.prototype.filter.call(arguments,function(e){return!(e instanceof _index2["default"].Transaction)}))}},batchExecuteQuery:function e(t,n,r){var i=new _index2["default"].PromiseHandler,s=i.createCallback(n),a=this,o={count:"length",length:"length",forEach:"forEach",toArray:"toArray",single:"single",some:"some",every:"every",first:"first",removeAll:"batchDelete"},u={count:"CountExpression",length:"CountExpression",forEach:"ForEachExpression",toArray:"ToArrayExpression",single:"SingleExpression",some:"SomeExpression",every:"EveryExpression",first:"FirstExpression",removeAll:"BatchDeleteExpression"},l=function(){return i.getPromise()};if("number"!=typeof t.length)return s.error(new _index.Exception("QueryableOptions array parameter missing","Invalid arguments")),l();for(var p=[],d=0;d<t.length;d++){var c={};if(t[d]instanceof _index2["default"].Queryable)c.queryable=t[d],c.method="toArray";else if(t[d].queryable instanceof _index2["default"].Queryable)c.queryable=t[d].queryable,c.method=t[d].method||"toArray";else{if(!(t[d][0]instanceof _index2["default"].Queryable))return s.error(new _index.Exception("$data.Queryable is missing in queryableOptions at index "+d,"Invalid arguments")),l();c.queryable=t[d][0],c.method=t[d][1]||"toArray"}if(c.queryable.entityContext!==a)return s.error(new _index.Exception("Queryable at index "+d+" contains different entity context","Invalid arguments")),l();c.queryable._checkOperation(o[c.method]||c.method),p.push(c)}for(var f=[],d=0;d<p.length;d++){var c=p[d],y=u[c.method]||c.method;if(!(y&&_index2["default"].Expressions[y]&&_index2["default"].Expressions[y].isAssignableTo(_index2["default"].Expressions.FrameOperator)))return s.error(new _index.Exception("Invalid frame method '"+y+"' in queryableOptions at index "+d,"Invalid arguments")),l();var h=_index.Container["create"+y](c.queryable.expression),m=_index.Container.createQueryExpressionCreator(c.queryable.entityContext);try{var x=m.Visit(h);c.queryable.entityContext.log({event:"EntityExpression",data:x});var g=_index.Container.createQueryable(c.queryable,x);f.push(g)}catch(v){return s.error(v),l()}}var E=[];if(a.storageProvider.supportedContextOperation&&a.storageProvider.supportedContextOperation.batchExecuteQuery){var b=_index.Container.createBatchExecuteQueryExpression(f.map(function(e){return new _index2["default"].Query(e.expression,e.defaultType,a)})),e=_index.Container.createQueryable(a,b);a.executeQuery(e,{success:function(t){for(var n=[],r=!1,i=null,o=0;o<t.length&&!r;o++){var u=t[o];a.executeQuerySuccess(a,T,{success:function(e){n.push(e)},error:function(e){r=!0,i=e}})(u)}r?s.error(i):a._applyTransaction(s,s.success,[n],e.transaction,T)},error:s.error},r)}else{var T=this._isReturnTransaction(r),C=function _(e,t,n,r){var i=e[t];return i?void a.executeQuery(f[t],{success:function(e,r){E.push(e),_(f,t+1,n,r)},error:n.error},r):n.success(r)};C(f,0,{success:function(e){a._applyTransaction(s,s.success,[E],e,T)},error:s.error},r)}return l()},saveChanges:function(e,t){_index2["default"].QueryCache&&_index2["default"].QueryCache.reset(this);for(var n=[],r=this.stateManager.trackedEntities,i=new _index2["default"].PromiseHandler,s=i.createCallback(e),a=i.getPromise(),o=this._isReturnTransaction(t),u=[];r.length>0;){for(var l=[],p=0;p<r.length;p++){var d=r[p],c=this._storageModel.getStorageModel(d.data.getType());if(d.data.entityState==_index2["default"].EntityState.Unchanged)d.skipSave=!0,u.push(d.data);else if(d.data.entityState==_index2["default"].EntityState.Modified)if(d.data.changedProperties){var f=d.data.changedProperties.some(function(e){var t=c.PhysicalType.memberDefinitions.getMember(e.name);if(t.kind==_index2["default"].MemberTypes.navProperty){var n=c.Associations[t.association],r=n.FromMultiplicity+n.ToMultiplicity;return"*0..1"==r||"0..11"==r}return!0});f||(d.skipSave=!0,u.push(d.data))}else d.skipSave=!0,u.push(d.data);this.processEntityTypeBeforeEventHandler(u,d);for(var y=[],h=c.PhysicalType.memberDefinitions.asArray(),m=0;m<h.length;m++){var x=h[m];x.kind==_index2["default"].MemberTypes.navProperty&&y.push(x)}for(var g=0;g<y.length;g++)for(var v=y[g],E=c.Associations[v.name],b=v.name,T=E.ToPropertyName,C=[].concat(d.data[b]),_=0;_<C.length;_++){var S=C[_];if(S){var P=S[T],M=E.FromMultiplicity+E.ToMultiplicity;if("$$unbound"===E.FromMultiplicity)if(S instanceof _index2["default"].Array){d.dependentOn=d.dependentOn||[];for(var j=0;j<S.length;j++){S[j];d.dependentOn.indexOf(S)<0&&S.skipSave!==!0&&d.dependentOn.push(S)}}else d.dependentOn=d.dependentOn||[],d.dependentOn.indexOf(S)<0&&S.skipSave!==!0&&d.dependentOn.push(S);else{switch(M){case"*0..1":P?P instanceof Array?-1==P.indexOf(d.data)&&(P.push(d.data),S.initData[T]=P,S._setPropertyChanged(E.ToType.getMemberDefinition(T))):"undefined"==typeof intellisense&&_index.Guard.raise("Item must be array or subtype of array"):(S.initData[T]=[d.data],S._setPropertyChanged(E.ToType.getMemberDefinition(T)));break;default:P?P!==d.data&&"undefined"==typeof intellisense&&_index.Guard.raise("Integrity check error! Item assigned to another entity!"):(S.initData[T]=d.data,S._setPropertyChanged(E.ToType.getMemberDefinition(T)))}switch(M){case"*0..1":case"0..11":d.dependentOn=d.dependentOn||[],d.dependentOn.indexOf(S)<0&&S.skipSave!==!0&&d.dependentOn.push(S)}}S.entityState||this.discoverDependentItemEntityState(S),-1==l.indexOf(S)&&l.push(S)}}}for(var p=0;p<r.length;p++){var w=r[p];w.skipSave!==!0&&n.push(w)}r=[];for(var p=0;p<l.length;p++){var A=l[p];u.some(function(e){return e==A})||n.some(function(e){return e.data==A})||r.push({data:A,entitySet:this.getEntitySetFromElementType(A.getType().name)})}}for(var g=0;g<n.length;g++){var O=n[g];if(O.dependentOn){for(var N=[],p=0;p<O.dependentOn.length;p++)u.indexOf(O.dependentOn[p])<0?N.push(O.dependentOn[p]):(O.additionalDependentOn=O.additionalDependentOn||[],O.additionalDependentOn.push(O.dependentOn[p]));O.dependentOn=N}}u=null;var k=this;if(0==n.length)return this.stateManager.trackedEntities.length=0,k._applyTransaction(s,s.success,[0],t,o),a;for(var V=[],p=0;p<n.length;p++){var w=n[p];if(w.data.entityState===_index2["default"].EntityState.Added)for(var g=0;g<w.data.getType().memberDefinitions.getPublicMappedProperties().length;g++){var G=w.data.getType().memberDefinitions.getPublicMappedProperties()[g],B=_index.Container.resolveType(G.type);if(G.required&&!G.computed&&!w.data[G.name]&&!G.isDependentProperty)switch(B){case _index2["default"].String:case _index2["default"].Number:case _index2["default"].Float:case _index2["default"].Decimal:case _index2["default"].Integer:case _index2["default"].Int16:case _index2["default"].Int32:case _index2["default"].Int64:case _index2["default"].Byte:case _index2["default"].SByte:case _index2["default"].Date:case _index2["default"].Boolean:w.data[G.name]=_index.Container.getDefault(G.dataType)}}w.data.entityState!==_index2["default"].EntityState.Added&&w.data.entityState!==_index2["default"].EntityState.Modified||w.data.isValid()||V.push({item:w.data,errors:w.data.ValidationErrors})}if(V.length>0)return s.error(V),a;for(var D=_index2["default"].Access.None,$={},I=[],p=0;p<n.length;p++){var L=n[p],F=L.entitySet.elementType.name;I.indexOf(L.entitySet)<0&&I.push(L.entitySet);var R=this._entitySetReferences[F];if(R.beforeCreate||R.beforeUpdate||R.beforeDelete||this.user&&this.checkPermission)switch($[F]||($[F]={}),L.data.entityState){case _index2["default"].EntityState.Added:D|=_index2["default"].Access.Create,R.beforeCreate&&($[F].createAll||($[F].createAll=[]),$[F].createAll.push(L));break;case _index2["default"].EntityState.Modified:D|=_index2["default"].Access.Update,R.beforeUpdate&&($[F].modifyAll||($[F].modifyAll=[]),$[F].modifyAll.push(L));break;case _index2["default"].EntityState.Deleted:D|=_index2["default"].Access.Delete,R.beforeDelete&&($[F].deleteAll||($[F].deleteAll=[]),$[F].deleteAll.push(L))}}var q,U=function(e){if(e===!1&&(q="async",n.length=0),n.length){var r={success:function(e){k._postProcessSavedItems(s,n,e,o)},error:function(){o?s.error.apply(this,arguments):s.error.apply(this,Array.prototype.filter.call(arguments,function(e){return!(e instanceof _index2["default"].Transaction)}))}};t instanceof _index2["default"].Transaction?k.storageProvider.saveChanges(r,n,t):k.beginTransaction(!0,function(e){k.storageProvider.saveChanges(r,n,e)})}else q?s.error(new _index.Exception("Cancelled event in "+q,"CancelEvent")):k._applyTransaction(s,s.success,[0],t,o)},Q=Object.getOwnPropertyNames($),p=0,H=["beforeUpdate","beforeDelete","beforeCreate"],J={beforeCreate:"createAll",beforeDelete:"deleteAll",beforeUpdate:"modifyAll"},z=function K(e){if(e===!1)return q="async",n.length=0,void U(e);var t=k._entitySetReferences[Q[p]],r=H.pop(),i=$[Q[p]],s=i[J[r]];if(s){for(var a=[],o=0;o<s.length;o++)a.push(s[o].data);H.length||(H=["beforeUpdate","beforeDelete","beforeCreate"],p++);var u=t[r].call(k,a);if("function"==typeof u)u.call(k,p<Q.length&&!q?K:U,a);else if(u===!1){q=t.name+"."+r;for(var l=0;l<s.length;l++){var d=s[l],c=n.indexOf(d);n.splice(c,1)}U()}else p<Q.length&&!q?K():U()}else H.length||(H=["beforeUpdate","beforeDelete","beforeCreate"],p++),p<Q.length&&!q?K():U()};return this.user&&this.checkPermission?this.checkPermission(D,this.user,I,{success:function(){p<Q.length?z():U()},error:s.error}):p<Q.length?z():U(),a},discoverDependentItemEntityState:function(e){e.storeToken===this.storeToken?e.entityState=e.changedProperties&&e.changedProperties.length?_index2["default"].EntityState.Modified:_index2["default"].EntityState.Unchanged:e.storeToken&&this.storeToken&&e.storeToken.typeName===this.storeToken.typeName&&JSON.stringify(e.storeToken.args)===JSON.stringify(this.storeToken.args)?e.entityState=e.changedProperties&&e.changedProperties.length?_index2["default"].EntityState.Modified:_index2["default"].EntityState.Unchanged:e.entityState=_index2["default"].EntityState.Added},processEntityTypeBeforeEventHandler:function(e,t){if(!t.skipSave){var n=t.data,r=n.getType(),i=n.entityState;switch(!0){case i===_index2["default"].EntityState.Added&&r.onbeforeCreate instanceof _index2["default"].Event:r.onbeforeCreate.fireCancelAble(n)===!1&&(t.skipSave=!0,e.push(n));break;case i===_index2["default"].EntityState.Modified&&r.onbeforeUpdate instanceof _index2["default"].Event:r.onbeforeUpdate.fireCancelAble(n)===!1&&(t.skipSave=!0,e.push(n));break;case i===_index2["default"].EntityState.Deleted&&r.onbeforeDelete instanceof _index2["default"].Event:r.onbeforeDelete.fireCancelAble(n)===!1&&(t.skipSave=!0,e.push(n))}}},processEntityTypeAfterEventHandler:function(e){var t=e.data,n=t.getType(),r=t.entityState;switch(!0){case r===_index2["default"].EntityState.Added&&n.onafterCreate instanceof _index2["default"].Event:n.onafterCreate.fire(t);break;case r===_index2["default"].EntityState.Modified&&n.onafterUpdate instanceof _index2["default"].Event:n.onafterUpdate.fire(t);break;case r===_index2["default"].EntityState.Deleted&&n.onafterDelete instanceof _index2["default"].Event:n.onafterDelete.fire(t)}},bulkInsert:function(e,t,n,r){var i=new _index2["default"].PromiseHandler;if(r=i.createCallback(r),"string"==typeof e){var s;for(var a in this._entitySetReferences){var o=this._entitySetReferences[a];if(o.tableName===e){s=o;break}}s||(s=this[e]),e=s}return e?this.storageProvider.bulkInsert(e,t,n,r):r.error(new _index.Exception("EntitySet not found")),i.getPromise()},prepareRequest:function(){},_postProcessSavedItems:function(e,t,n,r){this.ChangeCollector&&this.ChangeCollector instanceof _index2["default"].Notifications.ChangeCollectorBase&&this.ChangeCollector.processChangedData(t);for(var i={},s=this,a=0;a<t.length;a++){var o=t[a];o.data.storeToken||(o.data.storeToken=s.storeToken),this.processEntityTypeAfterEventHandler(o);var u=o.data.entityState;o.data.entityState=_index2["default"].EntityState.Unchanged,o.data.changedProperties=[],o.physicalData=void 0;var l=o.entitySet.elementType.name,p=s._entitySetReferences[l],d=void 0;switch(u){case _index2["default"].EntityState.Added:d="added";break;case _index2["default"].EntityState.Deleted:d="deleted";break;case _index2["default"].EntityState.Modified:d="updated"}if(d&&this.raiseEvent(d,o),p.afterCreate||p.afterUpdate||p.afterDelete)switch(i[l]||(i[l]={}),u){case _index2["default"].EntityState.Added:p.afterCreate&&(i[l].createAll||(i[l].createAll=[]),i[l].createAll.push(o));break;case _index2["default"].EntityState.Modified:p.afterUpdate&&(i[l].modifyAll||(i[l].modifyAll=[]),i[l].modifyAll.push(o));break;case _index2["default"].EntityState.Deleted:p.afterDelete&&(i[l].deleteAll||(i[l].deleteAll=[]),i[l].deleteAll.push(o))}}var c=Object.getOwnPropertyNames(i),a=0,s=this,f=["afterUpdate","afterDelete","afterCreate"],y={afterCreate:"createAll",afterDelete:"deleteAll",afterUpdate:"modifyAll"},h=function(){s.trackChanges||s.stateManager.reset(),s._applyTransaction(e,e.success,[t.length],n,r)},m=function x(){var e=s._entitySetReferences[c[a]],t=f.pop(),n=i[c[a]],r=n[y[t]];if(r){for(var o=[],u=0;u<r.length;u++)o.push(r[u].data);f.length||(f=["afterUpdate","afterDelete","afterCreate"],a++);var l=e[t].call(s,o);"function"==typeof l?l.call(s,a<c.length?x:h,o):a<c.length?x():h()}else f.length||(f=["afterUpdate","afterDelete","afterCreate"],a++),a<c.length?x():h()};a<c.length?m():h()},forEachEntitySet:function(e,t){for(var n in this._entitySetReferences){var r=this._entitySetReferences[n];e.call(t,r)}},loadItemProperty:function(e,t,n,r){_index.Guard.requireType("entity",e,_index2["default"].Entity);var i="string"==typeof t?e.getType().memberDefinitions.getMember(t):t,s=this._isReturnTransaction(r);if(void 0!=e[i.name]){var a=new _index2["default"].PromiseHandler;a.createCallback(n);return this._applyTransaction(n,n.success,[e[i.name]],r,s),a.getPromise()}var o=!0,u=this._storageModel.getStorageModel(e.getType().fullName),l=_index.Container.resolveType(i.dataType);if(l===_index2["default"].Array||l.isAssignableTo&&l.isAssignableTo(_index2["default"].EntitySet))l=_index.Container.resolveType(i.elementType),o=!1;else{for(var p,d=0;d<u.Associations.length;d++){var c=u.Associations[d];if(c.FromPropertyName==i.name){p=c;break}}p&&"0..1"===p.FromMultiplicity&&"1"===p.ToMultiplicity&&(o=!1)}var f=u.LogicalType.memberDefinitions.getKeyProperties();if(o===!0){for(var y="function (e) { return",h={},m=0;m<f.length;m++){var x=f[m];m>0&&(y+=" &&"),y+=" e."+x.name+" == this.key"+m,h["key"+m]=e[x.name]}y+="; }";var g=this.getEntitySetFromElementType(e.getType());return g.map("function (e) { return e."+i.name+" }").single(y,h,n,r)}for(var y="function (e) { return",h={},m=0;m<f.length;m++){var x=f[m];m>0&&(y+=" &&"),y+=" e."+i.inverseProperty+"."+x.name+" == this.key"+m,h["key"+m]=e[x.name]}y+="; }";var g=this.getEntitySetFromElementType(l);return g.filter(y,h).toArray(n,r)},getTraceString:function(e){var t=new _index2["default"].Query(e.expression,e.defaultType,this);return this.storageProvider.getTraceString(t)},log:function(e){},resolveBinaryOperator:function(e,t,n){return this.storageProvider.resolveBinaryOperator(e,t,n)},resolveUnaryOperator:function(e,t,n){return this.storageProvider.resolveUnaryOperator(e,t,n)},resolveFieldOperation:function(e,t,n){return this.storageProvider.resolveFieldOperation(e,t,n)},resolveSetOperations:function(e,t,n){return this.storageProvider.resolveSetOperations(e,t,n)},resolveTypeOperations:function(e,t,n){return this.storageProvider.resolveTypeOperations(e,t,n)},resolveContextOperations:function(e,t,n){return this.storageProvider.resolveContextOperations(e,t,n)},_generateServiceOperationQueryable:function(e,t,n,r){"undefined"!=typeof console&&console.log&&console.log("Obsolate: _generateServiceOperationQueryable, $data.EntityContext");for(var i=[],s=0;s<r.length;s++){var a={};a[r[s]]=_index.Container.resolveType(_index.Container.getTypeName(n[s])),i.push(a)}var o=_index2["default"].EntityContext.generateServiceOperation({serviceName:e,returnType:_index2["default"].Queryable,elementType:this[t].elementType,params:i});return o.apply(this,n)},attach:function(e,t){e instanceof _index2["default"].EntityWrapper&&(e=e.getEntity());var n=this.getEntitySetFromElementType(e.getType());return n.attach(e,t)},attachOrGet:function(e,t){e instanceof _index2["default"].EntityWrapper&&(e=e.getEntity());var n=this.getEntitySetFromElementType(e.getType());return n.attachOrGet(e,t)},addMany:function(e){var t=this;return e.forEach(function(e){t.add(e)}),e},add:function(e){e instanceof _index2["default"].EntityWrapper&&(e=e.getEntity());var t=this.getEntitySetFromElementType(e.getType());return t.add(e)},remove:function(e){e instanceof _index2["default"].EntityWrapper&&(e=e.getEntity());var t=this.getEntitySetFromElementType(e.getType());return t.remove(e)},storeToken:{type:Object},getFieldUrl:function(e,t,n){try{var r="string"==typeof n?this[n]:n,i="string"==typeof t?t:t.name;if(e instanceof _index2["default"].Entity)r=this.getEntitySetFromElementType(e.getType());else if(!_index.Guard.isNullOrUndefined(e)&&e.constructor!==_index2["default"].Object){var s=r.elementType.memberDefinitions.getKeyProperties()[0],a={};a[s.name]=e,e=a}return e instanceof _index2["default"].Entity||(e=new r.elementType(e)),this.storageProvider.getFieldUrl(e,i,r)}catch(o){}return"#"},_applyRelatedEntityMethodsToContext:function(){if("oData"===this.storageProvider.name)for(var e in this._entitySetReferences){var t=this._entitySetReferences[e],n=_index2["default"].defaults.relatedEntityReadMethodPrefix+t.name;n in t||(t[n]=this._relatedEntityGetMethod(t.elementType,void 0,this)),n in this||(this[n]=this._relatedEntityGetMethod(t.elementType,void 0,this))}},_applyRelatedEntityMethodsToTypes:function(){if("oData"===this.storageProvider.name)for(var e in this._entitySetReferences)for(var t=this._entitySetReferences[e].elementType,n=t.memberDefinitions.getPublicMappedProperties(),r=0;r<n.length;r++){var i=n[r],s=null;if(i.inverseProperty&&_index.Container.resolveType(i.dataType)===_index2["default"].Array&&(s=_index.Container.resolveType(i.elementType))&&s.isAssignableTo&&s.isAssignableTo(_index2["default"].Entity)){var a=_index2["default"].defaults.relatedEntityReadMethodPrefix+i.name;t.getMemberDefinition(a)||t.addMember(a,this._relatedEntityGetMethod(s,i))}}},_createRelatedEntityProxyClass:function(e){var t=e.namespace+_index2["default"].defaults.relatedEntityProxyPrefix+e.name;if(!_index.Container.isTypeRegistered(t)){for(var n={},r=e.memberDefinitions.getPublicMappedProperties(),i=0;i<r.length;i++){var s=r[i],a=null;if(s.inverseProperty&&_index.Container.resolveType(s.dataType)===_index2["default"].Array&&(a=_index.Container.resolveType(s.elementType))&&a.isAssignableTo&&a.isAssignableTo(_index2["default"].Entity)){
var o=_index2["default"].defaults.relatedEntityReadMethodPrefix+s.name;n[o]=this._relatedEntityGetMethod(a,s)}}_index2["default"].Class.define(t,_index2["default"].RelatedEntityProxy,null,n,null)}return _index.Container.resolveType(t)},_relatedEntityGetMethod:function(e,t,n){var r=this,i=e.memberDefinitions.getKeyProperties();return function(s){var a=r._createRelatedEntityProxyClass(e);if(1===i.length&&"object"!==("undefined"==typeof s?"undefined":_typeof(s))){var o={};o[i[0].name]=s,s=o}if("object"!==("undefined"==typeof s?"undefined":_typeof(s)))throw new _index.Exception("Key parameter is invalid");return new a(s,t,e,this,n||(this.context instanceof _index2["default"].EntityContext?this.context:void 0))}}},{inheritedTypeProcessor:function(e){e.resolveForwardDeclarations&&e.resolveForwardDeclarations()},generateServiceOperation:function(e){var t;if(e.serviceMethod){var n=e.returnType?_index.Container.resolveType(e.returnType):{};t=n.isAssignableTo&&n.isAssignableTo(_index2["default"].Queryable)?e.serviceMethod:function(){var t,n=arguments[arguments.length-1],r=new _index2["default"].PromiseHandler;arguments;"function"==typeof n?(t=r.createCallback(n),arguments[arguments.length-1]=t):(t=r.createCallback(),arguments.push(t));try{var i=e.serviceMethod.apply(this,arguments);void 0!==i&&t.success(i)}catch(s){t.error(s)}return r.getPromise()}}else t=function(){var t,n=this;if(this instanceof _index2["default"].Entity){if(e.method||(e.method="POST"),!this.context)return void _index.Guard.raise("entity not attached into context");n=this.context,t={data:this,entitySet:n.getEntitySetFromElementType(this.getType())}}var r=e.elementType?n.getEntitySetFromElementType(_index.Container.resolveType(e.elementType)):null,i=null;if(e.params){i=[];for(var s=0;s<e.params.length;s++)for(var a in e.params[s])i.push(_index.Container.createConstantExpression(arguments[s],_index.Container.resolveType(e.params[s][a]),a))}var o=_index.Container.createEntityContextExpression(n),u=(t?t.data:n).getType().getMemberDefinition(e.serviceName),l=_index.Container.createServiceOperationExpression(o,_index.Container.createMemberInfoExpression(u),i,e,t),p=arguments[arguments.length-1];if("function"!=typeof p&&(p=void 0),r){var d=_index.Container.createQueryable(r,l);return p?(l.isTerminated=!0,d._runQuery(p)):d}var c=e.returnType?_index.Container.resolveType(e.returnType):null,d=_index.Container.createQueryable(n,l);return d.defaultType=c||_index2["default"].Object,c===_index2["default"].Queryable?(d.defaultType=_index.Container.resolveType(e.elementType),p?(l.isTerminated=!0,d._runQuery(p)):d):(l.isTerminated=!0,d._runQuery(p))};var r=[];if(e.params)for(var i=0;i<e.params.length;i++){var s=e.params[i];for(var a in s)r.push({name:a,type:s[a]})}return _index2["default"].typeSystem.extend(t,e,{params:r}),t},_convertLogicalTypeNameToPhysical:function(e){return e+"_$db$"},_storageModelCache:{get:function(){return this.__storageModelCache||(this.__storageModelCache={}),this.__storageModelCache},set:function(){}}}),exports["default"]=_index2["default"],module.exports=exports["default"]},{"../TypeSystem/index.js":32}],47:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].EntitySchemaConfig=function(){this.Name=""},s["default"].entitySetState={created:0,defined:1,active:2},s["default"].Class.defineEx("$data.EntitySet",[{type:s["default"].Queryable,params:[new s["default"].Class.ConstructorParameter(1)]}],null,{constructor:function(e,t,n,r,i){this.createNew=this[e.name]=this.elementType=this.defaultType=e;var a=this;t["createAdd"+e.name]=function(t){var n=new e(t);return a.add(n)},this.stateManager=new s["default"].EntityStateManager(this),this.collectionName=n,this.roles=i;for(var o in r)this[o]=r[o]},addNew:function(e,t){var n=(s["default"].PromiseHandlerBase.createCallbackSettings(t),new this.createNew(e));return this.entityContext.saveChanges(t),n},executeQuery:function(e,t){var n=s["default"].PromiseHandlerBase.createCallbackSettings(t);this.entityContext.executeQuery(e,n)},getTraceString:function(e){return this.entityContext.getTraceString(e)},setContext:function(e){this.entitySetState=s["default"].entitySetState.active,this.entityContext=e,this.entityContext[this.schema.name]=this[this.schema.name]},_trackEntity:function(e){for(var t=this.entityContext.stateManager.trackedEntities,n=0;n<t.length;n++)if(t[n].data===e)return;t.push({entitySet:this,data:e})},add:function(e){var t=e;return e instanceof s["default"].EntityWrapper?t=e.getEntity():e instanceof this.createNew||(t=new this.createNew(e)),t.entityState=s["default"].EntityState.Added,t.changedProperties=void 0,t.context=this.entityContext,this._trackEntity(t),t},addMany:function(e){var t=[],n=this;return e.forEach(function(e){t.push(n.add(e))}),t},remove:function(e){var t=e;e instanceof s["default"].EntityWrapper?t=e.getEntity():e instanceof this.createNew||(t=new this.createNew(e)),t.entityState=s["default"].EntityState.Deleted,t.changedProperties=void 0,this._trackEntity(t)},attach:function(e,t){var n=e;e instanceof s["default"].EntityWrapper?n=e.getEntity():e instanceof this.createNew||(n=new this.createNew(e));for(var r=0;r<this.entityContext.stateManager.trackedEntities.length;r++){var a=this.entityContext.stateManager.trackedEntities[r];if(a.data===n)break;a.data.equals(n)&&i.Guard.raise(new i.Exception("Context already contains this entity!!!"))}if(t===!0)n.changedProperties&&n.changedProperties.length>0?n.entityState=s["default"].EntityState.Modified:n.entityState=s["default"].EntityState.Unchanged;else{"string"==typeof t&&(t=s["default"].EntityAttachMode[t]);var o=t||s["default"].EntityAttachMode[s["default"].EntityAttachMode.defaultMode];"function"==typeof o?o.call(s["default"].EntityAttachMode,n):(n.entityState=s["default"].EntityState.Unchanged,n.changedProperties=void 0)}n.context=this.entityContext,this._trackEntity(n)},detach:function(e){var t=e;e instanceof s["default"].EntityWrapper?t=e.getEntity():e instanceof this.createNew||(t=new this.createNew(e));for(var n,r=this.entityContext.stateManager.trackedEntities,i=0;i<r.length;i++)r[i].data.equals(t)&&(n=r[i]);if(n){var a=this.entityContext.stateManager.trackedEntities.indexOf(n);return e.entityState=s["default"].EntityState.Detached,void this.entityContext.stateManager.trackedEntities.splice(a,1)}},attachOrGet:function(e,t){var n=e;e instanceof s["default"].EntityWrapper?n=e.getEntity():e instanceof this.createNew||(n=new this.createNew(e));for(var r,i=this.entityContext.stateManager.trackedEntities,a=0;a<i.length;a++)i[a].data.equals(n)&&(r=i[a]);if(r)return r.data;"string"==typeof t&&(t=s["default"].EntityAttachMode[t]);var o=t||s["default"].EntityAttachMode[s["default"].EntityAttachMode.defaultMode];return"function"==typeof o?o.call(s["default"].EntityAttachMode,n):(n.entityState=s["default"].EntityState.Unchanged,n.changedProperties=void 0),n.context=this.entityContext,this._trackEntity(n),n},loadItemProperty:function(e,t,n){return this.entityContext.loadItemProperty(e,t,n)},saveChanges:function(){return this.entityContext.saveChanges.apply(this.entityContext,arguments)},addProperty:function(e,t,n){return this.elementType.addProperty.apply(this.elementType,arguments)},expression:{get:function(){if(!this._expression){var e=i.Container.createEntityContextExpression(this.entityContext),t=this.entityContext.getType().getMemberDefinition(this.collectionName),n=i.Container.createEntitySetExpression(e,i.Container.createMemberInfoExpression(t),null,this);this._expression=n}return this._expression},set:function(e){this._expression=e}},getFieldUrl:function(e,t){return this.entityContext.getFieldUrl(e,t,this)},bulkInsert:function(e,t,n){return this.entityContext.bulkInsert(this,e,t,n)}},null),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].EntityState={Detached:0,Unchanged:10,Added:20,Modified:30,Deleted:40},n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],49:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.EntityStateManager",null,null,{constructor:function(e){this.entityContext=null,this.trackedEntities=[],this.init(e)},init:function(e){this.entityContext=e},reset:function(){this.trackedEntities=[]}},null),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],50:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Base.extend("$data.EntityWrapper",{getEntity:function(){i.Guard.raise("pure object")}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],51:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Enum=void 0;var s=e("../TypeSystem/index.js"),a=r(s);a["default"].createEnum=function(e,t,n,r){return a["default"].Enum.extend(e,t,n,r)},a["default"].Enum=a["default"].Class.define("$data.Enum",null,null,{constructor:function(){return s.Guard.raise(new s.Exception("Type Error","Cannot create instance from enum type!"))}},{extend:function(e,t,n,r){r||(n?(r=n,n=t,t=void 0):(r=t,t=void 0)),n=n||a["default"].Integer,n=s.Container.resolveType(n);var o={__enumType:{get:function(){return n},set:function(){},enumerable:!1,writable:!1}},u=function(e,t){return{get:function(){return e},set:function(){},enumMember:!0,index:t}},l=0,p=[a["default"].Byte,a["default"].SByte,a["default"].Int16,a["default"].Integer,a["default"].Int64].indexOf(n)>=0,d=!1,c=[];if(Array.isArray(r))for(var f=0;f<r.length;f++){var y=r[f];if("object"===("undefined"==typeof y?"undefined":i(y))&&"string"==typeof y.name)c.push({name:y.name,value:y.value,index:y.index}),"undefined"!=typeof y.index&&(d=!0);else{if("string"!=typeof y)return s.Guard.raise(new s.Exception("Type Error","Invalid enum member"));c.push({name:y,value:void 0,index:void 0})}}else if("object"===("undefined"==typeof r?"undefined":i(r)))for(var h in r){var m=r[h];"object"===("undefined"==typeof m?"undefined":i(m))?(c.push({name:h,value:m.value,index:m.index}),"undefined"!=typeof m.index&&(d=!0)):c.push({name:h,value:m,index:void 0})}d&&c.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0});for(var x=[],f=0;f<c.length;f++){var g=c[f];p&&"number"!=typeof g.value&&!g.value&&(g.value=l),"number"==typeof g.value&&(l=g.value),l++,x.push(g.name),o[g.name]=u(g.value,g.index)}var v=a["default"].Base.extend.call(this,e,t,{},o);return a["default"].Container.registerConverter(e,{"default":function(e){if("string"==typeof e&&x.indexOf(e)>=0){var t=v.staticDefinitions.getMember(e);if(t)return t.get()}for(var n=0;n<c.length;n++){var r=c[n];if(r.value===e)return e}throw 0}}),v}});n.Enum=a["default"].Enum;n["default"]=a["default"]},{"../TypeSystem/index.js":32}],52:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ArrayLiteralExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.items=e||[]},nodeType:{value:s["default"].Expressions.ExpressionType.ArrayLiteral,writable:!0},items:{value:void 0,dataType:Array,elementType:s["default"].Expressions.ExpressionNode},toString:function(e){var t="["+this.items.map(function(e){return e.toString()}).join(",")+"]";return t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],53:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.CallExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){this.expression=e,this.member=t,this.args=n},nodeType:{value:s["default"].Expressions.ExpressionType.Call},expression:{value:void 0,dataType:s["default"].Expressions.ExpressionNode,writable:!0},member:{value:void 0,dataType:s["default"].MemberDefinition,writable:!0},type:{value:void 0,writable:!0},implementation:{get:function(){return function(e,t,n){return"function"!=typeof t&&(t=e[t]),i.Guard.requireType("method",t,Function),t.apply(e,n)}},set:function(e){i.Guard.raise("Property can not be set")}},toString:function(e){return this.object.toString()+"."+this.member.toString()+"()"}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],54:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../TypeSystem/index.js"),a=r(s);(0,s.$C)("$data.Expressions.CodeParser",null,null,{constructor:function(e){this.scopeContext=e,this.lambdaParams=[]},log:function(e){this.scopeContext&&this.scopeContext.log(e)},parseExpression:function(e,t){"object"===("undefined"==typeof e?"undefined":i(e))&&(e="");var n={success:!0,errorMessage:"",errorDetails:""};if(a["default"].Acorn)return{success:!0,expression:this.ParserBuild(a["default"].Acorn.parse("("+e.toString()+")").body[0]),errors:[]};if(a["default"].Esprima)return{success:!0,expression:this.ParserBuild(a["default"].Esprima.parse("("+e.toString()+")").body[0]),errors:[]};var r=a["default"].ASTParser.parseCode(e);if(this.log({event:"AST",data:r}),!r.success)return{success:!1,error:"ASTParser error",errorMessage:r.errors?JSON.stringify(r.errors):"could not get code"};var s=this.Build2(r.tree.first[0]);return n={success:!0,expression:s,errors:r.errors}},createExpression:function(e,t){var n=this.parseExpression(e,t);return n.success||s.Guard.raise("ExpressionParserError: "+n.errorMessage),n.expression},ParserBuild:function(e){return this["Parser"+e.type](e)},ParserExpressionStatement:function(e){return this.ParserBuild(e.expression)},ParserBlockStatement:function(e){return this.ParserBuild(e.body[0])},ParserReturnStatement:function(e){return this.ParserBuild(e.argument)},ParserMemberExpression:function(e){return new a["default"].Expressions.PropertyExpression(this.ParserBuild(e.object),new a["default"].Expressions.ConstantExpression(e.property.name||e.property.value,i(e.property.name||e.property.value)))},ParserIdentifier:function(e){return this.ParserParameter(e,this.lambdaParams.indexOf(e.name)>-1?a["default"].Expressions.ExpressionType.LambdaParameterReference:a["default"].Expressions.ExpressionType.ParameterReference)},ParserObjectExpression:function(e){for(var t=new Array(e.properties.length),n=0;n<e.properties.length;n++)t[n]=this.ParserProperty(e.properties[n]);return new a["default"].Expressions.ObjectLiteralExpression(t)},ParserArrayExpression:function(e){for(var t=new Array(e.elements.length),n=0;n<e.elements.length;n++)t[n]=this.ParserBuild(e.elements[n]);return new a["default"].Expressions.ArrayLiteralExpression(t)},ParserProperty:function(e){return new a["default"].Expressions.ObjectFieldExpression(e.key.name,this.ParserBuild(e.value))},ParserArrowFunctionExpression:function(e){return this.ParserFunctionExpression(e)},ParserFunctionExpression:function(e){for(var t=new Array(e.params.length),n=0;n<e.params.length;n++)0===n||a["default"].defaults.parameterResolutionCompatibility?(this.lambdaParams.push(e.params[n].name),t[n]=this.ParserParameter(e.params[n],a["default"].Expressions.ExpressionType.LambdaParameter)):t[n]=this.ParserParameter(e.params[n],a["default"].Expressions.ExpressionType.Parameter),t[n].owningFunction=r;var r=new a["default"].Expressions.FunctionExpression(e.id?e.id.name:e.id,t,this.ParserBuild(e.body));return r},ParserParameter:function(e,t){var n=new a["default"].Expressions.ParameterExpression(e.name,null,t);return t==a["default"].Expressions.ExpressionType.LambdaParameterReference&&(n.paramIndex=this.lambdaParams.indexOf(e.name)),n},ParserLogicalExpression:function(e){return this.ParserBinaryExpression(e)},ParserOperators:{value:{"==":{expressionType:a["default"].Expressions.ExpressionType.Equal,type:"boolean",implementation:function(e,t){return e==t}},"===":{expressionType:a["default"].Expressions.ExpressionType.EqualTyped,type:"boolean",implementation:function(e,t){return e===t}},"!=":{expressionType:a["default"].Expressions.ExpressionType.NotEqual,type:"boolean",implementation:function(e,t){return e!=t}},"!==":{expressionType:a["default"].Expressions.ExpressionType.NotEqualTyped,type:"boolean",implementation:function(e,t){return e!==t}},">":{expressionType:a["default"].Expressions.ExpressionType.GreaterThen,type:"boolean",implementation:function(e,t){return e>t}},">=":{expressionType:a["default"].Expressions.ExpressionType.GreaterThenOrEqual,type:"boolean",implementation:function(e,t){return e>=t}},"<=":{expressionType:a["default"].Expressions.ExpressionType.LessThenOrEqual,type:"boolean",implementation:function(e,t){return t>=e}},"<":{expressionType:a["default"].Expressions.ExpressionType.LessThen,type:"boolean",implementation:function(e,t){return t>e}},"&&":{expressionType:a["default"].Expressions.ExpressionType.And,type:"boolean",implementation:function(e,t){return e&&t}},"||":{expressionType:a["default"].Expressions.ExpressionType.Or,type:"boolean",implementation:function(e,t){return e||t}},"&":{expressionType:a["default"].Expressions.ExpressionType.AndBitwise,type:"number",implementation:function(e,t){return e&t}},"|":{expressionType:a["default"].Expressions.ExpressionType.OrBitwise,type:"number",implementation:function(e,t){return e|t}},"+":{expressionType:a["default"].Expressions.ExpressionType.Add,type:"number",implementation:function(e,t){return e+t}},"-":{expressionType:a["default"].Expressions.ExpressionType.Subtract,type:"number",implementation:function(e,t){return e-t}},"/":{expressionType:a["default"].Expressions.ExpressionType.Divide,type:"number",implementation:function(e,t){return e/t}},"%":{expressionType:a["default"].Expressions.ExpressionType.Modulo,type:"number",implementation:function(e,t){return e%t}},"*":{expressionType:a["default"].Expressions.ExpressionType.Multiply,type:"number",implementation:function(e,t){return e*t}},"[":{expressionType:a["default"].Expressions.ExpressionType.ArrayIndex,type:"number",implementation:function(e,t){return e[t]}},"in":{expressionType:a["default"].Expressions.ExpressionType.In,type:"boolean",implementation:function(e,t){return e in t}}}},ParserUnaryOperators:{value:{"+":{arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Positive,type:"number",implementation:function(e){return+e}},"-":{arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Negative,type:"number",implementation:function(e){return-e}},"++true":{arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Increment,type:"number",implementation:function(e){return++e}},"--true":{arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Decrement,type:"number",implementation:function(e){return--e}},"++false":{arity:"suffix",expressionType:a["default"].Expressions.ExpressionType.Increment,type:"number",implementation:function(e){return e++}},"!":{arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Not,type:"boolean",implementation:function(e){return!e}},"--false":{arity:"suffix",expressionType:a["default"].Expressions.ExpressionType.Decrement,type:"number",implementation:function(e){return e--}}}},ParserUnaryExpression:function(e){return new a["default"].Expressions.UnaryExpression(this.ParserBuild(e.argument),this.ParserUnaryOperators[e.operator],this.ParserUnaryOperators[e.operator].expressionType)},ParserUpdateExpression:function(e){return new a["default"].Expressions.UnaryExpression(this.ParserBuild(e.argument),this.ParserUnaryOperators[e.operator+e.prefix],this.ParserUnaryOperators[e.operator+e.prefix].nodeType)},ParserBinaryExpression:function(e){return new a["default"].Expressions.SimpleBinaryExpression(this.ParserBuild(e.left),this.ParserBuild(e.right),this.ParserOperators[e.operator].expressionType,e.operator,this.ParserOperators[e.operator].type)},ParserThisExpression:function(e){return new a["default"].Expressions.ThisExpression},ParserLiteral:function(e){return new a["default"].Expressions.ConstantExpression(e.value,i(e.value))},ParserCallExpression:function(e){for(var t=this.ParserBuild(e.callee),n=new Array(e.arguments.length),r=0;r<e.arguments.length;r++)n[r]=this.ParserBuild(e.arguments[r]);var s,o;switch(!0){case t instanceof a["default"].Expressions.PropertyExpression:o=t.expression,s=t.member;break;case t instanceof a["default"].Expressions.ParameterExpression:o=new a["default"].Expressions.ConstantExpression(null,i(null)),s=t}return new a["default"].Expressions.CallExpression(o,s,n)}}),n["default"]=a["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ConstantExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r){this.value=e,this.type=t,this.name=n,this.elementType=r,i.Guard.isNullOrUndefined(this.value)||(this.type=i.Container.resolveType(this.type),(this.type===s["default"].Array&&this.elementType||i.Container.resolveType(i.Container.getTypeName(this.value))!==this.type)&&(this.value=i.Container.convertTo(e,this.type,this.elementType)))},nodeType:{value:s["default"].Expressions.ExpressionType.Constant,enumerable:!0},type:{value:Object,writable:!0},elementType:{value:Object,writable:!0},value:{value:void 0,writable:!0},toString:function(e){return this.value.toString()}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ContinuationExpressionBuilder",s["default"].Expressions.EntityExpressionVisitor,null,{constructor:function(e){this.mode=e},compile:function(e){var t={mode:"find",skipExists:!1};this.Visit(e.expression,t);var n={skip:t.skipSize,take:t.pageSize,message:""};if("pageSize"in t){var r,i={mode:this.mode,pageSize:t.pageSize};!t.skipExists&&t.pageSize?(i.append=!0,r=this.Visit(e.expression,i)):t.skipExists&&(r=this.Visit(e.expression,i)),i.abort?(n.skip=(n.skip||0)-n.take,n.message="Invalid skip value!"):n.expression=r}else n.message="take expression not defined in the chain!";return n},VisitPagingExpression:function(e,t){switch(t.mode){case"find":e.nodeType===s["default"].Expressions.ExpressionType.Take?t.pageSize=e.amount.value:(t.skipSize=e.amount.value,t.skipExists=!0);break;case"prev":if(e.nodeType===s["default"].Expressions.ExpressionType.Skip){var n=e.amount.value-t.pageSize;t.abort=0>n&&e.amount.value>=t.pageSize;var r=i.Container.createConstantExpression(Math.max(n,0),"number");return i.Container.createPagingExpression(e.source,r,e.nodeType)}t.append&&(t.abort=!0);break;case"next":if(e.nodeType===s["default"].Expressions.ExpressionType.Skip){var n=t.pageSize+e.amount.value,r=i.Container.createConstantExpression(n,"number");return i.Container.createPagingExpression(e.source,r,e.nodeType)}if(t.append){var r=i.Container.createConstantExpression(t.pageSize,"number");return i.Container.createPagingExpression(e,r,s["default"].Expressions.ExpressionType.Skip)}}this.Visit(e.source,t)}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.AssociationInfoExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.associationInfo=e},nodeType:{value:s["default"].Expressions.ExpressionType.AssociationInfo,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.CodeExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){i.Container.resolveType(i.Container.getTypeName(e))!=s["default"].String||"function"==e.replace(/^[\s\xA0]+/,"").match("^function")||/^[^\.]*(=>)/.test(e.replace(/^[\s\xA0]+/,""))||(e="function (it) { return "+e+"; }"),this.source=e,this.parameters=t},nodeType:{value:s["default"].Expressions.ExpressionType.Code,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../TypeSystem/index.js"),a=r(s);(0,s.$C)("$data.Expressions.CodeToEntityConverter",a["default"].Expressions.ExpressionVisitor,null,{constructor:function(e){this.scopeContext=e,this.parameters=[]},VisitBinary:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);if(!(n instanceof a["default"].Expressions.ConstantExpression)&&r instanceof a["default"].Expressions.ConstantExpression||!(r instanceof a["default"].Expressions.ConstantExpression)&&n instanceof a["default"].Expressions.ConstantExpression){var i,o;r instanceof a["default"].Expressions.ConstantExpression?(i=n,o=r):(i=r,o=n);var u;if(((u=i.selector)instanceof a["default"].Expressions.MemberInfoExpression||(u=i.operation)instanceof a["default"].Expressions.MemberInfoExpression)&&u.memberDefinition&&(u.memberDefinition.type||u.memberDefinition.dataType)){var l=s.Container.resolveType(u.memberDefinition.type||u.memberDefinition.dataType),p=s.Container.resolveType(o.type);if(l!==p){var d=o.value;if(e.operator===a["default"].Expressions.ExpressionType.In)if(Array.isArray(d)){for(var c=[],f=0;f<d.length;f++)c.push(new a["default"].Expressions.ConstantExpression(d[f],l));d=c,l=a["default"].Array}else l=p;r===o?r=new a["default"].Expressions.ConstantExpression(d,l,r.name):n=new a["default"].Expressions.ConstantExpression(d,l,n.name)}}}var y=this.scopeContext.resolveBinaryOperator(e.nodeType,e,t.frameType),h=s.Container.createSimpleBinaryExpression(n,r,e.nodeType,e.operator,e.type,y);return h},VisitUnary:function(e,t){var n=this.Visit(e.operand,t),r=this.scopeContext.resolveUnaryOperator(e.nodeType,e,t.frameType),i=s.Container.createUnaryExpression(n,e.operator,e.nodeType,r);return i},VisitParameter:function(e,t){s.Guard.requireValue("context",t);var n=a["default"].Expressions.ExpressionType;switch(e.nodeType){case n.LambdaParameterReference:var r=s.Container.createEntityExpression(t.lambdaParameters[e.paramIndex],{lambda:e.name});return r;case n.LambdaParameter:break;default:s.Guard.raise("Parameter '"+e.name+"' is missing!")}},VisitThis:function(e,t){var n=this.parameters.push({name:"",value:void 0})-1,r=s.Container.createQueryParameterExpression("",n,t.queryParameters,void 0);return r},VisitFunction:function(e,t){var n=a["default"].Expressions.ExpressionVisitor.prototype.VisitFunction.apply(this,arguments);return n.body},VisitCall:function(e,t){var n,r=this,o=this.Visit(e.expression,t),u=this.Visit(e.member,t),l=e.args.map(function(e){if(e instanceof a["default"].Expressions.FunctionExpression&&(o instanceof a["default"].Expressions.EntitySetExpression||o instanceof a["default"].Expressions.FrameOperationExpression)){var n=r.scopeContext.resolveSetOperations(u.value,o,t.frameType);n||s.Guard.raise("Unknown entity field operation: "+u.getJSON());var i=r.scopeContext.getEntitySetFromElementType(o.elementType),l=null;i?l=i.expression:s.Guard.raise("Nested operations without entity set is not supported");var p=t.frameType;t.frameType=n.frameType,t.lambdaParameters.push(l);var d=r.Visit(e,t);return t.lambdaParameters.pop(),t.frameType=p,n.frameTypeFactory?n.frameTypeFactory(l,d):new n.frameType(l,d)}return r.Visit(e,t)});switch(!0){case o instanceof a["default"].Expressions.QueryParameterExpression:var p=l.map(function(e){return e.value});return n=e.implementation(o.value,u.value,p),s.Container.createQueryParameterExpression(o.name+"$"+u.value,o.index,n,"undefined"==typeof n?"undefined":i(n));case o instanceof a["default"].Expressions.EntityFieldExpression:case o instanceof a["default"].Expressions.EntityFieldOperationExpression:var d=this.scopeContext.resolveFieldOperation(u.value,o,t.frameType);return d||s.Guard.raise("Unknown entity field operation: "+u.getJSON()),u=s.Container.createMemberInfoExpression(d),n=s.Container.createEntityFieldOperationExpression(o,u,this._resolveFunctionArguments(l,d.parameters));case o instanceof a["default"].Expressions.EntitySetExpression:case o instanceof a["default"].Expressions.FrameOperationExpression:var d=this.scopeContext.resolveSetOperations(u.value,o,t.frameType);return d||s.Guard.raise("Unknown entity field operation: "+u.getJSON()),u=s.Container.createMemberInfoExpression(d),n=s.Container.createFrameOperationExpression(o,u,this._resolveFunctionArguments(l,d.parameters));case o instanceof a["default"].Expressions.EntityExpression:var d=this.scopeContext.resolveTypeOperations(u.value,o,t.frameType);return d||s.Guard.raise("Unknown entity function operation: "+u.getJSON()),u=s.Container.createMemberInfoExpression(d),n=s.Container.createEntityFunctionOperationExpression(o,u,this._resolveFunctionArguments(l,d.method.params));case o instanceof a["default"].Expressions.EntityContextExpression:var d=this.scopeContext.resolveContextOperations(u.value,o,t.frameType);return d||s.Guard.raise("Unknown entity function operation: "+u.getJSON()),u=s.Container.createMemberInfoExpression(d),n=s.Container.createContextFunctionOperationExpression(o,u,this._resolveFunctionArguments(l,d.method.params));default:s.Guard.raise("VisitCall: Only fields can have operations: "+e.getType().name)}},_resolveFunctionArguments:function(e,t){return t&&(t=t.filter(function(e,t){return"@expression"!==e.name})),1===e.length&&e[0]instanceof a["default"].Expressions.ConstantExpression&&"object"===i(e[0].value)&&e[0].value&&t&&t[0]&&e[0].value.constructor===a["default"].Object&&t.some(function(t){return t.name in e[0].value})?t.map(function(t){var n=t.type||t.dataType||e[0].type;return new a["default"].Expressions.ConstantExpression(e[0].value[t.name],s.Container.resolveType(n),t.name)}):e.map(function(e,n){if(e instanceof a["default"].Expressions.ConstantExpression&&t&&t[n]){var r=t[n].type||t[n].dataType||e.type;return new a["default"].Expressions.ConstantExpression(e.value,s.Container.resolveType(r),t[n].name)}return e})},VisitProperty:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.member,t);switch(s.Guard.requireType("member",r,a["default"].Expressions.ConstantExpression),n.expressionType){case a["default"].Expressions.EntitySetExpression:case a["default"].Expressions.EntityExpression:var i=n.getMemberDefinition(r.value);i||s.Guard.raise(new s.Exception("Unknown member: "+r.value,"MemberNotFound"));
var o,u,l=i.storageModel.PhysicalType.memberDefinitions.getMember(i.name);switch(l.kind){case"property":return u=s.Container.createMemberInfoExpression(i),o=s.Container.createEntityFieldExpression(n,u);case"navProperty":var p=i.storageModel.Associations[i.name],d=s.Container.createEntitySetExpression(n,s.Container.createAssociationInfoExpression(p));if("*"!==p.ToMultiplicity){var c=s.Container.createEntityExpression(d,{});return c}return d;case"complexProperty":return u=s.Container.createMemberInfoExpression(i),o=s.Container.createComplexTypeExpression(n,u)}case a["default"].Expressions.ComplexTypeExpression:var f=n.getMemberDefinition(r.value);f||s.Guard.raise("Unknown member "+r.value+" on "+n.entityType.name);var y,h=s.Container.createMemberInfoExpression(f);return y=s.Container.isPrimitiveType(s.Container.resolveType(f.dataType))?s.Container.createEntityFieldExpression(n,h):s.Container.createComplexTypeExpression(n,h);case a["default"].Expressions.QueryParameterExpression:var m=e.implementation(n.value,r.value);return this.parameters[n.index].name+="$"+r.value,this.parameters[n.index].value=m,s.Container.createQueryParameterExpression(n.name+"$"+r.value,n.index,m,s.Container.getTypeName(m));case a["default"].Expressions.EntityFieldExpression:case a["default"].Expressions.EntityFieldOperationExpression:var x=this.scopeContext.resolveFieldOperation(r.value,n,t.frameType);return x||s.Guard.raise("Unknown entity field operation: "+r.getJSON()),r=s.Container.createMemberInfoExpression(x),y=s.Container.createEntityFieldOperationExpression(n,r,[]);default:s.Guard.raise("Unknown expression type to handle: "+n.expressionType.name)}}}),n["default"]=a["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],60:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ComplexTypeExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){i.Guard.requireType("source",e,[s["default"].Expressions.EntityExpression,s["default"].Expressions.ComplexTypeExpression]),i.Guard.requireType("selector",t,[s["default"].Expressions.EntityExpression,s["default"].Expressions.MemberInfoExpression]),this.source=e,this.selector=t;var n=e.entityType.getMemberDefinition(t.memberName).dataType,r=i.Container.resolveType(n);this.entityType=r},getMemberDefinition:function(e){return this.entityType.getMemberDefinition(e)},nodeType:{value:s["default"].Expressions.ExpressionType.Com}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],61:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntityContextExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.instance=e},instance:{enumerable:!1},nodeType:{value:s["default"].Expressions.ExpressionType.EntityContext,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntityExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){i.Guard.requireValue("source",e),i.Guard.requireValue("selector",t),e instanceof s["default"].Expressions.EntitySetExpression||e instanceof s["default"].Expressions.ServiceOperationExpression||i.Guard.raise("Only EntitySetExpressions can be the source for an EntityExpression"),this.source=e,this.selector=t,this.entityType=this.source.elementType,this.storageModel=this.source.storageModel,i.Guard.requireValue("entityType",this.entityType),i.Guard.requireValue("storageModel",this.storageModel)},getMemberDefinition:function(e){var t=this.entityType.getMemberDefinition(e);return t||i.Guard.raise(new i.Exception("Unknown member "+e+" on type "+this.entityType.name,"MemberNotFound")),t.storageModel=this.storageModel,t},nodeType:{value:s["default"].Expressions.ExpressionType.Entity}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntityExpressionVisitor",null,null,{constructor:function(){this.lambdaTypes=[]},canVisit:function(e){return e instanceof s["default"].Expressions.ExpressionNode},Visit:function(e,t){if(!this.canVisit(e))return e;var n="Visit"+e.getType().name;if(n in this){var r=this[n],i=r.call(this,e,t);return"undefined"==typeof i?e:i}return e},VisitToArrayExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createToArrayExpression(n):e},VisitForEachExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createForEachExpression(n):e},VisitMemberInfoExpression:function(e,t){return e},VisitSingleExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createSingleExpression(n):e},VisitFirstExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createFirstExpression(n):e},VisitSomeExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createSomeExpression(n):e},VisitFindExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createFindExpression(n):e},VisitEveryExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createEveryExpression(n):e},VisitCountExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createCountExpression(n):e},VisitBatchDeleteExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createBatchDeleteExpression(n):e},VisitBatchExecuteQueryExpression:function(e,t){for(var n=e.members.map(function(e){return this.Visit(e,t)},this),r=!0,s=0;s<e.members.length;s++)r=r&&e.members[s]===n[s];return r?e:i.Container.createBatchExecuteQueryExpression(n)},VisitObjectLiteralExpression:function(e,t){for(var n=e.members.map(function(e){return this.Visit(e,t)},this),r=!0,s=0;s<e.members.length;s++)r=r&&e.members[s]===n[s];return r?e:i.Container.createObjectLiteralExpression(n)},VisitObjectFieldExpression:function(e,t){var n=this.Visit(e.expression,t);return e.expression!==n?i.Container.createObjectFieldExpression(e.fieldName,n):e},VisitIncludeExpression:function(e,t){var n=this.Visit(e.source,t);return n!==e.source?i.Container.createIncludeExpression(n,e.selector):e},VisitUnaryExpression:function(e,t){var n=this.Visit(e.operand,t);return e.operand!==n?i.Container.createUnaryExpression(n,e.operator,e.nodeType,e.resolution):e},VisitSimpleBinaryExpression:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n!==e.left||r!==e.right?new s["default"].Expressions.SimpleBinaryExpression(n,r,e.nodeType,e.operator,e.type,e.resolution):e},VisitEntityContextExpression:function(e,t){return e},VisitCodeExpression:function(e,t){return e},VisitComplexTypeExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);if(n!==e.source||r!==e.selector){var s=i.Container.createComplexTypeExpression(n,r);return s}return e},VisitEntityExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);if(n!==e.source||r!==e.selector){var s=i.Container.createEntityExpression(n,r);return s}return e},VisitEntityFieldExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);if(n!==e.source||r!==e.selector){var s=i.Container.createEntityFieldExpression(n,r);return s}return e},VisitEntityFieldOperationExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.operation,t),s=e.parameters.map(function(e){return this.Visit(e)},this),a=i.Container.createEntityFieldOperationExpression(n,r,s);return a},VisitParametricQueryExpression:function(e,t){var n=this.Visit(e.expression,t),r=e.parameters.map(function(e){return this.Visit(e)},this),s=i.Container.createParametricQueryExpression(n,r);return s},VisitEntitySetExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createEntitySetExpression(n,r,e.params,e.instance):e},VisitInlineCountExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createInlineCountExpression(n,r,e.params,e.instance):e},VisitFilterExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createFilterExpression(n,r,e.params,e.instance):e},VisitProjectionExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);if(n!==e.source||r!==e.selector){var s=i.Container.createProjectionExpression(n,r,e.params,e.instance);return s.projectionAs=e.projectionAs,s}return e},VisitOrderExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createOrderExpression(n,r,e.nodeType):e},VisitPagingExpression:function(e,t){var n=this.Visit(e.source,t),r=this.Visit(e.amount,t);return n!==e.source||r!==e.amount?i.Container.createPagingExpression(n,r,e.nodeType):e}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntityFieldExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){this.selector=t,this.source=e,(this.selector instanceof s["default"].Expressions.MemberInfoExpression||this.selector.name)&&(this.memberName=this.selector.name)},nodeType:{value:s["default"].Expressions.ExpressionType.EntityField}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntityFieldOperationExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){this.source=e,this.operation=t,this.parameters=n},nodeType:{value:s["default"].Expressions.ExpressionType.EntityFieldOperation}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.EntitySetExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r){function a(){for(var t=e;t;){if(t instanceof s["default"].Expressions.EntityContextExpression)return t;t=t.source}}i.Guard.requireType("source",e,[s["default"].Expressions.EntityContextExpression,s["default"].Expressions.EntitySetExpression]),i.Guard.requireType("selector",e,[s["default"].Expressions.MemberInfoExpression,s["default"].Expressions.CodeExpression,s["default"].Expressions.ParametricQueryExpression]),this.source=e,this.selector=t,this.params=n,this.instance=r,this.storage_type={};var o=a();switch(!0){case this.source instanceof s["default"].Expressions.EntityContextExpression:i.Guard.requireType("selector",t,s["default"].Expressions.MemberInfoExpression),this.elementType=t.memberDefinition.elementType,this.storageModel=o.instance._storageModel.getStorageModel(this.elementType);break;case this.source instanceof s["default"].Expressions.EntityExpression:i.Guard.requireType("selector",t,s["default"].Expressions.AssociationInfoExpression),this.elementType=t.associationInfo.ToType,this.storageModel=o.instance._storageModel.getStorageModel(this.elementType);break;case this.source instanceof s["default"].Expressions.EntitySetExpression:t instanceof s["default"].Expressions.AssociationInfoExpression?(this.elementType=t.associationInfo.ToType,this.storageModel=o.instance._storageModel.getStorageModel(t.associationInfo.ToType)):(this.elementType=this.source.elementType,this.storageModel=this.source.storageModel);break;case this.source instanceof s["default"].Expressions.ServiceOperationExpression:this.elementType=this.source.elementType,this.storageModel=this.source.storageModel;break;default:i.Guard.raise("take and skip must be the last expressions in the chain!")}},getMemberDefinition:function(e){var t=this.elementType.getMemberDefinition(e);return t||i.Guard.raise(new i.Exception("Unknown member "+e+" on type "+this.entityType.name,"MemberNotFound")),t.storageModel=this.storageModel,t},instance:{enumerable:!1},nodeType:{value:s["default"].Expressions.ExpressionType.EntitySet,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ExpressionMonitor",s["default"].Expressions.EntityExpressionVisitor,null,{constructor:function(e){this.Visit=function(t,n){var r,i=t;this.canVisit(t)&&(e.VisitExpressionNode&&e.VisitExpressionNode.apply(e,arguments),r="Visit"+t.getType().name,r in e&&(i=e[r].apply(e,arguments)));var a=arguments;if(i!==t&&(a=[i,n]),i=s["default"].Expressions.EntityExpressionVisitor.prototype.Visit.apply(this,a),a=[i,n],this.canVisit(i)){var o=i.getType().name;e.MonitorExpressionNode&&e.MonitorExpressionNode.apply(e,a),r="Monitor"+o,r in e&&e[r].apply(e,a),e.MutateExpressionNode&&e.MutateExpressionNode.apply(e,a),r="Mutate"+o,r in e&&(i=e[r].apply(e,a))}return i}}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],68:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.FilterExpression",s["default"].Expressions.EntitySetExpression,null,{constructor:function(e,t){this.resultType=s["default"].Array},nodeType:{value:s["default"].Expressions.ExpressionType.Filter,enumerable:!0}}),(0,i.$C)("$data.Expressions.InlineCountExpression",s["default"].Expressions.EntitySetExpression,null,{constructor:function(e,t){},nodeType:{value:s["default"].Expressions.ExpressionType.InlineCount,enumerable:!0}}),(0,i.$C)("$data.Expressions.BatchExecuteQueryExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.members=e},nodeType:{value:s["default"].Expressions.ExpressionType.BatchExecuteQuery,enumerable:!0}}),(0,i.$C)("$data.Expressions.FrameOperator",s["default"].Expressions.ExpressionNode,null,{constructor:function(){this.isTerminated=!0}}),(0,i.$C)("$data.Expressions.CountExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Integer},nodeType:{value:s["default"].Expressions.ExpressionType.Count,enumerable:!0}}),(0,i.$C)("$data.Expressions.SingleExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Object},nodeType:{value:s["default"].Expressions.ExpressionType.Single,enumerable:!0}}),(0,i.$C)("$data.Expressions.FindExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e,t,n){this.source=e,this.params=t,this.subMember=n,this.resultType=s["default"].Object},nodeType:{value:s["default"].Expressions.ExpressionType.Find,enumerable:!0}}),(0,i.$C)("$data.Expressions.FirstExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Object},nodeType:{value:s["default"].Expressions.ExpressionType.First,enumerable:!0}}),(0,i.$C)("$data.Expressions.ForEachExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Array},nodeType:{value:s["default"].Expressions.ExpressionType.ForEach,enumerable:!0}}),(0,i.$C)("$data.Expressions.ToArrayExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Array},nodeType:{value:s["default"].Expressions.ExpressionType.ToArray,enumerable:!0}}),(0,i.$C)("$data.Expressions.SomeExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Object},nodeType:{value:s["default"].Expressions.ExpressionType.Some,enumerable:!0}}),(0,i.$C)("$data.Expressions.EveryExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Object},nodeType:{value:s["default"].Expressions.ExpressionType.Every,enumerable:!0}}),(0,i.$C)("$data.Expressions.BatchDeleteExpression",s["default"].Expressions.FrameOperator,null,{constructor:function(e){this.source=e,this.resultType=s["default"].Integer},nodeType:{value:s["default"].Expressions.ExpressionType.BatchDelete,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],69:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.FrameOperationExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){switch(this.source=e,this.operation=t,this.parameters=n,!0){case this.source instanceof s["default"].Expressions.EntitySetExpression:case this.source instanceof s["default"].Expressions.FrameOperationExpression:this.elementType=this.source.elementType,this.storageModel=this.source.storageModel}},nodeType:{value:s["default"].Expressions.ExpressionType.FrameOperation}}),(0,i.$C)("$data.Expressions.EntityFunctionOperationExpression",s["default"].Expressions.FrameOperationExpression,null,{nodeType:{value:s["default"].Expressions.ExpressionType.EntityFunctionOperation}}),(0,i.$C)("$data.Expressions.ContextFunctionOperationExpression",s["default"].Expressions.FrameOperationExpression,null,{nodeType:{value:s["default"].Expressions.ExpressionType.ContextFunctionOperation}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],70:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.IncludeExpression",s["default"].Expressions.EntitySetExpression,null,{constructor:function(e,t){},nodeType:{value:s["default"].Expressions.ExpressionType.Include,writable:!0},toString:function(e){var t="unimplemented";return t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],71:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.MemberInfoExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.memberDefinition=e,this.memberName=e.name},nodeType:{value:s["default"].Expressions.ExpressionType.MemberInfo,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],72:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.OrderExpression",s["default"].Expressions.EntitySetExpression,null,{constructor:function(e,t,n){this.nodeType=n},nodeType:{value:s["default"].Expressions.ExpressionType.OrderBy,writable:!0},toString:function(e){var t="unimplemented";return t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],73:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ParametricQueryExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){this.expression=e,this.parameters=t||[]},nodeType:{value:s["default"].Expressions.ExpressionType.ParametricQuery,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],74:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ProjectionExpression",s["default"].Expressions.EntitySetExpression,null,{constructor:function(e,t,n,r){},nodeType:{value:s["default"].Expressions.ExpressionType.Projection,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],75:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.QueryExpressionCreator",s["default"].Expressions.EntityExpressionVisitor,null,{constructor:function(e){i.Guard.requireValue("scopeContext",e),this.scopeContext=e},VisitEntitySetExpression:function(e,t){return e.source instanceof s["default"].Expressions.EntityContextExpression&&this.lambdaTypes.push(e),e},VisitServiceOperationExpression:function(e,t){return e.source instanceof s["default"].Expressions.EntityContextExpression&&this.lambdaTypes.push(e),e},VisitCodeExpression:function(e,t){var n=e.source.toString(),r=i.Container.createCodeParser(this.scopeContext).createExpression(n);this.scopeContext.log({event:"JSCodeExpression",data:r});var a=i.Container.createConstantValueResolver(e.parameters,s["default"].__global,this.scopeContext),o=i.Container.createParameterResolverVisitor();r=o.Visit(r,a),this.scopeContext.log({event:"JSCodeExpressionResolved",data:r});var u=i.Container.createCodeToEntityConverter(this.scopeContext),l=u.Visit(r,{queryParameters:e.parameters,lambdaParameters:this.lambdaTypes,frameType:t.frameType}),p=i.Container.createParametricQueryExpression(l,u.parameters);return this.scopeContext.log({event:"EntityExpression",data:l}),p},VisitFilterExpression:function(e,t){var n=this.Visit(e.source,t);t=t||{},t.frameType=e.getType();var r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createFilterExpression(n,r,e.params,e.instance):e},VisitInlineCountExpression:function(e,t){var n=this.Visit(e.source,t);t=t||{},t.frameType=e.getType();var r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createInlineCountExpression(n,r,e.params,e.instance):e},VisitProjectionExpression:function(e,t){var n=this.Visit(e.source,t);t=t||{},t.frameType=e.getType();var r=this.Visit(e.selector,t);if(n!==e.source||r!==e.selector){var s=i.Container.createProjectionExpression(n,r,e.params,e.instance);return s.projectionAs=e.projectionAs,s}return e},VisitOrderExpression:function(e,t){var n=this.Visit(e.source,t);t=t||{},t.frameType=e.getType();var r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createOrderExpression(n,r,e.nodeType):e},VisitIncludeExpression:function(e,t){var n=this.Visit(e.source,t);t=t||{},t.frameType=e.getType();var r=this.Visit(e.selector,t);return n!==e.source||r!==e.selector?i.Container.createIncludeExpression(n,r):e}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],76:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.QueryParameterExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r){this.name=e,this.index=t,this.value=n,this.type=i.Container.getTypeName(n)},nodeType:{value:s["default"].Expressions.ExpressionType.QueryParameter,writable:!1}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],77:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.RepresentationExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){},getMemberDefinition:function(e){return this.entityType.getMemberDefinition(e)},nodeType:{value:s["default"].Expressions.ExpressionType.Entity}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ServiceOperationExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r,a){function o(){for(var t=e;t;){if(t instanceof s["default"].Expressions.EntityContextExpression)return t;t=t.source}}i.Guard.requireType("source",e,[s["default"].Expressions.EntityContextExpression]),i.Guard.requireType("selector",e,[s["default"].Expressions.MemberInfoExpression]),this.source=e,this.selector=t,this.params=n,this.cfg=r,this.boundItem=a;var u=o();switch(!0){case this.source instanceof s["default"].Expressions.EntityContextExpression:this.elementType=r.elementType?i.Container.resolveType(r.elementType):this.elementType?i.Container.resolveType(r.returnType):null,this.storageModel=r.elementType?u.instance._storageModel.getStorageModel(i.Container.resolveType(r.elementType)):null;break;default:i.Guard.raise("Unknown source type for EntitySetExpression: "+this.source.getType().name)}},nodeType:{value:s["default"].Expressions.ExpressionType.ServiceOperation,enumerable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Expressions.ExpressionBuilder",null,null,{constructor:function(e){this.context=e},_isLambdaParam:function(e){for(var t=this.context.lambdaParams,n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},_isParam:function(e){return void 0!=this.context.paramContext[e]},_isParamRoot:function(e){return this.context.paramsName==e},Build:function(e,t){var n;switch(e.arity){case"infix":"("==e.value?n=this.BuildMethodCall(e,t):"."==e.value?n=this.BuildMember(e,t):["===","==","!==","!=",">","<",">=","<="].indexOf(e.value)>=0?n=this.BuildEquality(e,t):["&&","||"].indexOf(e.value)>=0?n=this.BuildBinary(e,t):["+","-","*","/","%"].indexOf(e.value)>=0?n=this.BuildBinary(e,t):"["==e.value?n=this.BuildArrayAccess(e,t):i.Guard.raise("Value of infix node isn't implemented: "+e.value);break;case"prefix":["+","-","!"].indexOf(e.value)>=0?n=this.BuildUnary(e,t):["++","--"].indexOf(e.value)>=0?n=this.BuildIncDec(e,t):"{"==e.value?n=this.BuildNewExpression(e,t):i.Guard.raise("Value of prefix node isn't implemented: "+e.value);break;case"suffix":["++","--"].indexOf(e.value)>=0?n=this.BuildIncDec(e,t):i.Guard.raise("Value of suffix node isn't implemented: "+e.value);break;case"string":case"number":n=this.BuildLiteral(e,t);break;case"ternary":"?"==e.value?n=this.BuildDecision(e,t):i.Guard.raise("Value of ternary node isn't implemented: "+e.value);break;case null:case void 0:n="boolean"!=e.type||"true"!=e.value&&"false"!=e.value?this.BuildVariable(e,t):this.BuildBoolLiteral(e,t);break;default:i.Guard.raise("Arity isn't implemented: "+e.arity)}return n},BuildNewExpression:function(e,t){for(var n=s["default"].Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,[]),r=e.first,i=0;i<r.length;i++)n.values.push(this.Build(r[i],n));return n},BuildLiteral:function(e,t){return s["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,e.arity,e.value)},BuildBoolLiteral:function(e,t){return s["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,e.type,"true"==e.value?!0:!1)},BuildVariable:function(e,t){if(!e.first){if(t.type==MEMBERACCESS){var n;n=this._isLambdaParam(e.value)?"LAMBDAPARAM":this._isParamRoot(e.value)?"PARAMETERROOT":this._isParam(e.value)?"PARAMETER":"PROPERTY"}else this._isLambdaParam(e.value)?n="LAMBDAPARAM":this._isParamRoot(e.value)?n="PARAMETERROOT":this._isParam(e.value)?n="PARAMETER":void 0!=s["default"].__global[e.value]?n="GLOBALOBJECT":i.Guard.raise(new i.Exception("Unknown variable in '"+this.context.operation+"' operation. The variable isn't referenced in the parameter context and it's not a global variable: '"+e.value+"'.","InvalidOperation",{operationName:this.context.operation,missingParameterName:e.value}));return s["default"].Expressions.ExpressionNodeTypes.VariableExpressionNode.create(!0,e.value,n)}var r=s["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"name",e.value),a=s["default"].Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0),o=this.Build(e.first,a);return a.left=r,a.right=o,r.JSONASSIGN=!0,o.JSONASSIGN=!0,a},BuildMember:function(e,t){if("."!=e.value||"infix"!=e.arity)return"string"==e.type?s["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,e.arity,e.value):s["default"].Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(!0,null,e.value);var n=s["default"].Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(!0),r=this.Build(e.first,n),i=this.Build(e.second,n);return n.expression=r,n.member=i,n},BuildUnary:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(!0,e.value);return n.operand=this.Build(e.first,n),n},BuildIncDec:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(!0,e.value,null,"suffix"==e.arity);return n.operand=this.Build(e.first,n),n},BuildBinary:function(e,t){e.first||i.Guard.raise("Cannot build binary: node.first is null"),e.second||i.Guard.raise("Cannot build binary: node.second is null");var n=s["default"].Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(!0,e.value);return n.left=this.Build(e.first,n),n.right=this.Build(e.second,n),n},BuildEquality:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(!0,e.value);return n.left=this.Build(e.first,n),n.right=this.Build(e.second,n),n},BuildDecision:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(!0);return n.expression=this.Build(e.first,n),n.left=this.Build(e.second,n),n.right=this.Build(e.third,n),n},BuildMethodCall:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(!0);"function"==e.first.type?(n.object=this.Build(e.first.first,n),n.method=e.first.second.value):(null!=e.first.type&&i.Guard.raise("Cannot build MethodCall because type is "+type),n.object=null,n.method=e.first.value);for(var r=e.second,a=[],o=0;o<r.length;o++){var u=r[o];a[o]=this.Build(u,n)}return n.args=a,n},BuildArrayAccess:function(e,t){var n=s["default"].Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0);return n.array=this.Build(e.first,n),n.index=this.Build(e.second,n),n}},null)},{"../../TypeSystem/index.js":32}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){return JSON.stringify(e,null,"	")}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.Expressions.ExpressionType",null,null,{},{
Constant:"constant",Variable:"variable",MemberAccess:"memberAccess",Call:"call",Equal:"equal",NotEqual:"notEqual",EqualTyped:"equalTyped",NotEqualTyped:"notEqualTyped",GreaterThen:"greaterThan",LessThen:"lessThan",GreaterThenOrEqual:"greaterThanOrEqual",LessThenOrEqual:"lessThenOrEqual",Or:"or",OrBitwise:"orBitwise",And:"and",AndBitwise:"andBitwise",In:"in",Add:"add",Divide:"divide",Multiply:"multiply",Subtract:"subtract",Modulo:"modulo",ArrayIndex:"arrayIndex",New:"new",Positive:"positive",Negative:"negative",Increment:"increment",Decrement:"decrement",Not:"not",This:"this",LambdaParameterReference:"lambdaParameterReference",LambdaParameter:"lambdaParameter",ParameterReference:"parameterReference",Parameter:"parameter",ArrayLiteral:"arrayLiteral",ObjectLiteral:"objectLiteral",ObjectField:"objectField",Function:"Function",Unknown:"UNKNOWN",EntitySet:"EntitySet",ServiceOperation:"ServiceOperation",EntityField:"EntityField",EntityContext:"EntityContext",Entity:"Entity",Filter:"Filter",First:"First",Count:"Count",InlineCount:"InlineCount",BatchExecuteQuery:"BatchExecuteQuery",Single:"Single",Find:"Find",Some:"Some",Every:"Every",ToArray:"ToArray",BatchDelete:"BatchDelete",ForEach:"ForEach",Projection:"Projection",EntityMember:"EntityMember",EntityFieldOperation:"EntityFieldOperation",FrameOperation:"FrameOperation",EntityFunctionOperation:"EntityFunctionOperation",ContextFunctionOperation:"ContextFunctionOperation",EntityBinary:"EntityBinary",Code:"Code",ParametricQuery:"ParametricQuery",MemberInfo:"MemberInfo",QueryParameter:"QueryParameter",ComplexEntityField:"ComplexEntityField",Take:"Take",Skip:"Skip",OrderBy:"OrderBy",OrderByDescending:"OrderByDescending",Include:"Include",IndexedPhysicalAnd:"IndexedDBPhysicalAndFilterExpression",IndexedLogicalAnd:"IndexedDBLogicalAndFilterExpression",IndexedLogicalOr:"IndexedDBLogicalOrFilterExpression",IndexedLogicalIn:"IndexedDBLogicalInFilterExpression"}),a["default"].BinaryOperator=function(){},a["default"].binaryOperators=[{operator:"==",expressionType:a["default"].Expressions.ExpressionType.Equal,type:"boolean",implementation:function(e,t){return e==t}},{operator:"===",expressionType:a["default"].Expressions.ExpressionType.EqualTyped,type:"boolean",implementation:function(e,t){return e===t}},{operator:"!=",expressionType:a["default"].Expressions.ExpressionType.NotEqual,type:"boolean",implementation:function(e,t){return e!=t}},{operator:"!==",expressionType:a["default"].Expressions.ExpressionType.NotEqualTyped,type:"boolean",implementation:function(e,t){return e!==t}},{operator:">",expressionType:a["default"].Expressions.ExpressionType.GreaterThen,type:"boolean",implementation:function(e,t){return e>t}},{operator:">=",expressionType:a["default"].Expressions.ExpressionType.GreaterThenOrEqual,type:"boolean",implementation:function(e,t){return e>=t}},{operator:"<=",expressionType:a["default"].Expressions.ExpressionType.LessThenOrEqual,type:"boolean",implementation:function(e,t){return t>=e}},{operator:"<",expressionType:a["default"].Expressions.ExpressionType.LessThen,type:"boolean",implementation:function(e,t){return t>e}},{operator:"&&",expressionType:a["default"].Expressions.ExpressionType.And,type:"boolean",implementation:function(e,t){return e&&t}},{operator:"||",expressionType:a["default"].Expressions.ExpressionType.Or,type:"boolean",implementation:function(e,t){return e||t}},{operator:"&",expressionType:a["default"].Expressions.ExpressionType.AndBitwise,type:"number",implementation:function(e,t){return e&t}},{operator:"|",expressionType:a["default"].Expressions.ExpressionType.OrBitwise,type:"number",implementation:function(e,t){return e|t}},{operator:"+",expressionType:a["default"].Expressions.ExpressionType.Add,type:"number",implementation:function(e,t){return e+t}},{operator:"-",expressionType:a["default"].Expressions.ExpressionType.Subtract,type:"number",implementation:function(e,t){return e-t}},{operator:"/",expressionType:a["default"].Expressions.ExpressionType.Divide,type:"number",implementation:function(e,t){return e/t}},{operator:"%",expressionType:a["default"].Expressions.ExpressionType.Modulo,type:"number",implementation:function(e,t){return e%t}},{operator:"*",expressionType:a["default"].Expressions.ExpressionType.Multiply,type:"number",implementation:function(e,t){return e*t}},{operator:"[",expressionType:a["default"].Expressions.ExpressionType.ArrayIndex,type:"number",implementation:function(e,t){return e[t]}},{operator:"in",expressionType:a["default"].Expressions.ExpressionType.In,type:"boolean",implementation:function(e,t){return e in t}}],a["default"].binaryOperators.resolve=function(e){var t=a["default"].binaryOperators.filter(function(t){return t.operator==e});return t.length>0?e:void 0},a["default"].binaryOperators.contains=function(e){return a["default"].binaryOperators.some(function(t){return t.operator==e})},a["default"].binaryOperators.getOperator=function(e){var t=a["default"].binaryOperators.filter(function(t){return t.operator==e});return t.length<1&&s.Guard.raise("Unknown operator: "+e),t[0]},a["default"].unaryOperators=[{operator:"+",arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Positive,type:"number",implementation:function(e){return+e}},{operator:"-",arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Negative,type:"number",implementation:function(e){return-e}},{operator:"++",arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Increment,type:"number",implementation:function(e){return++e}},{operator:"--",arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Decrement,type:"number",implementation:function(e){return--e}},{operator:"++",arity:"suffix",expressionType:a["default"].Expressions.ExpressionType.Increment,type:"number",implementation:function(e){return e++}},{operator:"!",arity:"prefix",expressionType:a["default"].Expressions.ExpressionType.Not,type:"boolean",implementation:function(e){return!e}},{operator:"--",arity:"suffix",expressionType:a["default"].Expressions.ExpressionType.Decrement,type:"number",implementation:function(e){return e--}}],a["default"].unaryOperators.resolve=function(e){var t=a["default"].unaryOperators.filter(function(t){return t.operator==e});return t.length>0?e:void 0},a["default"].unaryOperators.contains=function(e){return a["default"].unaryOperators.some(function(t){return t.operator==e})},a["default"].unaryOperators.getOperator=function(e,t){var n=a["default"].unaryOperators.filter(function(n){return n.operator==e&&(!t||n.arity==t)});return n.length<1&&s.Guard.raise("Unknown operator: "+e),n[0]},a["default"].timeIt=function(e,t){t=t||1,console.time("!");for(var n=0;t>n;n++)e();console.timeEnd("!")},a["default"].Expressions.OperatorTypes={UNARY:"UNARY",INCDEC:"INCDEC",DECISION:"DECISION",METHODCALL:"METHODCALL",NEW:"NEW",JSONASSIGN:"JSONASSIGN",ARRAYACCESS:"ARRAYACCESS",UNKNOWN:"UNKNOWN"},a["default"].executable=!0,(0,s.$C)("$data.Expressions.ExpressionNode",null,null,{constructor:function(){this.expressionType=this.constructor},toJSON:function(){var e=JSON.parse(JSON.stringify(this));return e.expressionType=s.Container.resolveName(this._expressionType),e},getJSON:function(){return i(this)},expressionType:{set:function(e){"string"==typeof e&&(e=s.Container.resolveType(e)),this._expressionType=e},get:function(e){return this._expressionType},enumerable:!0},nodeType:{value:a["default"].Expressions.ExpressionType.Unknown,writable:!1},type:{},isTerminated:{value:!1},toString:function(){return this.value}},null),(0,s.$C)("$data.Expressions.UnaryExpression",a["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r){this.operand=e,this.operator=t,this.nodeType=n,this.resolution=r},operator:{value:void 0,writable:!0},operand:{value:void 0,writable:!0},nodeType:{value:void 0,writable:!0}}),n["default"]=a["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],81:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.FunctionExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){this.parameters=t||[],this.name=e,this.body=n},toString:function(e){var t=this.parameters.map(function(e){return e.toString()});t=t.join(",");var n=this.body?this.body.toString(e):"";return"function "+this.name+"("+t+") { "+n+"}"},nodeType:{value:s["default"].Expressions.ExpressionType.Function,writable:!0},parameters:{value:void 0,dataType:Array,elementType:s["default"].Expressions.ParameterExpression},body:{value:void 0,dataType:s["default"].Expressions.ExpressionNode},type:{}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ObjectFieldExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){this.fieldName=e,this.expression=t},nodeType:{value:s["default"].Expressions.ExpressionType.ObjectField,writable:!0},toString:function(e){var t="unimplemented";return t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ObjectLiteralExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e){this.members=e},nodeType:{value:s["default"].Expressions.ExpressionType.ObjectLiteral,writable:!0},toString:function(e){var t="unimplemented";return t},implementation:{get:function(){return function(e){var t={};return e.forEach(function(e){t[e.name]=e.value}),t}},set:function(){}}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.PagingExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){this.source=e,this.amount=t,this.nodeType=n},nodeType:{value:s["default"].Expressions.ExpressionType.Unknown,writable:!0},toString:function(e){var t="unimplemented";return t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],85:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ParameterExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n){this.nodeType=n||s["default"].Expressions.ExpressionType.Parameter,this.name=e,this.type=t||"unknown"},owningFunction:{value:void 0,enumerable:!1},nodeType:{value:s["default"].Expressions.ExpressionType.Parameter,writable:!0},name:{value:void 0,dataType:String,writable:!0},type:{value:void 0,dataType:"object",writable:!0},toString:function(e){var t;return t=e?this.type+" ":"",t+=this.name}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],86:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.PropertyExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t){this.expression=e,this.member=t,this.type=t.dataType},nodeType:{value:s["default"].Expressions.ExpressionType.MemberAccess},expression:{value:void 0,dataType:s["default"].Expressions.ExpressionNode,writable:!0},implementation:{get:function(){return function(e,t){return void 0===e[t]&&i.Guard.raise(new i.Exception("Parameter '"+t+"' not found in context","Property not found!")),e[t]}},set:function(){}},member:{value:void 0,dataType:s["default"].MemberDefinition,writable:!0},type:{value:void 0,writable:!0},toString:function(e){return this.expression.toString()+"."+this.member.toString()}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.SimpleBinaryExpression",s["default"].Expressions.ExpressionNode,null,{constructor:function(e,t,n,r,i,s){this.left=e,this.right=t,this.nodeType=n,this.operator=r,this.type=i,this.resolution=s},implementation:{get:function(){return s["default"].binaryOperators.getOperator(this.operator).implementation},set:function(){}},type:{value:"number",writable:!0}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ThisExpression",s["default"].Expressions.ExpressionNode,null,{nodeType:{value:s["default"].Expressions.ExpressionType.This}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],89:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(exports,"__esModule",{value:!0});var _index=_dereq_("../../../TypeSystem/index.js"),_index2=_interopRequireDefault(_index);_index2["default"].Class.define("$data.Expressions.ExecutorVisitor",_index2["default"].Expressions.ExpTreeVisitor,null,{VisitVariable:function(e,t){if(!e.executable)return e;var n=e.name==t.paramsName?t.paramContext:_index2["default"].__global[e.name];return"undefined"==typeof n&&_index.Guard.raise(new _index.Exception("Unknown variable in '"+t.operation+"' operation. The variable isn't referenced in the parameter context and it's not a global variable: '"+e.name+"'.","InvalidOperation",{operationName:t.operation,missingParameterName:e.name})),_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof n?"undefined":_typeof(n),n)},VisitMember:function(e,t){if(!e.executable)return e;for(var n,r=this.GetMemberChain(e),i=0;i<r.length;i++)n=0==i?t.paramContext:n[r[i].name];return _index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof n?"undefined":_typeof(n),n)},VisitUnary:function VisitUnary(eNode,context){var operand=this.Visit(eNode.operand,context);if(operand!==eNode.operand&&(eNode=_index2["default"].Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(eNode.executable,eNode.operator,operand)),!eNode.executable)return eNode;var value,src,operandValue="string"==operand.valueType?"'"+operand.value+"'":operand.value;return src="value = "+eNode.operator+" "+operandValue,eval(src),_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof value?"undefined":_typeof(value),value)},VisitIncDec:function(e,t){var n=this.Visit(e.operand,t);if(n!==e.operand&&(e=_index2["default"].Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(e.executable,e.operator,n,e.suffix)),!e.executable)return e;var r;return r=e.suffix?"++"==e.operator?n.value++:n.value--:"++"==e.operator?++n.value:--n.value,_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof r?"undefined":_typeof(r),r)},VisitBinary:function VisitBinary(eNode,context){var left=this.Visit(eNode.left,context),right=this.Visit(eNode.right,context);if((left!==eNode.left||right!==eNode.right)&&(eNode=_index2["default"].Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(eNode.executable,eNode.operator,left,right)),!eNode.executable)return eNode;var value,src,leftValue="string"==left.valueType?"'"+left.value+"'":left.value,rightValue="string"==right.valueType?"'"+right.value+"'":right.value;return src="value = "+leftValue+" "+eNode.operator+" "+rightValue,eval(src),_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof value?"undefined":_typeof(value),value)},VisitEquality:function VisitEquality(eNode,context){var left=this.Visit(eNode.left,context),right=this.Visit(eNode.right,context);if((left!==eNode.left||right!==eNode.right)&&(eNode=_index2["default"].Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(eNode.executable,eNode.operator,left,right)),!eNode.executable)return eNode;var value,src,leftValue="string"==left.valueType?"'"+left.value+"'":left.value,rightValue="string"==right.valueType?"'"+right.value+"'":right.value;return src="value = "+leftValue+" "+eNode.operator+" "+rightValue,eval(src),_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof value?"undefined":_typeof(value),value)},VisitDecision:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.left,t),i=this.Visit(e.right,t);if((n!==e.expression||r!==e.left||i!==e.right)&&(e=_index2["default"].Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(e.executable,n,r,i)),!e.executable)return e;var s=n.value?r.value:i.value;return _index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof s?"undefined":_typeof(s),s)},VisitMethodCall:function VisitMethodCall(eNode,context){var object=eNode.object?this.Visit(eNode.object,context):null,args=this.VisitArray(eNode.args,context);if((object!==eNode.object||args!=eNode.args)&&(eNode=_index2["default"].Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(eNode.executable,object,eNode.method,args)),!eNode.executable)return eNode;for(var a=[],i=0;i<args.length;i++){var arg=args[i],t=_typeof(arg.value);a.push("string"==t?"'"+arg.value+"'":arg.value)}var value,src=object?"value = object.value[eNode.method]("+a.join(",")+");":"value = "+eNode.method+"("+a.join(",")+");";return eval(src),_index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof value?"undefined":_typeof(value),value)},VisitArrayAccess:function(e,t){var n=this.Visit(e.array,t),r=this.Visit(e.index,t),i=n.value[r.value];return _index2["default"].Expressions.ExpressionNodeTypes.LiteralExpressionNode.create(!0,"undefined"==typeof i?"undefined":_typeof(i),i)}},null),exports["default"]=_index2["default"],module.exports=exports["default"]},{"../../../TypeSystem/index.js":32}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("../../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Expressions.ExpTreeVisitor",null,null,{constructor:function(){this._deep=0},Visit:function(e,t){this._deep=this._deep+1;var n=null;switch(e.type){case LITERAL:n=this.VisitLiteral(e,t);break;case VARIABLE:n=this.VisitVariable(e,t);break;case MEMBERACCESS:n=this.VisitMember(e,t);break;case BINARY:n=this.VisitBinary(e,t);break;case UNARY:n=this.VisitUnary(e,t);break;case INCDEC:n=this.VisitIncDec(e,t);break;case EQUALITY:n=this.VisitEquality(e,t);break;case DECISION:n=this.VisitDecision(e,t);break;case METHODCALL:n=this.VisitMethodCall(e,t);break;case NEW:n=this.VisitNew(e,t);break;case JSONASSIGN:n=this.VisitJsonAssign(e,t);break;case ARRAYACCESS:n=this.VisitArrayAccess(e,t);break;default:i.Guard.raise("Type isn't implemented: "+e.type)}return this._deep=this._deep-1,n},VisitLiteral:function(e,t){return e},VisitVariable:function(e,t){return e},VisitMember:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.member,t);return n===e.expression&&r===e.member?e:s["default"].Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(e.executable,n,r)},VisitBinary:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right?e:s["default"].Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(e.executable,e.operator,n,r)},VisitUnary:function(e,t){var n=this.Visit(e.operand,t);return n===e.operand?e:s["default"].Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(e.executable,e.operator,n)},VisitIncDec:function(e,t){var n=this.Visit(e.operand,t);return n===e.operand?e:s["default"].Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(e.executable,e.operator,n,e.suffix)},VisitEquality:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right?e:s["default"].Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(e.executable,e.operator,n,r)},VisitDecision:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.left,t),i=this.Visit(e.right,t);return n===e.expression&&r===e.left&&i===e.right?e:s["default"].Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(e.executable,n,r,i)},VisitMethodCall:function(e,t){var n=e.object?this.Visit(e.object,t):null,r=this.VisitArray(e.args,t);return n===e.object&&r===e.args?e:s["default"].Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(e.executable,n,e.method,r)},VisitNew:function(e,t){var n=this.VisitArray(e.values,t);return n===e.values?e:s["default"].Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,n)},VisitJsonAssign:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right?e:(n.JSONASSIGN=!0,r.JSONASSIGN=!0,s["default"].Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0,n,r))},VisitArrayAccess:function(e,t){var n=this.Visit(e.array,t),r=this.Visit(e.index,t);return n===e.array&&r===e.index?e:s["default"].Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,n,r)},VisitArray:function(e,t){for(var n=[],r=!0,i=0;i<e.length;i++)n[i]=this.Visit(e[i],t),r=r&&n[i]===e[i];return r?e:n},GetMemberChain:function(e,t){if(e.expression.type==MEMBERACCESS){var n=this.GetMemberChain(e.expression,t);return n.push(e.member),n}return[e.expression,e.member]}},{})},{"../../../TypeSystem/index.js":32}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ExpressionVisitor",null,null,{constructor:function(){this._deep=0},Visit:function(e,t){if(!e)return e;var n=null;switch(e.expressionType){case s["default"].Expressions.ParameterExpression:n=this.VisitParameter(e,t);break;case s["default"].Expressions.ConstantExpression:n=this.VisitConstant(e,t);break;case s["default"].Expressions.FunctionExpression:n=this.VisitFunction(e,t);break;case s["default"].Expressions.CallExpression:n=this.VisitCall(e,t);break;case s["default"].Expressions.SimpleBinaryExpression:n=this.VisitBinary(e,t);break;case s["default"].Expressions.PropertyExpression:n=this.VisitProperty(e,t);break;case s["default"].Expressions.ThisExpression:s["default"].defaults.parameterResolutionCompatibility?n=this.VisitThis(e,t):i.Guard.raise("Keyword 'this' is not allowed. You should get value from parameter. (it, p1) => it.Title == p1");break;case s["default"].Expressions.ObjectLiteralExpression:n=this.VisitObjectLiteral(e,t);break;case s["default"].Expressions.ObjectFieldExpression:n=this.VisitObjectField(e,t);break;case s["default"].Expressions.ArrayLiteralExpression:n=this.VisitArrayLiteral(e,t);break;case s["default"].Expressions.UnaryExpression:n=this.VisitUnary(e,t);break;case s["default"].Expressions.EntityContextExpression:n=this.VisitEntityContext(e,t)}return this._deep=this._deep-1,n},VisitArrayLiteral:function(e,t){var n=this,r=e.items.map(function(e){return n.Visit(e,t)}),s=i.Container.createArrayLiteralExpression(r);return s},VisitObjectLiteral:function(e,t){var n=this,r=e.members.map(function(e){return n.Visit(e,t)}),s=i.Container.createObjectLiteralExpression(r);return s},VisitObjectField:function(e,t){var n=this.Visit(e.expression,t),r=i.Container.createObjectFieldExpression(e.fieldName,n);return r},VisitThis:function(e,t){return e},VisitCall:function(e,t){var n=e.args.map(function(e){return this.Visit(e,t)},this),r=this.Visit(e.expression,t),i=this.Visit(e.member,t);return new s["default"].Expressions.CallExpression(r,i,n)},VisitParameter:function(e,t){return e},VisitConstant:function(e,t){return e},VisitFunction:function(e,t){var n=this,r=e.parameters.map(function(e,r){return n.Visit(e,t)}),i=n.Visit(e.body,t),a=new s["default"].Expressions.FunctionExpression(e.name,r,i);return a},VisitBinary:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return new s["default"].Expressions.SimpleBinaryExpression(n,r,e.nodeType,e.operator,e.type)},VisitProperty:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.member,t);return new s["default"].Expressions.PropertyExpression(n,r)},VisitUnary:function(e,t){var n=this.Visit(e.operand,t);return n===e.operand?e:new s["default"].Expressions.UnaryExpression(n,e.operator,e.nodeType)},VisitEntityContext:function(e,t){return e},VisitDecision:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.left,t),i=this.Visit(e.right,t);return n===e.expression&&r===e.left&&i===e.right?e:s["default"].Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(e.executable,n,r,i)},VisitNew:function(e,t){var n=this.VisitArray(e.values,t);return n===e.values?e:s["default"].Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,n)},VisitArrayAccess:function(e,t){var n=this.Visit(e.array,t),r=this.Visit(e.index,t);return n===e.array&&r===e.index?e:s["default"].Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,n,r)},VisitArray:function(e,t){for(var n=[],r=!0,i=0;i<e.length;i++)n[i]=this.Visit(e[i],t),r=r&&n[i]===e[i];return r?e:n},GetMemberChain:function(e,t){if(e.expression.type==MEMBERACCESS){var n=this.GetMemberChain(e.expression,t);return n.push(e.member),n}return[e.expression,e.member]}},{}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../TypeSystem/index.js"),a=r(s);(0,s.$C)("$data.Expressions.GlobalContextProcessor",a["default"].Expressions.ParameterProcessor,null,{constructor:function(e){this.global=e},canResolve:function(e){return(e.nodeType==a["default"].Expressions.ExpressionType.Parameter||a["default"].defaults.parameterResolutionCompatibility&&e.nodeType==a["default"].Expressions.ExpressionType.ParameterReference)&&this.global&&"object"===i(this.global)&&e.name in this.global},resolve:function(e){var t=this.global[e.name],n=s.Container.createConstantExpression(t,"undefined"==typeof t?"undefined":i(t),e.name);return n}}),(0,s.$C)("$data.Expressions.ConstantValueResolver",a["default"].Expressions.ParameterProcessor,null,{constructor:function(e,t,n){this.globalResolver=s.Container.createGlobalContextProcessor(t),this.paramResolver=s.Container.createGlobalContextProcessor(e),this.paramsObject=e,this.scopeContext=n},canResolve:function(e){return a["default"].defaults.parameterResolutionCompatibility?"$context"===e.name||e.nodeType==a["default"].Expressions.ExpressionType.This&&this.paramsObject?!0:this.paramResolver.canResolve(e)||this.globalResolver.canResolve(e):"$context"===e.name?!0:this.paramResolver.canResolve(e)},resolve:function(e){return"$context"===e.name?s.Container.createEntityContextExpression(this.scopeContext):a["default"].defaults.parameterResolutionCompatibility?e.nodeType==a["default"].Expressions.ExpressionType.This?s.Container.createConstantExpression(this.paramsObject,i(this.paramsObject),"this"):this.paramResolver.canResolve(e)?this.paramResolver.resolve(e):this.globalResolver.resolve(e):this.paramResolver.resolve(e)}}),n["default"]=a["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],93:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.LambdaParameterProcessor",s["default"].Expressions.ParameterProcessor,null,{constructor:function(e){var t={};this.canResolve=function(n,r){if(n.nodeType==s["default"].Expressions.ExpressionType.LambdaParameter){var i=n.owningFunction.parameters;if(1==i.length&&n.name==i[0].name)return t[n.name]=e[0],!0;for(var a=0;a<i.length;a++)if(i[a].name==n.name)return t[n.name]=e[a],!0;return!1}return!1},this.resolve=function(e,n){var r=t[e.name],a=i.Container.createParameterExpression(e.name,r,s["default"].Expressions.ExpressionType.LambdaParameter);return a.owningFunction=e.owningFunction,a}}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../TypeSystem/index.js"),a=r(s);(0,s.$C)("$data.Expressions.LocalContextProcessor",a["default"].Expressions.GlobalContextProcessor,null,{constructor:function(e){this.canResolve=function(t){return t.nodeType==a["default"].Expressions.ExpressionType.Parameter&&"undefined"!==e("typeof "+t.name)},this.resolve=function(t){var n=e(t.name),r=s.Container.createConstantExpression(n,"undefined"==typeof n?"undefined":i(n));return r}}}),n["default"]=a["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.LogicalSchemaBinderVisitor",s["default"].Expressions.ExpressionVisitor,null,{constructor:function(e,t){},VisitProperty:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.member,t),s=n.type,a=t.memberResolver.resolve(s,r.value);return r.type=a,i.Container.createPropertyExpression(n,r)}},{}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Expressions.ParameterProcessor",s["default"].Expressions.ExpressionVisitor,null,{constructor:function(){},Visit:function(e,t){if((e instanceof s["default"].Expressions.ParameterExpression||e instanceof s["default"].Expressions.ThisExpression)&&this.canResolve(e)){var n=this.resolve(e,t);return n!==e&&(n.resolvedBy=this.constructor.name),n}return e},canResolve:function(e){i.Guard.raise("Pure method")},resolve:function(e){i.Guard.raise("Pure method")}}),n["default"]=s["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../TypeSystem/index.js"),a=r(s);(0,s.$C)("$data.Expressions.ParameterResolverVisitor",a["default"].Expressions.ExpressionVisitor,null,{constructor:function(e,t){this.lambdaParamCache={},this.paramCache={}},Visit:function(e,t){return a["default"].Expressions.ExpressionVisitor.prototype.Visit.call(this,e,t);
},VisitArrayLiteral:function(e,t){var n=this,r=e.items.map(function(e){return n.Visit(e,t)}),i=r.every(function(e){return e instanceof a["default"].Expressions.ConstantExpression});return i?(r=r.map(function(e){return e.value}),s.Container.createConstantExpression(r,"array")):s.Container.createArrayLiteralExpression(r)},VisitObjectLiteral:function(e,t){var n=this,r=e.members.map(function(e){return n.Visit(e,t)}),o=r.every(function(e){return e.expression instanceof a["default"].Expressions.ConstantExpression});if(o){var u=r.map(function(e){return{name:e.fieldName,value:e.expression.value}}),l=e.implementation(u);return s.Container.createConstantExpression(l,"undefined"==typeof l?"undefined":i(l))}return s.Container.createObjectLiteralExpression(r)},VisitThis:function(e,t){return t.Visit(e,t)},VisitParameter:function(e,t){var n;switch(e.nodeType){case a["default"].Expressions.ExpressionType.Parameter:return n=t.Visit(e,t),this.paramCache[n.name]=n,n;case a["default"].Expressions.ExpressionType.ParameterReference:if(a["default"].defaults.parameterResolutionCompatibility)return t.Visit(e,t);var r=this.paramCache[e.name];if(r)return r;s.Guard.raise("Missing parameter '"+e.name+"'");break;case a["default"].Expressions.ExpressionType.LambdaParameter:return n=t.Visit(e,t),this.lambdaParamCache[n.name]=n,n;case a["default"].Expressions.ExpressionType.LambdaParameterReference:var i=this.lambdaParamCache[e.name];if(i)return n=s.Container.createParameterExpression(e.name,i.type,a["default"].Expressions.ExpressionType.LambdaParameterReference),n.paramIndex=e.paramIndex,n;break;default:return e}return e},VisitConstant:function(e,t){return e},VisitFunction:function(e,t){var n=this,r=e.parameters.map(function(e,r){var i=n.Visit(e,t);return i}),i=n.Visit(e.body,t),s=new a["default"].Expressions.FunctionExpression(e.name,r,i);return s},VisitBinary:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t),o=a["default"].Expressions;if(n instanceof o.ConstantExpression&&r instanceof o.ConstantExpression){var u=e.implementation(n.value,r.value);return s.Container.createConstantExpression(u,"undefined"==typeof u?"undefined":i(u))}return new s.Container.createSimpleBinaryExpression(n,r,e.nodeType,e.operator,e.type)},VisitUnary:function(e,t){var n=this.Visit(e.operand,t),r=a["default"].Expressions;if(n instanceof r.ConstantExpression){var o=e.operator.implementation(n.value);return s.Container.createConstantExpression(o,"undefined"==typeof o?"undefined":i(o))}return new s.Container.createUnaryExpression(n,e.operator,e.nodeType)},VisitProperty:function(e,t){var n,r=this.Visit(e.expression,t),o=this.Visit(e.member,t);return r instanceof a["default"].Expressions.ConstantExpression&&o instanceof a["default"].Expressions.ConstantExpression?(n=e.implementation(r.value,o.value),s.Container.createConstantExpression(n,"undefined"==typeof n?"undefined":i(n),r.name+"$"+o.value)):r===e.expression&&o===e.member?e:n=s.Container.createPropertyExpression(r,o)},VisitCall:function(e,t){function n(e,t,n){return t instanceof a["default"].Expressions.ConstantExpression&&(!n||n instanceof a["default"].Expressions.ConstantExpression)&&e.every(function(e){return e instanceof a["default"].Expressions.ConstantExpression})}function r(e){return e instanceof a["default"].Expressions.ConstantExpression?e.value:e}var o=a["default"].Expressions.ExpressionVisitor.prototype.VisitCall.apply(this,arguments),u=o.expression,l=o.member,p=o.args;if(n(p,l,u)){var d=l.value;"string"==typeof d&&u.value&&(d=u.value[d]),"function"!=typeof d&&s.Guard.raise("Constant expression is not a method...");var c=e.implementation(u.value,d,p.map(r));return new a["default"].Expressions.ConstantExpression(c,"undefined"==typeof c?"undefined":i(c))}return o}},{}),(0,s.$C)("$data.Expressions.AggregatedVisitor",a["default"].Expressions.ExpressionVisitor,null,{constructor:function(e){this.Visit=function(t,n){for(var r=0;r<e.length;r++){var i=e[r].Visit(t,n);if(i!==t)return i}return t}}}),n["default"]=a["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.Expressions.SetExecutableVisitor",a["default"].Expressions.ExpTreeVisitor,null,{Visit:function(e,t){switch(e.type){case LITERAL:return this.VisitLiteral(e,t);case VARIABLE:return this.VisitVariable(e,t);case MEMBERACCESS:return this.VisitMember(e,t);case BINARY:return this.VisitBinary(e,t);case UNARY:return this.VisitUnary(e,t);case INCDEC:return this.VisitIncDec(e,t);case EQUALITY:return this.VisitEquality(e,t);case DECISION:return this.VisitDecision(e,t);case METHODCALL:return this.VisitMethodCall(e,t);case NEW:return this.VisitNew(e,t);case JSONASSIGN:return this.VisitJsonAssign(e,t);case ARRAYACCESS:return this.VisitArrayAccess(e,t);default:s.Guard.raise("Type isn't implemented: "+e.type)}},VisitBinary:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right&&n.executable&&r.executable==e.executable?e:a["default"].Expressions.ExpressionNodeTypes.BinaryExpressionNode.create(n.executable&&r.executable,e.operator,n,r)},VisitUnary:function(e,t){var n=this.Visit(e.operand,t);return n===e.operand?e:a["default"].Expressions.ExpressionNodeTypes.UnaryExpressionNode.create(n.executable,e.operator,n)},VisitIncDec:function(e,t){var n=this.Visit(e.operand,t);return n===e.operand?e:a["default"].Expressions.ExpressionNodeTypes.IncDecExpressionNode.create(n.executable,e.operator,n,e.suffix)},VisitEquality:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right&&n.executable&&r.executable==e.executable?e:a["default"].Expressions.ExpressionNodeTypes.EqualityExpressionNode.create(n.executable&&r.executable,e.operator,n,r)},VisitDecision:function(e,t){var n=this.Visit(e.expression,t),r=this.Visit(e.left,t),i=this.Visit(e.right,t);return n===e.expression&&r===e.left&&i===e.right&&r.executable&&i.executable&&n.executable==e.executable?e:a["default"].Expressions.ExpressionNodeTypes.DecisionExpressionNode.create(r.executable&&i.executable&&n.executable,n,r,i)},VisitMethodCall:function(e,t){var n=e.object?this.Visit(e.object,t):null,r=this.VisitArray(e.args,t);return n===e.object&&r===e.args&&(null==n?!0:n.executable)==e.executable?e:a["default"].Expressions.ExpressionNodeTypes.MethodcallExpressionNode.create(null==n?!0:n.executable,n,e.method,r)},VisitNew:function(e,t){var n=this.VisitArray(e.values,t);return n===e.values?e:a["default"].Expressions.ExpressionNodeTypes.NewExpressionNode.create(!0,n)},VisitJsonAssign:function(e,t){var n=this.Visit(e.left,t),r=this.Visit(e.right,t);return n===e.left&&r===e.right?e:(n.JSONASSIGN=!0,r.JSONASSIGN=!0,a["default"].Expressions.ExpressionNodeTypes.JsonAssignExpressionNode.create(!0,n,r))},VisitArrayAccess:function(e,t){var n=this.Visit(e.array,t),r=this.Visit(e.index,t);return n===e.array&&r===e.index?e:a["default"].Expressions.ExpressionNodeTypes.ArrayAccessExpressionNode.create(!0,n,r)},VisitArray:function(e,t){for(var n=[],r=!0,i=0;i<e.length;i++)n[i]=this.Visit(e[i],t),r=r&&n[i]===e[i];return r?e:n},VisitLiteral:function(e,t){return{type:e.type,executable:!0,value:e.value,valueType:e.valueType}},VisitVariable:function(e,t){return void 0==i(t.paramContext[e.name])&&s.Guard.raise("Variable is not defined in the paramContext: "+e.name),a["default"].Expressions.ExpressionNodeTypes.VariableExpressionNode.create(!0,"Math","GLOBALOBJECT")},VisitMember:function(e,t){var n=this.GetMemberChain(e),r=n[0].name,i=t.lambdaParams.indexOf(r)>=0,o=r==t.paramsName;return o||i||s.Guard.raise("Variable is not defined in the paramContext or the lambda parameters: "+r),a["default"].Expressions.ExpressionNodeTypes.MemberAccessExpressionNode.create(o,e.expression,e.member)}},null),n["default"]=a["default"],t.exports=n["default"]},{"../../../TypeSystem/index.js":32}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i),a=e("./ExpressionNode2.js"),o=(r(a),e("./ArrayLiteralExpression.js")),u=(r(o),e("./CallExpression.js")),l=(r(u),e("./CodeParser.js")),p=(r(l),e("./ConstantExpression.js")),d=(r(p),e("./FunctionExpression.js")),c=(r(d),e("./ObjectFieldExpression.js")),f=(r(c),e("./ObjectLiteralExpression.js")),y=(r(f),e("./PagingExpression.js")),h=(r(y),e("./ParameterExpression.js")),m=(r(h),e("./PropertyExpression.js")),x=(r(m),e("./SimpleBinaryExpression.js")),g=(r(x),e("./ThisExpression.js")),v=(r(g),e("./Visitors/ExpressionVisitor.js")),E=(r(v),e("./Visitors/ParameterProcessor.js")),b=(r(E),e("./Visitors/GlobalContextProcessor.js")),T=(r(b),e("./Visitors/LocalContextProcessor.js")),C=(r(T),e("./Visitors/LambdaParameterProcessor.js")),_=(r(C),e("./Visitors/ParameterResolverVisitor.js")),S=(r(_),e("./Visitors/LogicalSchemaBinderVisitor.js")),P=(r(S),e("./Visitors/ExpTreeVisitor.js")),M=(r(P),e("./Visitors/SetExecutableVisitor.js")),j=(r(M),e("./Visitors/ExecutorVisitor.js")),w=(r(j),e("./ExpressionBuilder.js")),A=(r(w),e("./EntityExpressions/AssociationInfoExpression.js")),O=(r(A),e("./EntityExpressions/CodeExpression.js")),N=(r(O),e("./EntityExpressions/CodeToEntityConverter.js")),k=(r(N),e("./EntityExpressions/ComplexTypeExpression.js")),V=(r(k),e("./EntityExpressions/EntityContextExpression.js")),G=(r(V),e("./EntityExpressions/EntityExpression.js")),B=(r(G),e("./EntityExpressions/EntityExpressionVisitor.js")),D=(r(B),e("./EntityExpressions/ExpressionMonitor.js")),$=(r(D),e("./EntityExpressions/EntityFieldExpression.js")),I=(r($),e("./EntityExpressions/EntityFieldOperationExpression.js")),L=(r(I),e("./EntityExpressions/EntitySetExpression.js")),F=(r(L),e("./EntityExpressions/FrameOperationExpression.js")),R=(r(F),e("./EntityExpressions/FilterExpression.js")),q=(r(R),e("./EntityExpressions/IncludeExpression.js")),U=(r(q),e("./EntityExpressions/MemberInfoExpression.js")),Q=(r(U),e("./EntityExpressions/OrderExpression.js")),H=(r(Q),e("./EntityExpressions/ParametricQueryExpression.js")),J=(r(H),e("./EntityExpressions/ProjectionExpression.js")),z=(r(J),e("./EntityExpressions/QueryExpressionCreator.js")),K=(r(z),e("./EntityExpressions/QueryParameterExpression.js")),W=(r(K),e("./EntityExpressions/RepresentationExpression.js")),Y=(r(W),e("./EntityExpressions/ServiceOperationExpression.js")),X=(r(Y),e("./ContinuationExpressionBuilder.js"));r(X);s["default"].defaults=s["default"].defaults||{},s["default"].defaults.parameterResolutionCompatibility=!0,n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32,"./ArrayLiteralExpression.js":52,"./CallExpression.js":53,"./CodeParser.js":54,"./ConstantExpression.js":55,"./ContinuationExpressionBuilder.js":56,"./EntityExpressions/AssociationInfoExpression.js":57,"./EntityExpressions/CodeExpression.js":58,"./EntityExpressions/CodeToEntityConverter.js":59,"./EntityExpressions/ComplexTypeExpression.js":60,"./EntityExpressions/EntityContextExpression.js":61,"./EntityExpressions/EntityExpression.js":62,"./EntityExpressions/EntityExpressionVisitor.js":63,"./EntityExpressions/EntityFieldExpression.js":64,"./EntityExpressions/EntityFieldOperationExpression.js":65,"./EntityExpressions/EntitySetExpression.js":66,"./EntityExpressions/ExpressionMonitor.js":67,"./EntityExpressions/FilterExpression.js":68,"./EntityExpressions/FrameOperationExpression.js":69,"./EntityExpressions/IncludeExpression.js":70,"./EntityExpressions/MemberInfoExpression.js":71,"./EntityExpressions/OrderExpression.js":72,"./EntityExpressions/ParametricQueryExpression.js":73,"./EntityExpressions/ProjectionExpression.js":74,"./EntityExpressions/QueryExpressionCreator.js":75,"./EntityExpressions/QueryParameterExpression.js":76,"./EntityExpressions/RepresentationExpression.js":77,"./EntityExpressions/ServiceOperationExpression.js":78,"./ExpressionBuilder.js":79,"./ExpressionNode2.js":80,"./FunctionExpression.js":81,"./ObjectFieldExpression.js":82,"./ObjectLiteralExpression.js":83,"./PagingExpression.js":84,"./ParameterExpression.js":85,"./PropertyExpression.js":86,"./SimpleBinaryExpression.js":87,"./ThisExpression.js":88,"./Visitors/ExecutorVisitor.js":89,"./Visitors/ExpTreeVisitor.js":90,"./Visitors/ExpressionVisitor.js":91,"./Visitors/GlobalContextProcessor.js":92,"./Visitors/LambdaParameterProcessor.js":93,"./Visitors/LocalContextProcessor.js":94,"./Visitors/LogicalSchemaBinderVisitor.js":95,"./Visitors/ParameterProcessor.js":96,"./Visitors/ParameterResolverVisitor.js":97,"./Visitors/SetExecutableVisitor.js":98}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.ItemStoreClass",null,null,{constructor:function(){var e=this;e.itemStoreConfig={aliases:{},contextTypes:{}},e.resetStoreToDefault("local",!0),a["default"].addStore=function(){return e.addItemStoreAlias.apply(e,arguments)},a["default"].implementation=e.implementation,a["default"].Entity.addMember("storeToken",{get:function(){return this.storeConfigs&&this.storeConfigs["default"]?this.storeConfigs.stores[this.storeConfigs["default"]]:void 0},set:function(t){e._setTypeStoreConfig(this,"default",t)}},!0)},itemStoreConfig:{},attachMode:a["default"].EntityAttachMode?a["default"].EntityAttachMode.KeepChanges:!0,addItemStoreAlias:function(e,t,n){var r=this,o=new a["default"].PromiseHandler,u=o.createCallback();if("string"==typeof e){if("object"===("undefined"==typeof t?"undefined":i(t))&&"factory"in t){var l=s.Container.resolveType(t.typeName);return r.itemStoreConfig.aliases[e]=t.factory,r.itemStoreConfig.contextTypes[e]=l,n&&(r.itemStoreConfig["default"]=e),u.success(),o.getPromise()}if("function"==typeof t){var p,d=t();return d&&d instanceof a["default"].EntityContext?(u.success(d),p=o.getPromise()):p=d,p.then(function(i){return"function"==typeof i?r.addItemStoreAlias(e,i,n):i instanceof a["default"].EntityContext?i.onReady().then(function(i){return r.itemStoreConfig.aliases[e]=t,r.itemStoreConfig.contextTypes[e]=i.getType(),n&&(r.itemStoreConfig["default"]=e),i}):(o=new a["default"].PromiseHandler,u=o.createCallback(),u.error(new s.Exception("factory dont have context instance","Invalid arguments")),o.getPromise())})}}return u.error(new s.Exception("Name or factory missing","Invalid arguments")),o.getPromise()},resetStoreToDefault:function(e,t){this.itemStoreConfig.aliases[e]=this._getDefaultItemStoreFactory,delete this.itemStoreConfig.contextTypes[e],t&&(this.itemStoreConfig["default"]=e)},_setStoreAlias:function(e,t){return"object"!==("undefined"==typeof t?"undefined":i(t))||e.storeToken||(e.storeToken=t),e},_getStoreAlias:function(e,t){var n;if(e instanceof a["default"].Entity){var r=t||e.storeToken;if(r)return r;n=e.getType()}else n=e;return t||(n.storeConfigs?n.storeConfigs["default"]:void 0)||n.storeToken},_getStoreContext:function(e,t,n){var r=this._getContextPromise(e,t);if(!r||r instanceof a["default"].EntityContext){var i=new a["default"].PromiseHandler,o=i.createCallback();o.success(r),r=i.getPromise()}return r.then(function(e){if(e instanceof a["default"].EntityContext)return e.onReady();if(n)return null;var t=new a["default"].PromiseHandler,r=t.createCallback();return r.error(new s.Exception("factory return type error","Error")),t.getPromise()})},_getContextPromise:function(e,t){if(e&&"object"===("undefined"==typeof e?"undefined":i(e))&&"function"==typeof e.factory)return e.factory(t);if(e&&"object"===("undefined"==typeof e?"undefined":i(e))&&"object"===i(e.args)&&"string"==typeof e.typeName){var t=s.Container.resolveType(e.typeName);return new t(JSON.parse(JSON.stringify(e.args)))}return e&&"string"==typeof e&&t.storeConfigs&&t.storeConfigs.stores[e]&&"function"==typeof t.storeConfigs.stores[e].factory?t.storeConfigs.stores[e].factory():e&&"string"==typeof e&&t.storeConfigs&&t.storeConfigs.stores[e]?this._getDefaultItemStoreFactory(t,t.storeConfigs.stores[e]):e&&"string"==typeof e&&this.itemStoreConfig.aliases[e]?this.itemStoreConfig.aliases[e](t):e&&"function"==typeof e?e():this.itemStoreConfig.aliases[this.itemStoreConfig["default"]](t)},_getStoreEntitySet:function(e,t){var n=this._getStoreAlias(t,e),r="function"==typeof t?t:t.getType();return this._getStoreContext(n,r).then(function(e){var t=e.getEntitySetFromElementType(r);if(!t){var n=new a["default"].PromiseHandler,i=n.createCallback();return i.error("EntitySet not exist for "+r.fullName),n.getPromise()}return t})},_getDefaultItemStoreFactory:function(e,t){if(e){var n="function"==typeof e?e:e.getType(),r=a["default"].Container.resolveName(n)+"_items",r=r.replace(/\./g,"_"),s=a["default"].typeSystem.extend({collectionName:t&&t.collectionName?t.collectionName:"Items",tableName:r,initParam:{provider:"local",databaseName:r}},t),o={};o[s.collectionName]={type:a["default"].EntitySet,elementType:n},s.tableName&&(o[s.collectionName].tableName=s.tableName);var u=a["default"].EntityContext.extend(r,o),l=new u(s.initParam);return t&&"object"===("undefined"==typeof t?"undefined":i(t))&&(t.factory=l._storeToken.factory),l}},implementation:function(e,t){var n,r=a["default"].ItemStore;return"string"==typeof t?t=r.itemStoreConfig.contextTypes[t]:t instanceof a["default"].EntityContext?t=t.getType():"function"==typeof t&&t.isAssignableTo||(t=r.itemStoreConfig.contextTypes[r.itemStoreConfig["default"]]),t&&(n=r._resolveFromContext(t,e)),n||(n=s.Container.resolveType(e)),n},_resolveFromContext:function(e,t){for(var n=e.memberDefinitions.getPublicMappedProperties(),r=0;r<n.length;r++){var i=n[r];if(i.type){var o=s.Container.resolveType(i.type);if(o.isAssignableTo&&o.isAssignableTo(a["default"].EntitySet)){var u=s.Container.resolveType(i.elementType);if(u.name===t)return u}}}return null},EntityInstanceSave:function(e,t,n){var r=a["default"].ItemStore,i=this;return r._getStoreEntitySet(e,i).then(function(s){return r._getSaveMode(i,s,t,e).then(function(e){switch(e=e||"add"){case"add":s.add(i);break;case"attach":s.attach(i,n||!0);break;default:var t=new a["default"].PromiseHandler,o=t.createCallback();return o.error("save mode not supported: "+e),t.getPromise()}return s.entityContext.saveChanges().then(function(){return r._setStoreAlias(i,s.entityContext.storeToken),i})})})},EntityInstanceRemove:function(e){var t=a["default"].ItemStore,n=this;return t._getStoreEntitySet(e,n).then(function(e){return e.remove(n),e.entityContext.saveChanges().then(function(){return n})})},EntityInstanceRefresh:function(e,t){var n=a["default"].ItemStore,r=this,i=r.getType(),s=n._getKeyObjectFromEntity(r,i);return i.read(s,e).then(function(e){return i.memberDefinitions.getPublicMappedProperties().forEach(function(t){r[t.name]=e[t.name]}),r.storeToken=(t?r.storeToken:void 0)||e.storeToken,r.changedProperties=void 0,r})},EntityInheritedTypeProcessor:function(e){var t=a["default"].ItemStore;e.readAll=t.EntityTypeReadAll(e),e.read=t.EntityTypeRead(e),e.removeAll=t.EntityTypeRemoveAll(e),e.remove=t.EntityTypeRemove(e),e.get=t.EntityTypeGet(e),e.save=t.EntityTypeSave(e),e.addMany=t.EntityTypeAddMany(e),e.itemCount=t.EntityTypeItemCount(e),e.query=t.EntityTypeQuery(e),e.takeFirst=t.EntityTypeTakeFirst(e),e.setStore=t.EntityTypeSetStore(e)},EntityTypeReadAll:function(e){return function(t){var n=a["default"].ItemStore;return n._getStoreEntitySet(t,e).then(function(e){return e.forEach(function(t){n._setStoreAlias(t,e.entityContext.storeToken)})})}},EntityTypeRemoveAll:function(e){return function(t){var n=a["default"].ItemStore;return n._getStoreEntitySet(t,e).then(function(e){return e.toArray().then(function(t){return t.forEach(function(t){e.remove(t)}),e.entityContext.saveChanges().then(function(){return t})})})}},EntityTypeRead:function(e){return function(t,n){var r=a["default"].ItemStore;return r._getStoreEntitySet(n,e).then(function(e){try{var n=r._findByIdQueryable(e,t);return e.single(n.predicate,n.thisArgs).then(function(t){return r._setStoreAlias(t,e.entityContext.storeToken)})}catch(i){var s=new a["default"].PromiseHandler,o=s.createCallback();return o.error(i),s.getPromise()}})}},EntityTypeGet:function(e){return function(t,n){var r=a["default"].ItemStore,i=new e(r._getKeyObjectFromEntity(t));return i.refresh(n),i}},EntityTypeSave:function(e){return function(t,n,r){var i=(a["default"].ItemStore,new e(t));return i.save(n,r)}},EntityTypeAddMany:function(e){return function(t,n){var r=a["default"].ItemStore;return r._getStoreEntitySet(n,e).then(function(e){var n=e.addMany(t);return e.entityContext.saveChanges().then(function(){return n})})}},EntityTypeRemove:function(e){return function(t,n){var r,i=(a["default"].ItemStore,e.memberDefinitions.getKeyProperties());if(1===i.length){var s={};s[i[0].name]=t,r=new e(s)}else r=new e(t);return r.remove(n)}},EntityTypeItemCount:function(e){return function(t){var n=a["default"].ItemStore;return n._getStoreEntitySet(t,e).then(function(e){return e.length()})}},EntityTypeQuery:function(e){return function(t,n,r){var i=a["default"].ItemStore;return i._getStoreEntitySet(r,e).then(function(e){return e.filter(t,n).forEach(function(t){i._setStoreAlias(t,e.entityContext.storeToken)})})}},EntityTypeTakeFirst:function(e){return function(t,n,r){var i=a["default"].ItemStore;return i._getStoreEntitySet(r,e).then(function(e){return e.first(t,n).then(function(t){return i._setStoreAlias(t,e.entityContext.storeToken)})})}},EntityTypeSetStore:function(e){return function(t,n){"object"===("undefined"==typeof t?"undefined":i(t))&&"undefined"==typeof n&&(n=t,t="default");var r=a["default"].ItemStore,s={};if(n){if(n.tableName&&(s.tableName=n.tableName,delete n.tableName),n.collectionName&&(s.collectionName=n.collectionName,delete n.collectionName),"string"==typeof n.dataSource){var o=n.dataSource;o.lastIndexOf("/")===o.length-1&&(o=o.substring(0,o.lastIndexOf("/")));var u=o.substring(0,o.lastIndexOf("/"));s.tableName||(s.tableName=o.substring(o.lastIndexOf("/")+1));var l=n.provider||n.name;switch(l){case"oData":n.oDataServiceHost=n.oDataServiceHost||u;break;case"webApi":n.apiUrl=n.apiUrl||u}}}else n={name:"local"};return s.initParam=n,r._setTypeStoreConfig(e,t,s),e}},_setTypeStoreConfig:function(e,t,n){e.storeConfigs||(e.storeConfigs={stores:{}}),e.storeConfigs.stores[t]=n,"default"===t&&(e.storeConfigs["default"]=t)},_findByIdQueryable:function(e,t){var n=e.defaultType.memberDefinitions.getKeyProperties();if(n.length>1&&t&&"object"===("undefined"==typeof t?"undefined":i(t))){for(var r="",s={},a=0;a<n.length;a++){a>0&&(r+=" && ");var o=n[a];r+="it."+o.name+" == this."+o.name,s[o.name]=t[o.name]}return{predicate:r,thisArgs:s}}if(1===n.length)return{predicate:"it."+n[0].name+" == this.value",thisArgs:{value:t}};throw"invalid keys"},_getKeyObjectFromEntity:function(e,t){var n,r=t.memberDefinitions.getKeyProperties();if(1===r.length)n=e&&"object"===("undefined"==typeof e?"undefined":i(e))?e[r[0].name]:e;else{n={};for(var s=0;s<r.length;s++)n[r[0].name]=e?e[r[0].name]:e}return n},_getSaveMode:function(e,t,n,r){var i=this,s=new a["default"].PromiseHandler,o=s.createCallback(),u=e.getType();switch(!0){case"update"===n:o.success("attach");break;case"new"===n:o.success("add");break;case!1===u.memberDefinitions.getKeyProperties().every(function(t){return e[t.name]}):o.success("add");break;case!!e.storeToken:o.success("attach");break;default:r=this._getStoreAlias(e,r),u.read(i._getKeyObjectFromEntity(e,u),r).then(function(){o.success("attach")},function(){o.success("add")})}return s.getPromise()},ContextRegister:function(e){var t=this;"string"==typeof e.name&&(e.name=[e.name]);var n=JSON.parse(JSON.stringify(e));this.storeToken={typeName:this.getType().fullName,args:n,factory:function(){return new(t.getType())(n)}};for(var r=this.getType().memberDefinitions.getPublicMappedProperties(),i=0;i<r.length;i++){var o=r[i];if(o.type){var u=s.Container.resolveType(o.type);if(u&&u.isAssignableTo&&u.isAssignableTo(a["default"].EntitySet)){var l=s.Container.resolveType(o.elementType);l.storeToken||(l.storeToken=this.storeToken)}}}},QueryResultModifier:function(e){var t=a["default"].ItemStore,n=e.context,r=e.modelBinderConfig.$type;if("string"==typeof r&&(r=s.Container.resolveType(r)),r===a["default"].Array&&e.modelBinderConfig.$item&&e.modelBinderConfig.$item.$type&&(r=e.modelBinderConfig.$item.$type),"undefined"==typeof r&&e.result&&e.result[0]instanceof a["default"].Entity)for(var i=r?r.memberDefinitions.getPublicMappedProperties().filter(function(e){return!!e.inverseProperty}):[],o=0;o<e.result.length;o++){t._setStoreAlias(e.result[o],n.storeToken);for(var u=0;u<i.length;u++){var l=i[u];if(e.result[o][l.name]instanceof a["default"].Entity)t._setStoreAlias(e.result[o][l.name],n.storeToken);else if(Array.isArray(e.result[o][l.name]))for(var p=0;p<e.result[o][l.name].length;p++)e.result[o][l.name][p]instanceof a["default"].Entity&&t._setStoreAlias(e.result[o][l.name][p],n.storeToken)}}}}),a["default"].ItemStore=new a["default"].ItemStoreClass,a["default"].Entity.addMember("field",function(e){var t=this.memberDefinitions.getMember(e);if(t){if(t.definedBy===this)return new a["default"].MemberWrapper(t);s.Guard.raise(new s.Exception("Member '"+e+"' defined on '"+t.definedBy.fullName+"'!","Invalid Operation"))}else s.Guard.raise(new s.Exception("Member '"+e+"' not exists!","Invalid Operation"));return this},!0),a["default"].Class.define("$data.MemberWrapper",null,null,{constructor:function(e){this.memberDefinition=e},setKey:function(e){return this.memberDefinition.key=e||void 0===e?!0:!1,this},setComputed:function(e){return this.memberDefinition.computed=e||void 0===e?!0:!1,this},setRequired:function(e){return this.memberDefinition.required=e||void 0===e?!0:!1,this},setNullable:function(e){return this.memberDefinition.nullable=e||void 0===e?!0:!1,this},changeDefinition:function(e,t){return this.memberDefinition[e]=t,this}}),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],101:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.ModelBinder",null,null,{constructor:function(e){if(this.context=e,this.providerName=null,this.context.storageProvider&&"function"==typeof this.context.storageProvider.getType&&(this.references=!this.context.storageProvider.providerConfiguration.modelBinderOptimization,this.providerName=this.context.storageProvider.providerName,!this.providerName))for(var t in a["default"].RegisteredStorageProviders)if(a["default"].RegisteredStorageProviders[t]===this.context.storageProvider.getType()){this.providerName=t;break}},_deepExtend:function(e,t){if(null===e||void 0===e)return t;for(var n in t)if(e.hasOwnProperty(n)){if("object"===i(t[n]))if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e[n].indexOf(t[n][r])<0&&e[n].push(t[n][r]);else this._deepExtend(e[n],t[n])}else e[n]=t[n];return this._finalize(e)},_finalize:function(e){return e instanceof a["default"].Entity&&(e.changedProperties=void 0,e.storeToken=this.context.storeToken),e},_buildSelector:function(e,t){if(e.$selector){Array.isArray(e.$selector)||(e.$selector=[e.$selector]);for(var n=0;n<e.$selector.length;n++){var r=e.$selector[n].replace("json:","");t.src+="if(";for(var i=r.split("."),s=0;s<i.length;s++)t.src+='di["'+i.slice(0,s+1).join('"]["')+'"]'+(s<i.length-1?" && ":" !== undefined && typeof di."+r+' === "object"');t.src+='){di = di["'+i.join('"]["')+'"];}'+(n<e.$selector.length-1?"else ":"")}t.src+="if (di === null){",t.iter&&(t.src+=t.iter+" = null;"),t.src+="return null;",t.src+="}"}},_buildKey:function(e,t,n,r,a){if(n){var t=s.Container.resolveType(t),o=s.Container.getIndex(t);if(t=t.fullName||t.name,r.src+="var "+e+"Fn = function(di){",Array.isArray(n)&&1!=n.length){r.src+='var key = "";';for(var u=0;u<n.length;u++){var l="object"!==i(n[u])?n[u]:n[u].$source;r.src+='if (typeof di["'+l+'"] === "undefined") return undefined;',r.src+='if (di["'+l+'"] === null) return null;',r.src+='key += ("'+t+"_"+o+"_"+l+'#" + di["'+l+'"]);'}}else"string"!=typeof n&&(n=n[0]),r.src+='if (typeof di["'+n+'"] === "undefined") return undefined;',r.src+='if (di["'+n+'"] === null) return null;',r.src+='var key = ("'+t+"_"+o+"_"+n+'#" + di["'+n+'"]);';r.src+="return key;};"}r.src+="var "+e+" = "+(n?e+"Fn("+(a||"di")+")":"undefined")+";"},build:function(e,t){if(e.$selector){Array.isArray(e.$selector)||(e.$selector=[e.$selector]);for(var n=0;n<e.$selector.length;n++)e.$selector[n]=e.$selector[n].replace("json:","")}if(e.$value)if("function"==typeof e.$value)if(t.src+="var di = di || data;",t.src+="var fn = function(){ return meta"+(t.meta.length?"."+t.meta.join("."):"")+".$value.call(self, meta"+(t.meta.length?"."+t.meta.join("."):"")+", di); };",e.$type){var r=s.Container.resolveName(s.Container.resolveType(e.$type)),i=s.Container.getIndex(s.Container.resolveType(e.$type)),o=this.context.storageProvider.fieldConverter.fromDb[r];o?t.item='self.context.storageProvider.fieldConverter.fromDb["'+r+'"](fn())':t.item="new (Container.resolveByIndex("+i+"))(fn())"}else t.item="fn()";else if(e.$type){var r=s.Container.resolveName(s.Container.resolveType(e.$type)),i=s.Container.getIndex(s.Container.resolveType(e.$type)),o=this.context.storageProvider.fieldConverter.fromDb[r];o?t.item='self.context.storageProvider.fieldConverter.fromDb["'+r+'"]('+e.$value+")":t.item="new (Container.resolveByIndex("+i+"))("+e.$value+")"}else t.item=e.$value;else if(e.$source){var r=s.Container.resolveName(s.Container.resolveType(e.$type)),i=s.Container.getIndex(s.Container.resolveType(e.$type)),o=this.context.storageProvider.fieldConverter.fromDb[r],u="_"+r.replace(/\./gi,"_")+"_";t.forEach||(t.src+="var di = data;"),t.item=u,this._buildSelector(e,t),o?t.src+="var "+u+' = self.context.storageProvider.fieldConverter.fromDb["'+r+'"](di["'+e.$source+'"]);':t.src+="var "+u+" = new (Container.resolveByIndex("+i+'))(di["'+e.$source+'"]);'}else if(e.$item){t.meta.push("$item");var l=t.item&&t.current?t.item+"."+t.current:t.item?t.item:"result";if(t.iter=l,l.indexOf(".")<0&&(t.src+="var "+l+";"),t.src+="var fn = function(di){",e.$selector&&(t.src+='if (typeof di !== "undefined" && !(Array.isArray(di))){',this._buildSelector(e,t),t.src+="}"),this.references&&e.$keys&&this._buildKey("forKey",e.$type,e.$keys,t),t.src+=l+" = typeof "+l+' == "undefined" ? [] : '+l+";",this.references&&e.$item.$keys){var p="keycache_"+l.replace(/\./gi,"_");t.src+="var "+p+";",t.src+="var kci = keycacheIter.indexOf("+l+");",t.src+="if (kci < 0){",t.src+=p+" = [];",t.src+="keycache.push("+p+");",t.src+="keycacheIter.push("+l+");",t.src+="}else{",t.src+=p+" = keycache[kci];",t.src+="}"}t.iter=void 0,t.forEach=!0;var d="itemForKey_"+l.replace(/\./gi,"_");t.src+="var forEachFn = function(di, i){",t.src+="var diBackup = di;","sqLite"==this.providerName&&this.references&&e.$item.$keys&&this._buildKey(d,e.$type,e.$item.$keys,t);var u=t.item||"iter";t.item=u,e.$item.$source||this._buildSelector(e.$item,t),this.build(e.$item,t),this.references&&e.$keys?(t.src+="if (forKey){",t.src+="if (cache[forKey]){",t.src+=l+" = cache[forKey];",t.src+="if ("+l+".indexOf("+(t.item||u)+") < 0){",t.src+=l+".push("+(t.item||u)+");",t.src+="}}else{",t.src+="cache[forKey] = "+l+";",t.src+=l+".push("+(t.item||u)+");",t.src+="}}else{",this.references&&e.$item.$keys&&this._buildKey("cacheKey",e.$type,e.$item.$keys,t,"diBackup"),
t.src+='if (typeof cacheKey != "undefined" && cacheKey !== null){',t.src+="if (keycache_"+l.replace(/\./gi,"_")+" && cacheKey){",t.src+="if (keycache_"+l.replace(/\./gi,"_")+".indexOf(cacheKey) < 0){",t.src+=l+".push("+(t.item||u)+");",t.src+="keycache_"+l.replace(/\./gi,"_")+".push(cacheKey);",t.src+="}",t.src+="}else{",t.src+=l+".push("+(t.item||u)+");",t.src+="}",t.src+="}",t.src+="}"):this.references&&e.$item.$keys?(t.src+="if (typeof "+d+' !== "undefined" && '+d+" !== null){",t.src+="if (typeof keycache_"+l.replace(/\./gi,"_")+' !== "undefined" && '+d+"){",t.src+="if (keycache_"+l.replace(/\./gi,"_")+".indexOf("+d+") < 0){",t.src+=l+".push("+(t.item||u)+");",t.src+="keycache_"+l.replace(/\./gi,"_")+".push("+d+");",t.src+="}}else{",t.src+=l+".push("+(t.item||u)+");",t.src+="}}else{",t.src+=l+".push("+(t.item||u)+");",t.src+="}"):t.src+=l+".push("+(t.item||u)+");",t.src+="};",t.src+="if (Array.isArray(di)) di.forEach(forEachFn);",t.src+="else forEachFn(di, 0);",t.forEach=!1,t.item=null,t.src+='};fn(typeof di === "undefined" ? data : di);',t.meta.pop()}else if(e.$type){t.forEach||(t.src+='if (typeof di === "undefined"){',t.src+="var di = data;",this._buildSelector(e,t),t.src+="}");var c=s.Container.resolveType(e.$type),r=s.Container.resolveName(c),i=s.Container.getIndex(c),f=c.isAssignableTo&&c.isAssignableTo(a["default"].Entity),u="_"+r.replace(/\./gi,"_")+"_";t.item==u&&(u+="new_"),t.item=u;var y=!1;if(e.$source||e.$value||c===a["default"].Array||c===a["default"].Object||c.isAssignableTo||(y=!0),c===a["default"].Object||c===a["default"].Array){var h=Object.keys(e);(1==h.length||2==h.length&&e.$selector)&&(y=!0)}if(y){var o=this.context.storageProvider.fieldConverter.fromDb[r];o?t.src+="var "+u+' = di != undefined ? self.context.storageProvider.fieldConverter.fromDb["'+r+'"](di) : di;':t.src+="var "+u+" = di;"}else this.references&&e.$keys?(this._buildKey("itemKey",e.$type,e.$keys,t),t.src+="if (itemKey === null) return null;",t.src+="var "+u+";",t.src+="if (itemKey && cache[itemKey]){",t.src+=u+" = cache[itemKey];",t.src+="}else{",f?t.src+=u+" = new (Container.resolveByIndex("+i+"))(undefined, { setDefaultValues: false });":t.src+=u+" = new (Container.resolveByIndex("+i+"))();",t.src+="if (itemKey){",t.src+="cache[itemKey] = "+u+";",t.src+="}",t.src+="}"):f?t.src+="var "+u+" = new (Container.resolveByIndex("+i+"))(undefined, { setDefaultValues: false });":t.src+="var "+u+" = new (Container.resolveByIndex("+i+"))();";var m=null;"oData"==this.providerName&&c&&c.openType&&(m=c.openType===!0?a["default"].defaults.openTypeDefaultPropertyName:c.openType,t.src+=u+"."+m+" = {};",t.src+="for (var prop in di){ if (["+c.memberDefinitions.getPublicMappedPropertyNames().map(function(e){return'"'+e+'"'}).join(",")+'].indexOf(prop) < 0 && prop.indexOf("@") < 0 && prop.indexOf("#") < 0){ '+u+"."+m+"[prop] = di[prop]; } };");for(var n in e)if(n.indexOf("$")<0&&n!=m)if(t.current=n,e[n].$item)t.meta.push(n),this.build(e[n],t),t.item=u,t.meta.pop();else if(e[n].$value){t.meta.push(n);var u=t.item;this.build(e[n],t),t.src+=u+"."+n+" = "+t.item+";",t.item=u,t.meta.pop()}else if(e[n].$source){if(t.src+="var fn = function(di){",this._buildSelector(e[n],t),e[n].$type){var r=s.Container.resolveName(s.Container.resolveType(e[n].$type)),i=s.Container.getIndex(s.Container.resolveType(e[n].$type)),o=this.context.storageProvider.fieldConverter.fromDb[r];o?t.src+='return self.context.storageProvider.fieldConverter.fromDb["'+r+'"](di["'+e[n].$source+'"]);':t.src+="return new (Container.resolveByIndex("+i+'))(di["'+e[n].$source+'"]);'}else t.src+=u+"."+n+' = di["'+e[n].$source+'"];';t.src+="};",e[n].$type?t.src+=u+"."+n+" = fn(di);":t.src+="fn(di);"}else if(e[n].$type)t.meta.push(n),t.src+="var fn = function(di){",this._buildSelector(e[n],t),this.build(e[n],t),t.src+="return "+t.item+";};",e[n].$type===a["default"].Object?t.src+=u+"."+n+" = self._deepExtend("+u+"."+n+", fn(di));":t.src+=u+"."+n+" = fn(di);",t.item=u,t.meta.pop();else if(e.$type){var x=s.Container.resolveType(e.$type).memberDefinitions.getMember(n),r=s.Container.resolveName(x.type),g=(s.Container.resolveType(e.$type),s.Container.getIndex(e.$type)),o=this.context.storageProvider.fieldConverter.fromDb[r];if(this.providerName&&x&&x.converter&&x.converter[this.providerName]&&"function"==typeof x.converter[this.providerName].fromDb)t.src+=u+"."+n+' = Container.resolveByIndex("'+g+'").memberDefinitions.getMember("'+n+'").converter.'+this.providerName+'.fromDb(di["'+e[n]+'"], Container.resolveByIndex("'+g+'").memberDefinitions.getMember("'+n+'"), self.context, Container.resolveByIndex("'+g+'"));';else if(o)t.src+=u+"."+n+' = self.context.storageProvider.fieldConverter.fromDb["'+r+'"](di["'+e[n]+'"]);';else{var i=s.Container.getIndex(s.Container.resolveType(r.memberDefinitions.getMember(n).type));t.src+=u+"."+n+" = new (Container.resolveByIndex("+i+'))(di["'+e[n]+'"]);'}}t.src+=u+" = self._finalize("+u+");"}},call:function(e,t){if(!Object.getOwnPropertyNames(t).length)return e;var n={src:"",meta:[]};n.src+="var self = this;",n.src+="var result;",n.src+="var cache = {};",n.src+="var keycache = [];",n.src+="var keycacheIter = [];",this.build(t,n),n.item&&(n.src+='if (typeof result === "undefined") result = '+n.item+";"),n.src+="return result;";var r=new Function("meta","data","Container",n.src).bind(this),i=r(t,e,s.Container);return i}}),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Notifications.ChangeCollector",s["default"].Notifications.ChangeCollectorBase,null,{buildData:function(e){var t=[];return e.forEach(function(e){var n={entityState:e.data.entityState,typeName:e.data.getType().name},r=[];switch(e.data.entityState){case s["default"].EntityState.Added:r=e.data.getType().memberDefinitions.getPublicMappedProperties();break;case s["default"].EntityState.Modified:r=e.data.changedProperties;break;case s["default"].EntityState.Deleted:r=e.data.getType().memberDefinitions.getKeyProperties()}r.forEach(function(t){n[t.name]=e.data[t.name]}),t.push(n)}),t}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Notifications.ChangeCollectorBase",null,null,{buildData:function(e){i.Guard.raise("Pure class")},processChangedData:function(e){this.Distrbutor&&this.Distrbutor.distributeData&&this.Distrbutor.distributeData(this.buildData(e))},Distrbutor:{enumerable:!1,dataType:s["default"].Notifications.ChangeDistributorBase,storeOnObject:!0}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Notifications.ChangeDistributor",s["default"].Notifications.ChangeDistributorBase,null,{constructor:function(e){this.broadcastUrl=e},distributeData:function(e){s["default"].ajax({url:this.broadcastUrl,type:"POST",data:"data="+JSON.stringify(e),succes:this.success,error:this.error})},broadcastUrl:{dataType:"string"},success:function(){},error:function(){}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Notifications.ChangeDistributorBase",null,null,{distributeData:function(e){i.Guard.raise("Pure class")}},null),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.Query",null,null,{constructor:function(e,t,n){this.expression=e,this.context=n,this.expressions=e,this.defaultType=t,this.result=[],this.rawDataList=[],this.modelBinderConfig={},this.context=n},rawDataList:{dataType:"Array"},result:{dataType:"Array"},resultType:{},buildResultSet:function(e){var t=new s["default"].ModelBinder(this.context);this.result=t.call(this.rawDataList,this.modelBinderConfig)},getEntitySets:function(){var e=[],t=this.context,n=function r(n){if(n instanceof s["default"].Expressions.EntitySetExpression&&e.indexOf(t._entitySetReferences[n.elementType.name])<0&&e.push(t._entitySetReferences[n.elementType.name]),n.source&&r(n.source),n.members)for(var i=0;i<n.members.length;i++)r(n.members[i].expression)};return n(this.expression),e}},null),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.queryBuilder",null,null,{constructor:function(){this._fragments={},this.selectedFragment=null,this._binderConfig={},this.modelBinderConfig=this._binderConfig,this._binderConfigPropertyStack=[]},selectTextPart:function(e){this._fragments[e]||(this._fragments[e]={text:"",params:[]}),this.selectedFragment=this._fragments[e]},getTextPart:function(e){return this._fragments[e]},addText:function(e){this.selectedFragment.text+=e},addParameter:function(e){this.selectedFragment.params.push(e)},selectModelBinderProperty:function(e){this._binderConfigPropertyStack.push(this.modelBinderConfig),e in this.modelBinderConfig||(this.modelBinderConfig[e]={}),this.modelBinderConfig=this.modelBinderConfig[e]},popModelBinderProperty:function(){0===this._binderConfigPropertyStack.length?this.modelBinderConfig=this._binderConfig():this.modelBinderConfig=this._binderConfigPropertyStack.pop()},resetModelBinderProperty:function(e){this._binderConfigPropertyStack=[],this.modelBinderConfig=this._binderConfig},addKeyField:function(e){this.modelBinderConfig.$keys||(this.modelBinderConfig.$keys=new Array),this.modelBinderConfig.$keys.push(e)}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.QueryProvider",null,null,{constructor:function(){this.requiresExpressions=!1},executeQuery:function(e,t){},getTraceString:function(e){}},null),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.Queryable",null,null,{constructor:function(e,t){var n=e instanceof a["default"].EntityContext?e:e.entityContext;this.defaultType=e instanceof a["default"].EntityContext?null:e.defaultType,this.entityContext=n,this.expression=t},filter:function(e,t){3===arguments.length&&(e="it."+arguments[0]+("."===arguments[1][0]?arguments[1]+"(param)":" "+arguments[1]+" param"),t={param:arguments[2]}),this._checkOperation("filter");var n=s.Container.createCodeExpression(e,t),r=this.expression;if(this.expression instanceof a["default"].Expressions.FilterExpression){r=this.expression.source;var i=this.entityContext.storageProvider.resolveBinaryOperator("and");n=s.Container.createSimpleBinaryExpression(this.expression.selector,n,"and","filter","boolean",i)}var o=s.Container.createFilterExpression(r,n),u=s.Container.createQueryable(this,o);return u},where:function(e,t){return this.filter(e,t)},map:function(e,t,n){this._checkOperation("map");var r=s.Container.createCodeExpression(e,t),i=s.Container.createProjectionExpression(this.expression,r);"default"===n?i.projectionAs=this.defaultType:n?i.projectionAs=s.Container.resolveType(n):i.projectionAs=a["default"].Object;var o=s.Container.createQueryable(this,i);return o},select:function(e,t,n){return this.map(e,t,n)},length:function(e,t){this._checkOperation("length");var n=new a["default"].PromiseHandler,r=n.createCallback(e),i=s.Container.createCountExpression(this.expression),o=s.Container.createQueryExpressionCreator(this.entityContext);try{var u=o.Visit(i);this.entityContext.log({event:"EntityExpression",data:u}),this.entityContext.executeQuery(s.Container.createQueryable(this,u),r,t)}catch(l){r.error(l)}return n.getPromise()},count:function(e,t){return this.length(e,t)},forEach:function(e,t){function n(t){t.forEach(e)}this._checkOperation("forEach");var r=new a["default"].PromiseHandler,i=r.createCallback(n),o=s.Container.createForEachExpression(this.expression),u=s.Container.createQueryExpressionCreator(this.entityContext);try{var l=u.Visit(o);this.entityContext.log({event:"EntityExpression",data:l}),this.entityContext.executeQuery(s.Container.createQueryable(this,l),i,t)}catch(p){i.error(p)}return r.getPromise()},toArray:function(e,t){if(e instanceof a["default"].Array)return this.toArray(function(t){e.length=0,t.forEach(function(t,n){e.push(t)})});this._checkOperation("toArray");var n=new a["default"].PromiseHandler,r=n.createCallback(e),i=s.Container.createToArrayExpression(this.expression),o=s.Container.createQueryExpressionCreator(this.entityContext);try{var u=o.Visit(i);this.entityContext.log({event:"EntityExpression",data:u}),this.entityContext.executeQuery(s.Container.createQueryable(this,u),r,t)}catch(l){r.error(l)}return n.getPromise()},toLiveArray:function(e,t){var n=this,r=[],i=function s(e){return function(n){var i=new a["default"].PromiseHandler,o=i.createCallback(n),u=function(e){r.length=0;var t=e;a["default"].typeSystem.extend(r,t),r.prev=s(function(e){t.prev(e)}),r.next=s(function(e){t.next(e)}),o.success.apply(this,[r].concat(Array.prototype.slice.call(arguments,1)))};e({success:u,error:o.error},t);var l=i.getPromise();return a["default"].typeSystem.extend(r,l),r}};return r.refresh=i(function(e){n.toArray(e)}),r.refresh.apply(r,arguments)},single:function(e,t,n,r){this._checkOperation("single");var i=this;e&&(i=this.filter(e,t)),i=i.take(2);var o=new a["default"].PromiseHandler,u=o.createCallback(n),l=s.Container.createSingleExpression(i.expression),p=s.Container.createQueryExpressionCreator(i.entityContext);try{var d=p.Visit(l);this.entityContext.log({event:"EntityExpression",data:d}),i.entityContext.executeQuery(s.Container.createQueryable(i,d),u,r)}catch(c){u.error(c)}return o.getPromise()},some:function(e,t,n,r){this._checkOperation("some");var i=this;e&&(i=this.filter(e,t)),i=i.take(1);var o=new a["default"].PromiseHandler,u=o.createCallback(n),l=s.Container.createSomeExpression(i.expression),p=s.Container.createQueryExpressionCreator(i.entityContext);try{var d=p.Visit(l);this.entityContext.log({event:"EntityExpression",data:d}),i.entityContext.executeQuery(s.Container.createQueryable(i,d),u,r)}catch(c){u.error(c)}return o.getPromise()},every:function(e,t,n,r){this._checkOperation("every");var i=this;e&&(i=this.filter(e,t)),i=i.take(1);var o=new a["default"].PromiseHandler,u=o.createCallback(n),l=s.Container.createEveryExpression(i.expression),p=s.Container.createQueryExpressionCreator(i.entityContext);try{var d=p.Visit(l);this.entityContext.log({event:"EntityExpression",data:d}),i.entityContext.executeQuery(s.Container.createQueryable(i,d),u,r)}catch(c){u.error(c)}return o.getPromise()},take:function(e){this._checkOperation("take");var t=s.Container.createConstantExpression(e,"integer"),n=s.Container.createPagingExpression(this.expression,t,a["default"].Expressions.ExpressionType.Take);return s.Container.createQueryable(this,n)},skip:function(e){this._checkOperation("skip");var t=s.Container.createConstantExpression(e,"integer"),n=s.Container.createPagingExpression(this.expression,t,a["default"].Expressions.ExpressionType.Skip);return s.Container.createQueryable(this,n)},order:function(e){if(""===e||void 0===e||null===e)return this;if("-"===e[0]){var t="it."+e.replace("-","");return this.orderByDescending(t)}return this.orderBy("it."+e)},orderBy:function(e,t){this._checkOperation("orderBy");var n=s.Container.createCodeExpression(e,t),r=s.Container.createOrderExpression(this.expression,n,a["default"].Expressions.ExpressionType.OrderBy),i=s.Container.createQueryable(this,r);return i},orderByDescending:function(e,t){this._checkOperation("orderByDescending");var n=s.Container.createCodeExpression(e,t),r=s.Container.createOrderExpression(this.expression,n,a["default"].Expressions.ExpressionType.OrderByDescending),i=s.Container.createQueryable(this,r);return i},first:function(e,t,n,r){this._checkOperation("first");var i=this;e&&(i=this.filter(e,t)),i=i.take(1);var o=new a["default"].PromiseHandler,u=o.createCallback(n),l=s.Container.createFirstExpression(i.expression),p=s.Container.createQueryExpressionCreator(i.entityContext);try{var d=p.Visit(l);i.entityContext.log({event:"EntityExpression",data:d}),i.entityContext.executeQuery(s.Container.createQueryable(i,d),u,r)}catch(c){u.error(c)}return o.getPromise()},find:function(e,t,n){var r=new a["default"].PromiseHandler,o=r.createCallback(t),u=this.defaultType.memberDefinitions.getKeyProperties();try{if(1===u.length&&"object"!==("undefined"==typeof e?"undefined":i(e))){var l={};l[u[0].name]=e,e=l}if("object"!==("undefined"==typeof e?"undefined":i(e)))throw new s.Exception("Key parameter is invalid");for(var p=[],d=0;d<u.length;d++){var c=u[d];if(!(c.name in e))throw new s.Exception("Key value missing");p.push(s.Container.createConstantExpression(e[c.name],c.type,c.name))}var f=this.entityContext.storageProvider.supportedSetOperations.find;if(f){var y=s.Container.createFindExpression(this.expression,p),h=s.Container.createQueryExpressionCreator(this.entityContext);try{var m=h.Visit(y);this.entityContext.log({event:"EntityExpression",data:m}),this.entityContext.executeQuery(s.Container.createQueryable(this,m),o,n)}catch(x){o.error(x)}}else{for(var g="",v={},d=0;d<p.length;d++){var E=p[d];v[E.name]=E.value,d>0&&(g+=" && "),g+="it."+E.name+" == this."+E.name}this.single(g,v,o,n)}}catch(x){o.error(x)}return r.getPromise()},include:function(e){if(this.entityContext&&this.entityContext.storageProvider&&"oData"===this.entityContext.storageProvider.name)return this.include2.apply(this,arguments);this._checkOperation("include");var t=s.Container.createConstantExpression(e,"string"),n=s.Container.createIncludeExpression(this.expression,t);return s.Container.createQueryable(this,n)},include2:function(e,t){this._checkOperation("include"),"string"==typeof e&&(e.length<3||"it."!==e.substr(0,3))&&!/^[^\.]*(=>)/.test(e)&&(e="it."+e);var n=s.Container.createCodeExpression(e,t),r=s.Container.createIncludeExpression(this.expression,n);return s.Container.createQueryable(this,r)},withInlineCount:function(e){this._checkOperation("withInlineCount");var t=s.Container.createConstantExpression(e||"allpages","string"),n=s.Container.createInlineCountExpression(this.expression,t);return s.Container.createQueryable(this,n)},withCount:function(e){return this.withInlineCount(e)},removeAll:function(e,t){this._checkOperation("batchDelete");var n=new a["default"].PromiseHandler,r=n.createCallback(e),i=s.Container.createBatchDeleteExpression(this.expression),o=s.Container.createQueryExpressionCreator(this.entityContext);try{var u=o.Visit(i);this.entityContext.log({event:"EntityExpression",data:u}),this.entityContext.executeQuery(s.Container.createQueryable(this,u),r,t)}catch(l){r.error(l)}return n.getPromise()},_runQuery:function(e,t){var n=new a["default"].PromiseHandler,r=n.createCallback(e),i=s.Container.createQueryExpressionCreator(this.entityContext);try{var o=i.Visit(this.expression);this.entityContext.log({event:"EntityExpression",data:o}),this.entityContext.executeQuery(s.Container.createQueryable(this,o),r,t)}catch(u){r.error(u)}return n.getPromise()},toTraceString:function(e){var t=this.expression;t=e?s.Container["create"+e+"Expression"](t):s.Container.createToArrayExpression(t);var n=s.Container.createQueryExpressionCreator(this.entityContext);t=n.Visit(t);var r=s.Container.createQueryable(this,t);return r.entityContext.getTraceString(r)},_checkOperation:function(e){var t=this.entityContext.resolveSetOperations(e);void 0==t.invokable||t.invokable||s.Guard.raise(new s.Exception("Operation '"+e+"' is not invokable with the provider"))},defaultType:{}},null),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.RelatedEntityProxy",null,null,{constructor:function(e,t,n,r,i){this._entityKeyObject=e,this._navigationProperty=t,this._type=n,this._parent=r,this._context=i},_entityKeyObject:{type:s["default"].Object},_ctxFactory:{},_type:{},_navigationProperty:{type:s["default"].String},_parent:{type:"$data.RelatedEntityProxy"},_context:{type:"$data.EntityContext"},read:function(e){var t=new s["default"].PromiseHandler,n=t.createCallback(e);try{var r=this._chainToArray(),a=r[0],o=a._context;if(!o){var u=a._parent instanceof s["default"].Entity?a._parent.storeToken:a._type.storeToken;u&&"function"==typeof u.factory&&(o=u.factory())}if(!o)throw new i.Exception("ContextNotExists");var l=null,p=null;if(a._parent instanceof s["default"].Entity){l=o.getEntitySetFromElementType(a._parent.getType());var d=o._createRelatedEntityProxyClass(l.elementType);r.unshift(new d(a._parent,void 0,l.elementType))}else l=o.getEntitySetFromElementType(a._type);p=l.expression;for(var c=null,f=0;f<r.length;f++){for(var y=r[f],h=y._type.memberDefinitions.getKeyProperties(),m=[],x=0;x<h.length;x++){var g=h[x];if(!(g.name in y._entityKeyObject))throw new i.Exception("Key value missing");m.push(i.Container.createConstantExpression(y._entityKeyObject[g.name],g.type,g.name))}var v=void 0;y._navigationProperty&&(v=i.Container.createMemberInfoExpression(y._navigationProperty),c=y._navigationProperty.elementType),p=i.Container.createFindExpression(p,m,v)}var E=i.Container.createQueryExpressionCreator(o);p=E.Visit(p);var b=i.Container.createQueryable(l,p);b.defaultType=c||b.defaultType,o.executeQuery(b,n)}catch(T){n.error(T)}return t.getPromise()},_chainToArray:function(e){return e=e||[],this._parent instanceof s["default"].RelatedEntityProxy&&this._parent._chainToArray(e),e.push(this),e}},{}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.ServiceOperation",null,null,{},{translateDefinition:function(e,t,n){e.serviceName=t;var r=new a["default"].MemberDefinition(this.generateServiceOperation(e),this);return r.name=t,r},generateServiceOperation:function(e){var t;if(e.serviceMethod){var n=e.returnType?s.Container.resolveType(e.returnType):{};t=n.isAssignableTo&&n.isAssignableTo(a["default"].Queryable)?e.serviceMethod:function(){var t,n=arguments[arguments.length-1],r=new a["default"].PromiseHandler;arguments;"function"==typeof n?(t=r.createCallback(n),arguments[arguments.length-1]=t):(t=r.createCallback(),arguments.push(t));try{var i=e.serviceMethod.apply(this,arguments);void 0!==i&&t.success(i)}catch(s){t.error(s)}return r.getPromise()}}else t=function(){var t,n,r=this;if(this instanceof a["default"].Entity||this instanceof a["default"].EntitySet){var o;if(this instanceof a["default"].Entity)if(this.context)r=this.context,o=r.getEntitySetFromElementType(this.getType());else{if(!this.storeToken||"function"!=typeof this.storeToken.factory)return void s.Guard.raise(new s.Exception("entity can't resolve context","Not Found!",this));r=this.storeToken.factory(),o=r.getEntitySetFromElementType(this.getType())}else if(this instanceof a["default"].EntitySet){r=this.entityContext,o=this;var u=r.getType().getMemberDefinition(o.name);t=a["default"].MemberDefinition.translateDefinition(u.actions[e.serviceName],e.serviceName,o.getType())}n={data:this,entitySet:o}}var l=e.elementType?r.getEntitySetFromElementType(s.Container.resolveType(e.elementType)):null,p=null;if(e.params)if(p=[],arguments[0]&&"object"===i(arguments[0])&&arguments[0].constructor===a["default"].Object&&e.params&&e.params[0]&&e.params[0].name in arguments[0])for(var d=arguments[0],c=0;c<e.params.length;c++){var f=e.params[c];f.name&&f.type&&f.name in d&&p.push(s.Container.createConstantExpression(d[f.name],s.Container.resolveType(f.type),f.name,f.elementType))}else for(var c=0;c<e.params.length&&"function"!=typeof arguments[c];c++){var f=e.params[c];f.name&&f.type&&void 0!==arguments[c]&&p.push(s.Container.createConstantExpression(arguments[c],s.Container.resolveType(f.type),f.name,f.elementType))}var y=s.Container.createEntityContextExpression(r);t||(t=n&&n.data?n.data.getType().getMemberDefinition(e.serviceName):r.getType().getMemberDefinition(e.serviceName));var h=s.Container.createServiceOperationExpression(y,s.Container.createMemberInfoExpression(t),p,e,n),m=arguments[arguments.length-1];if("function"!=typeof m&&("object"!==("undefined"==typeof m?"undefined":i(m))||"function"!=typeof m.success&&"function"!=typeof m.error)&&(m=void 0),l){var x=s.Container.createQueryable(l,h);return m?(h.isTerminated=!0,x._runQuery(m)):x}var g=e.returnType?s.Container.resolveType(e.returnType):null,x=s.Container.createQueryable(r,h);return x.defaultType=g||a["default"].Object,g===a["default"].Queryable?(x.defaultType=s.Container.resolveType(e.elementType),m?(h.isTerminated=!0,x._runQuery(m)):x):(h.isTerminated=!0,x._runQuery(m))};var r=e.params||[];return a["default"].typeSystem.extend(t,e,{params:r}),t}}),a["default"].Class.define("$data.ServiceAction",a["default"].ServiceOperation,null,{},{generateServiceOperation:function(e){return e.method||(e.method="POST"),a["default"].ServiceOperation.generateServiceOperation.apply(this,arguments)}}),a["default"].Class.define("$data.ServiceFunction",a["default"].ServiceOperation,null,{},{generateServiceOperation:function(e){return e.method||(e.method="GET"),a["default"].ServiceOperation.generateServiceOperation.apply(this,arguments)}}),n["default"]=a["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].storageProviders={DbCreationType:{Merge:10,DropTableIfChanged:20,DropTableIfChange:20,DropAllExistingTables:30,ErrorIfChange:40,DropDbIfChange:50}},s["default"].ConcurrencyMode={Fixed:"fixed",None:"none"},s["default"].Class.define("$data.StorageProviderBase",null,null,{constructor:function(e,t){if(this.providerConfiguration=e||{},this.name=this.getType().name,s["default"].RegisteredStorageProviders)for(var n=Object.keys(s["default"].RegisteredStorageProviders),r=0;r<n.length;r++)if(this instanceof s["default"].RegisteredStorageProviders[n[r]]){this.name=n[r];break}},providers:{},supportedDataTypes:{value:[],writable:!1},initializeStore:function(e){i.Guard.raise("Pure class")},executeQuery:function(e,t){i.Guard.raise("Pure class")},loadRawData:function(e,t){t=s["default"].PromiseHandlerBase.createCallbackSettings(t),t.error(new i.Exception("loadRawData is not supported","Invalid Operation"))},buildIndependentBlocks:function(e){function t(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}for(var n=[],r=[],a=0;a<e.length;a++){var o=e[a];if(o.dependentOn&&0!=o.dependentOn.length){for(var u=null,l=0;l<o.dependentOn.length;l++){var p=o.dependentOn[l];if(p.entityState!=s["default"].EntityState.Unchanged){u=u||{};for(var d=-1,c=0;c<e.length;c++)if(e[c].data==p){d=c,e[c].referredBy=e[c].referredBy||[],e[c].referredBy.push(o.data);break}-1==d&&i.Guard.raise(new i.Exception("Dependent object not found","ObjectNotFound",o.dependentOn[l])),u[d]=!0;var f=r[d]||{};f[a]=!0,r[d]=f}}null!==u&&(n[a]=u)}}for(var y=[],h=[],m=0;m<e.length;m++)n.hasOwnProperty(m)||h.push(m);for(;h.length>0;){var x=[].concat(h);h=[];for(var g=0;g<x.length;g++){var v=r[x[g]];if("undefined"!=typeof v)for(var E in v)delete n[E][x[g]],t(n[E])||(delete n[E],h.push(E));delete r[x[g]]}for(var b=[],T=0;T<x.length;T++){var C=e[x[T]];C.data.entityState!=s["default"].EntityState.Unchanged&&b.push(C)}b.length>0&&y.push(b)}return y},getTraceString:function(e){i.Guard.raise("Pure class")},setContext:function(e){this.context=e},_buildContinuationFunction:function(e,t){Array.isArray(t.result)&&(t.result.next=this._buildPagingMethod(e,t,"next"),t.result.prev=this._buildPagingMethod(e,t,"prev"))},_buildPagingMethod:function(e,t,n){return function(r){var a=new s["default"].PromiseHandler,o=a.createCallback(r),u=new s["default"].Expressions.ContinuationExpressionBuilder(n),l=u.compile(t);if(l.expression){var p=i.Container.createQueryable(e,l.expression);p.defaultType=t.defaultType,e.executeQuery(p,o)}else o.error(new i.Exception(l.message,"Invalid Operation",l));return a.getPromise()}},buildDbType_modifyInstanceDefinition:function(e,t){var n=function(t,n){var r;return n?(r=JSON.parse(JSON.stringify(e[n])),r.kind=t.kind,r.name=t.name,r.notMapped=!1):r=JSON.parse(JSON.stringify(t)),r.dataType=i.Container.resolveType(t.dataType),r.type=r.dataType,r.key=!1,r.computed=!1,r},r=function(e,t,n,r,i){var s=new Object;return s[e.name]=n,s[t.name]=i?i:r+"__"+n,s};t.Associations&&t.Associations.forEach(function(t){var i=!1,s=t.FromType,a=t.ToType,o=t.ToPropertyName,u=t.FromType.getMemberDefinition(t.FromPropertyName),l=[];u&&"string"==typeof u.keys&&u.keys?l=[u.keys]:u&&Array.isArray(u.keys)&&(l=[].concat(u.keys)),t.ReferentialConstraint=t.ReferentialConstraint||[],("*"==t.FromMultiplicity&&"0..1"==t.ToMultiplicity||"0..1"==t.FromMultiplicity&&"1"==t.ToMultiplicity)&&(s=t.ToType,a=t.FromType,o=t.FromPropertyName,i=!0),s.memberDefinitions.getPublicMappedProperties().filter(function(e){return e.key}).forEach(function(u,p){var d=r(s,a,u.name,o,l[p]);if(i){e[d[a.name]]=n(u,o);var c=a.getMemberDefinition(l[p]);c&&(c.isDependentProperty=!0,c.navigationPropertyName=t.FromPropertyName)}t.ReferentialConstraint.push(d)},this)},this),t.ComplexTypes&&t.ComplexTypes.forEach(function(t){t.ReferentialConstraint=t.ReferentialConstraint||[],t.ToType.memberDefinitions.getPublicMappedProperties().forEach(function(i){e[t.FromPropertyName+"__"+i.name]=n(i),t.ReferentialConstraint.push(r(t.ToType,t.FromType,i.name,t.FromPropertyName))},this)},this)},buildDbType_generateConvertToFunction:function(e){return function(t){var n=new e.PhysicalType;return n.entityState=t.entityState,e.PhysicalType.memberDefinitions.getPublicMappedProperties().forEach(function(e){void 0!==t[e.name]&&(n[e.name]=t[e.name])},this),e.Associations&&e.Associations.forEach(function(e){if("*"==e.FromMultiplicity&&"0..1"==e.ToMultiplicity||"0..1"==e.FromMultiplicity&&"1"==e.ToMultiplicity){var r=t[e.FromPropertyName];void 0!==r&&e.ReferentialConstraint.forEach(function(t){null!==r?n[t[e.From]]=r[t[e.To]]:n[t[e.From]]=null},this)}},this),e.ComplexTypes&&e.ComplexTypes.forEach(function(e){var r=t[e.FromPropertyName];void 0!==r&&e.ReferentialConstraint.forEach(function(t){
null!==r?n[t[e.From]]=r[t[e.To]]:n[t[e.From]]=null},this)},this),n}},bulkInsert:function(e,t,n,r){r.error(new i.Exception("Not Implemented"))},supportedFieldOperations:{value:{length:{dataType:"number",allowedIn:"filter, map"},substr:{dataType:"string",allowedIn:"filter",parameters:[{name:"startFrom",dataType:"number"},{name:"length",dataType:"number"}]},toLowerCase:{dataType:"string"}},enumerable:!0,writable:!0},resolveFieldOperation:function(e,t,n){var r=this.supportedFieldOperations[e];if(Array.isArray(r)){for(var s=0;s<r.length;s++)if("default"===r[s].allowedType||i.Container.resolveType(r[s].allowedType)===i.Container.resolveType(t.selector.memberDefinition.type)&&n&&r[s].allowedIn&&(Array.isArray(r[s].allowedIn)&&r[s].allowedIn.some(function(e){return n===i.Container.resolveType(e)})||!Array.isArray(r[s].allowedIn)&&n===i.Container.resolveType(r[s].allowedIn))){r=r[s];break}s===r.length&&(r=void 0)}return r||i.Guard.raise(new i.Exception("Field operation '"+e+"' is not supported by the provider")),n&&r.allowedIn&&(r.allowedIn instanceof Array&&!r.allowedIn.some(function(e){return n===i.Container.resolveType(e)})||!(r.allowedIn instanceof Array)&&n!==i.Container.resolveType(r.allowedIn))&&i.Guard.raise(new i.Exception(e+" not supported in: "+n.name)),r.name=e,r},supportedBinaryOperators:{value:{equal:{mapTo:"eq",dataType:"boolean"}},enumerable:!0,writable:!0},resolveBinaryOperator:function(e,t,n){var r=this.supportedBinaryOperators[e];return r||i.Guard.raise(new i.Exception("Binary operator '"+e+"' is not supported by the provider")),n&&r.allowedIn&&(r.allowedIn instanceof Array&&!r.allowedIn.some(function(e){return n===i.Container.resolveType(e)})||!(r.allowedIn instanceof Array)&&n!==i.Container.resolveType(r.allowedIn))&&i.Guard.raise(new i.Exception(e+" not supported in: "+n.name)),r.name=e,r},supportedUnaryOperators:{value:{not:{mapTo:"not"}},enumerable:!0,writable:!0},resolveUnaryOperator:function(e,t,n){var r=this.supportedUnaryOperators[e];return r||i.Guard.raise(new i.Exception("Unary operator '"+e+"' is not supported by the provider")),n&&r.allowedIn&&(r.allowedIn instanceof Array&&!r.allowedIn.some(function(e){return n===i.Container.resolveType(e)})||!(r.allowedIn instanceof Array)&&n!==i.Container.resolveType(r.allowedIn))&&i.Guard.raise(new i.Exception(e+" not supported in: "+n.name)),r.name=e,r},supportedSetOperations:{value:{toArray:{invokable:!0,allowedIn:[]}},enumerable:!0,writable:!0},resolveSetOperations:function(e,t,n){var r=this.supportedSetOperations[e];r||i.Guard.raise(new i.Exception("Operation '"+e+"' is not supported by the provider"));var s=r.allowedIn||[];return n&&s&&(s instanceof Array&&!s.some(function(e){return n===i.Container.resolveType(e)})||!(s instanceof Array)&&n!==i.Container.resolveType(s))&&i.Guard.raise(new i.Exception(e+" not supported in: "+n.name)),r},resolveTypeOperations:function(e,t,n){i.Guard.raise(new i.Exception("Entity '"+t.entityType.name+"' Operation '"+e+"' is not supported by the provider"))},resolveContextOperations:function(e,t,n){i.Guard.raise(new i.Exception("Context '"+t.instance.getType().name+"' Operation '"+e+"' is not supported by the provider"))},makePhysicalTypeDefinition:function(e,t){},_beginTran:function(e,t,n){n.success(new s["default"].Transaction)},getFieldUrl:function(){return"#"},supportedAutoincrementKeys:{value:{}}},{onRegisterProvider:{value:new s["default"].Event},registerProvider:function(e,t){this.onRegisterProvider.fire({name:e,provider:t},this),s["default"].RegisteredStorageProviders=s["default"].RegisteredStorageProviders||[],s["default"].RegisteredStorageProviders[e]=t},getProvider:function(e){var t=s["default"].RegisteredStorageProviders[e];return t||console.warn("Provider not found: '"+e+"'"),t},isSupported:{get:function(){return!0},set:function(){}}}),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],113:[function(e,t,n){(function(r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../TypeSystem/index.js"),a=i(s);a["default"].Class.define("$data.StorageProviderLoaderBase",null,null,{isSupported:function(e){a["default"].Trace.log("Detecting "+e+" provider support");var t=!0;switch(e){case"indexedDb":t=a["default"].__global.indexedDB||a["default"].__global.webkitIndexedDB||a["default"].__global.mozIndexedDB||a["default"].__global.msIndexedDB&&!/^file:/.test(a["default"].__global.location&&a["default"].__global.location.href);break;case"storm":t="XMLHttpRequest"in a["default"].__global;break;case"webSql":case"sqLite":t="openDatabase"in a["default"].__global;break;case"LocalStore":t="localStorage"in a["default"].__global&&a["default"].__global.localStorage?!0:!1;break;case"sqLite":t="openDatabase"in a["default"].__global;break;case"mongoDB":t=a["default"].mongoDBDriver}return a["default"].Trace.log(e+" provider is "+(t?"":"not")+" supported"),t},scriptLoadTimeout:{type:"int",value:1e3},scriptLoadInterval:{type:"int",value:50},npmModules:{value:{indexedDb:"jaydata-indexeddb",InMemory:"jaydata-inmemory",LocalStore:"jaydata-inmemory",mongoDB:"jaydata-mongodb",oData:"jaydata-odata",webApi:"jaydata-webapi",sqLite:"jaydata-sqlite",webSql:"jaydata-sqlite",storm:"jaydata-storm"}},ProviderNames:{value:{indexedDb:"IndexedDb",InMemory:"InMemory",LocalStore:"InMemory",oData:"oData",webApi:"WebApi",sqLite:"SqLite",webSql:"SqLite",storm:"Storm"}},load:function(e,t){a["default"].RegisteredStorageProviders=a["default"].RegisteredStorageProviders||{},a["default"].Trace.log("Loading provider(s): "+e),t=a["default"].PromiseHandlerBase.createCallbackSettings(t);var n=this,r=e.join(",");n._fallbackCache=n._fallbackCache||{},n._fallbackCache[r]?t.success(n._fallbackCache[r]):this.find(e,{success:function(e,i){n._fallbackCache[r]=e,t.success.call(this,e)},error:t.error})},find:function(e,t){var n=e.shift(),n=this.getVirtual(n);for(Array.isArray(n)&&(e=n,n=e.shift());n&&!this.isSupported(n);)n=e.shift();if(a["default"].Trace.log("First supported provider is "+n),n||(a["default"].Trace.log("Provider fallback failed"),t.error()),a["default"].RegisteredStorageProviders){a["default"].Trace.log("Is the "+n+" provider already registered?");var i=a["default"].RegisteredStorageProviders[n];if(i)return a["default"].Trace.log(n+" provider registered"),void t.success(i);a["default"].Trace.log(n+" provider not registered")}r.browser?(a["default"].Trace.log("Browser detected trying to load provider"),this.loadProvider(n,e,t)):(a["default"].Trace.log("node.js detected trying to load NPM module"),this.loadNpmModule(n,e,t))},loadProvider:function(e,t,n){var r=this,i=a["default"].StorageProviderLoader.ProviderNames[e]||e;if(a["default"].Trace.log(e+" provider is mapped to name "+i+"Provider"),i){var s=this.getUrl(i);a["default"].Trace.log(e+" provider from URL: "+s);var o=this.loadScript;document&&document.createElement&&(a["default"].Trace.log("document and document.createElement detected, using script element loader method"),o=this.loadScriptElement),o.call(this,s,e,function(i){var s=a["default"].RegisteredStorageProviders[e];i&&s?(a["default"].Trace.log(e+" provider successfully registered"),n.success(s)):t.length>0?(a["default"].Trace.log(e+" provider failed to load, trying to fallback to "+t+" provider(s)"),r.find(t,n)):(a["default"].Trace.log(e+" provider failed to load"),n.error())})}},getUrl:function(e){var t=document.querySelector('script[src$="jaydata.min.js"]'),n=document.querySelector('script[src$="jaydata.js"]');return t?t.src.substring(0,t.src.lastIndexOf("/")+1)+"jaydataproviders/"+e+"Provider.min.js":n?n.src.substring(0,n.src.lastIndexOf("/")+1)+"jaydataproviders/"+e+"Provider.js":"jaydataproviders/"+e+"Provider.js"},loadScript:function(e,t,n){function r(){return a["default"].__global.XMLHttpRequest?new XMLHttpRequest:void 0!==a["default"].__global.ActiveXObject?new ActiveXObject("MsXml2.XmlHttp"):(a["default"].Trace.log("XMLHttpRequest or MsXml2.XmlHttp ActiveXObject not found"),void n(!1))}if(!e)return void n(!1);var i=r();i.onreadystatechange=function(){a["default"].Trace.log("HTTP request is in state: "+i.readyState),4==i.readyState&&(200==i.status||304==i.status?(a["default"].Trace.log("HTTP request succeeded"),a["default"].Trace.log("HTTP request response text: "+i.responseText),eval.call(a["default"].__global,i.responseText),"function"==typeof n?n(!0):a["default"].Trace.log("Callback function is undefined")):(a["default"].Trace.log("HTTP request status: ",i.status),"function"==typeof n?n(!1):a["default"].Trace.log("Callback function is undefined")))},i.open("GET",e,!0),i.send(null)},loadScriptElement:function(e,t,n){function r(){a["default"].Trace.log("Script element watcher iteration "+u);var e=a["default"].RegisteredStorageProviders[t];e?(a["default"].Trace.log(t+" provider registered"),n(!0)):(u--,u>0?(a["default"].Trace.log("Script element watcher next iteration"),setTimeout(r,o)):(a["default"].Trace.log("Script element loader failed"),n(!1)))}var i=document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.type="text/javascript",s.src=e,a["default"].Trace.log("Appending child "+s+" to "+i),i.appendChild(s);var o=this.scriptLoadInterval||50,u=Math.ceil(this.scriptLoadTimeout/o);a["default"].Trace.log("Script element watcher iterating "+u+" times"),setTimeout(r,o)},loadNpmModule:function(t,n,r){var i=null;try{e(this.npmModules[t]),i=a["default"].RegisteredStorageProviders[t],a["default"].Trace.log("NPM module loader successfully registered "+t+" provider")}catch(s){a["default"].Trace.log("NPM module loader failed for "+t+" provider")}i?r.success(i):n.length>0?this.find(n,r):r.error()},virtualProviders:{type:a["default"].Array,value:{local:{fallbacks:["webSql","indexedDb","LocalStore"]}}},getVirtual:function(e){return this.virtualProviders[e]?[].concat(this.virtualProviders[e].fallbacks):e}}),a["default"].StorageProviderLoader=new a["default"].StorageProviderLoaderBase,n["default"]=a["default"],t.exports=n["default"]}).call(this,e("_process"))},{"../TypeSystem/index.js":32,_process:14}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);(0,i.$C)("$data.modelBinder.FindProjectionVisitor",s["default"].Expressions.EntityExpressionVisitor,null,{constructor:function(e){this._includes=e},VisitProjectionExpression:function(e,t){this.projectionExpression=this.projectionExpression||e,t&&(t.projectionExpression=t.projectionExpression||e),this.Visit(e.source,t)},VisitIncludeExpression:function(e,t){if(this.Visit(e.source,t),!(e.selector instanceof s["default"].Expressions.ConstantExpression)){var n={};if(this.Visit(e.selector.expression,n),n.hasIncludeProjectionExpression){var r=this._includes.filter(function(e){return e.name===n.includePath})[0];r&&(r.projectionExpression=n.includeProjectionExpression),t&&(t.hasIncludeProjectionExpression=!0)}}},VisitFrameOperationExpression:function(e,t){this.Visit(e.source,t);var n=e.operation.memberDefinition;if(n&&n.frameType===s["default"].Expressions.ProjectionExpression)for(var r=0,a=n.parameters||[{name:"@expression"}],o=a.map(function(t,n){return"@expression"===t.name?e.source:e.parameters[r++]}),u=0;u<o.length;u++){var l=o[u];if(l instanceof s["default"].Expressions.ConstantExpression&&l.value instanceof s["default"].Queryable){var p=i.Container.createQueryExpressionCreator(l.value.entityContext);l=p.Visit(l.value.expression)}var d=new s["default"].modelBinder.FindProjectionVisitor(this._inculdes),c={};d.Visit(l,c);t&&c.projectionExpression&&(t.hasIncludeProjectionExpression=!0,t.includeProjectionExpression=c.projectionExpression)}},VisitAssociationInfoExpression:function(e,t){var n=e.associationInfo.FromPropertyName;t&&(t.includePath=t.includePath?t.includePath+".":"",t.includePath+=n)}}),(0,i.$C)("$data.modelBinder.ModelBinderConfigCompiler",s["default"].Expressions.EntityExpressionVisitor,null,{constructor:function(e,t,n){this._query=e,this._includes=t,this._isoDataProvider=n||!1,this.depth=[]},VisitSingleExpression:function(e){this._defaultModelBinder(e)},VisitSomeExpression:function(e){this._defaultModelBinder(e)},VisitFindExpression:function(e){this._defaultModelBinder(e)},VisitEveryExpression:function(e){this._defaultModelBinder(e)},VisitToArrayExpression:function(e){this._defaultModelBinder(e)},VisitFirstExpression:function(e){this._defaultModelBinder(e)},VisitForEachExpression:function(e){this._defaultModelBinder(e)},VisitServiceOperationExpression:function(e){if(e.cfg.returnType){var t=i.Container.resolveType(e.cfg.returnType);if("function"==typeof t.isAssignableTo&&t.isAssignableTo(s["default"].Queryable)||t===s["default"].Array)this._defaultModelBinder(e);else{var n=i.Container.createqueryBuilder();n.modelBinderConfig.$type=t,"function"==typeof t.isAssignableTo&&t.isAssignableTo(s["default"].Entity)?n.modelBinderConfig.$selector=["json:"+e.cfg.serviceName]:(n.modelBinderConfig.$type=t,n.modelBinderConfig.$value=function(t,n){return e.cfg.serviceName in n?n[e.cfg.serviceName]:n.value}),this.VisitExpression(e,n),n.resetModelBinderProperty(),this._query.modelBinderConfig=n.modelBinderConfig}}},VisitCountExpression:function(e){var t=i.Container.createqueryBuilder();t.modelBinderConfig.$type=s["default"].Array,t.selectModelBinderProperty("$item"),t.modelBinderConfig.$type=s["default"].Integer,t.modelBinderConfig.$source="cnt",t.resetModelBinderProperty(),this._query.modelBinderConfig=t.modelBinderConfig},VisitBatchDeleteExpression:function(e){var t=i.Container.createqueryBuilder();t.modelBinderConfig.$type=s["default"].Array,t.selectModelBinderProperty("$item"),t.modelBinderConfig.$type=s["default"].Integer,t.modelBinderConfig.$source="cnt",t.resetModelBinderProperty(),this._query.modelBinderConfig=t.modelBinderConfig},VisitConstantExpression:function(e,t){t.modelBinderConfig.$type=e.type,t.modelBinderConfig.$value=e.value},VisitExpression:function(e,t){var n=i.Container.createFindProjectionVisitor(this._includes),r={};n.Visit(e,r),r.projectionExpression?this.Visit(r.projectionExpression,t):this.DefaultSelection(t,this._query.defaultType,this._includes,r.hasIncludeProjectionExpression)},_defaultModelBinder:function(e){var t=i.Container.createqueryBuilder();t.modelBinderConfig.$type=s["default"].Array,this._isoDataProvider&&(t.modelBinderConfig.$selector=["json:d.results","json:d","json:results","json:value"]),t.modelBinderConfig.$item={},t.selectModelBinderProperty("$item"),this.VisitExpression(e,t),t.resetModelBinderProperty(),this._query.modelBinderConfig=t.modelBinderConfig},_addPropertyToModelBinderConfig:function(e,t){var n=this._query.context._storageModel.getStorageModel(e);e.memberDefinitions?e.memberDefinitions.getPublicMappedProperties().forEach(function(e){if(!n||n&&!n.Associations[e.name]&&!n.ComplexTypes[e.name]){var r=i.Container.resolveType(e.dataType);if(!n&&this._query.context.storageProvider.supportedDataTypes.indexOf(r)<0)t.selectModelBinderProperty(e.name),t.modelBinderConfig.$type=r,this._isoDataProvider?t.modelBinderConfig.$selector=["json:"+e.name+".results","json:"+e.name]:t.modelBinderConfig.$selector="json:"+e.name,this._addPropertyToModelBinderConfig(r,t),t.popModelBinderProperty();else if(e.key&&t.addKeyField(e.name),e.concurrencyMode===s["default"].ConcurrencyMode.Fixed)t.modelBinderConfig[e.name]={$source:"@odata.etag"};else if(r===s["default"].Array&&e.elementType){t.selectModelBinderProperty(e.name),t.modelBinderConfig.$type=r,this._isoDataProvider?t.modelBinderConfig.$selector=["json:"+e.name+".results","json:"+e.name]:t.modelBinderConfig.$selector="json:"+e.name,t.selectModelBinderProperty("$item");var a=i.Container.resolveType(e.elementType);t.modelBinderConfig.$type=a,this._addPropertyToModelBinderConfig(a,t),t.popModelBinderProperty(),t.popModelBinderProperty()}else t.modelBinderConfig[e.name]={$source:e.name,$type:e.type}}},this):t._binderConfig.$type===s["default"].Array&&(t._binderConfig.$item=t._binderConfig.$item||{},t.modelBinderConfig=t._binderConfig.$item),n&&this._addComplexTypeProperties(n.ComplexTypes,t)},_addComplexTypeProperties:function(e,t){e.forEach(function(e){if(e.ToType!==s["default"].Array)t.selectModelBinderProperty(e.FromPropertyName),t.modelBinderConfig.$type=e.ToType,this._isoDataProvider?t.modelBinderConfig.$selector=["json:"+e.FromPropertyName+".results","json:"+e.FromPropertyName]:t.modelBinderConfig.$selector="json:"+e.FromPropertyName,this._addPropertyToModelBinderConfig(e.ToType,t),t.popModelBinderProperty();else{var n=e.ToType,r=i.Container.resolveType(e.FromType.memberDefinitions.getMember(e.FromPropertyName).elementType);if(n===s["default"].Array&&r&&r.isAssignableTo&&r.isAssignableTo(s["default"].Entity)){config={$type:s["default"].Array,$selector:"json:"+e.FromPropertyName,$item:{$type:r}};for(var a=r.memberDefinitions.getPublicMappedProperties(),o=0;o<a.length;o++)config.$item[a[o].name]={$type:a[o].type,$source:a[o].name};t.modelBinderConfig[e.FromPropertyName]=config}else t.modelBinderConfig[e.FromPropertyName]={$type:e.ToType,$source:e.FromPropertyName}}},this)},DefaultSelection:function(e,t,n,r){var i=this;e.modelBinderConfig.$type=r?s["default"].Object:t;var a=this._query.context._storageModel.getStorageModel(t);this._addPropertyToModelBinderConfig(t,e),n&&!function(){var t=[];n.forEach(function(n){if(!t.some(function(e){return n.name.length>e.length&&n.name.substr(0,e.length)===e})){this.depth.push(n.name);for(var r=n.name.split("."),i=null,o=a,u=0,l=0;l<r.length;l++)e.modelBinderConfig.$item&&(e.selectModelBinderProperty("$item"),u++),e.selectModelBinderProperty(r[l]),i=o.Associations[r[l]],o=this._query.context._storageModel.getStorageModel(i.ToType);this._isoDataProvider?e.modelBinderConfig.$selector=["json:"+r[r.length-1]+".results","json:"+r[r.length-1]]:e.modelBinderConfig.$selector="json:"+r[r.length-1],"*"===i.ToMultiplicity?(e.modelBinderConfig.$type=s["default"].Array,e.selectModelBinderProperty("$item"),e.modelBinderConfig.$type=n.type,n.projectionExpression?(t.push(n.name),this.Visit(n.projectionExpression,e)):this._addPropertyToModelBinderConfig(n.type,e),e.popModelBinderProperty()):(e.modelBinderConfig.$type=n.type,n.projectionExpression?(t.push(n.name),this.Visit(n.projectionExpression,e)):this._addPropertyToModelBinderConfig(n.type,e));for(var l=0;l<r.length+u;l++)e.popModelBinderProperty();this.depth.pop()}},i)}()},VisitProjectionExpression:function(e,t){this.hasProjection=!0,this.Visit(e.selector,t),e.selector&&e.selector.expression instanceof s["default"].Expressions.ObjectLiteralExpression&&(t.modelBinderConfig.$type=e.projectionAs||t.modelBinderConfig.$type||s["default"].Object)},VisitParametricQueryExpression:function(e,t){e.expression instanceof s["default"].Expressions.EntityExpression||e.expression instanceof s["default"].Expressions.EntitySetExpression?this.VisitEntityAsProjection(e,t):this.Visit(e.expression,t)},VisitEntityAsProjection:function(e,t){this.mapping="",this.Visit(e.expression,t),this.depth.push(this.mapping),this.mapping=this.depth.join(".");var n,r;if(this.mapping&&this._includes instanceof Array&&(n=this._includes.filter(function(e){return 0===e.name.indexOf(this.mapping+".")},this),n=n.map(function(e){return{name:e.name.replace(this.mapping+".",""),type:e.type}},this),r=this._includes.filter(function(e){return e.name===this.mapping},this)[0]),e.expression instanceof s["default"].Expressions.EntityExpression)if(r&&r.projectionExpression){var i=this._includes;this._includes=n;var a=this.depth;this.depth=[],this.Visit(r.projectionExpression,t),this._includes=i,this.depth=a}else this.DefaultSelection(t,e.expression.entityType,n);else if(e.expression instanceof s["default"].Expressions.EntitySetExpression){if(t.modelBinderConfig.$type=s["default"].Array,t.modelBinderConfig.$item={},t.selectModelBinderProperty("$item"),r&&r.projectionExpression){var i=this._includes;this._includes=n;var a=this.depth;this.depth=[],this.Visit(r.projectionExpression,t),this._includes=i,this.depth=a}else this.DefaultSelection(t,e.expression.elementType,n);t.popModelBinderProperty()}this.depth.pop()},VisitEntityFieldExpression:function(e,t){this.Visit(e.source,t),this.Visit(e.selector,t)},VisitMemberInfoExpression:function(e,t){t.modelBinderConfig.$type=e.memberDefinition.type,e.memberDefinition.storageModel&&e.memberName in e.memberDefinition.storageModel.ComplexTypes?this._addPropertyToModelBinderConfig(i.Container.resolveType(e.memberDefinition.type),t):t.modelBinderConfig.$type&&i.Container.resolveType(t.modelBinderConfig.$type).isAssignableTo&&i.Container.resolveType(t.modelBinderConfig.$type).isAssignableTo(s["default"].Entity)||(t.modelBinderConfig.$source=e.memberName)},VisitEntitySetExpression:function(e,t){e.source instanceof s["default"].Expressions.EntityExpression&&(this.Visit(e.source,t),this.Visit(e.selector,t))},VisitComplexTypeExpression:function(e,t){if(this.Visit(e.source,t),this.Visit(e.selector,t),"$selector"in t.modelBinderConfig&&t.modelBinderConfig.$selector.length>0)if(t.modelBinderConfig.$selector instanceof s["default"].Array){var n=t.modelBinderConfig.$selector[1];t.modelBinderConfig.$selector[0]=n+"."+e.selector.memberName+".results",t.modelBinderConfig.$selector[1]=n+"."+e.selector.memberName}else t.modelBinderConfig.$selector+="."+e.selector.memberName;else this._isoDataProvider?t.modelBinderConfig.$selector=["json:"+e.selector.memberName+".results","json:"+e.selector.memberName]:t.modelBinderConfig.$selector="json:"+e.selector.memberName},VisitEntityExpression:function(e,t){this.Visit(e.source,t)},VisitAssociationInfoExpression:function(e,t){if("$selector"in t.modelBinderConfig&&t.modelBinderConfig.$selector.length>0)if(t.modelBinderConfig.$selector instanceof s["default"].Array){var n=t.modelBinderConfig.$selector[1];t.modelBinderConfig.$selector[0]=n+"."+e.associationInfo.FromPropertyName+".results",t.modelBinderConfig.$selector[1]=n+"."+e.associationInfo.FromPropertyName}else t.modelBinderConfig.$selector+="."+e.associationInfo.FromPropertyName;else this._isoDataProvider?t.modelBinderConfig.$selector=["json:"+e.associationInfo.FromPropertyName+".results","json:"+e.associationInfo.FromPropertyName]:t.modelBinderConfig.$selector="json:"+e.associationInfo.FromPropertyName;this.mapping&&this.mapping.length>0&&(this.mapping+="."),this.mapping+=e.associationInfo.FromPropertyName},VisitObjectLiteralExpression:function(e,t){t.modelBinderConfig.$type=s["default"].Object,e.members.forEach(function(e){this.Visit(e,t)},this)},VisitObjectFieldExpression:function(e,t){t.selectModelBinderProperty(e.fieldName),e.expression instanceof s["default"].Expressions.EntityExpression||e.expression instanceof s["default"].Expressions.EntitySetExpression?this.VisitEntityAsProjection(e,t):this.Visit(e.expression,t),t.popModelBinderProperty()}}),n["default"]=s["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Transaction",null,null,{constructor:function(){this._objectId=(new Date).getTime(),s["default"].Trace.log("create: ",this._objectId),this.oncomplete=new s["default"].Event("oncomplete",this),this.onerror=new s["default"].Event("onerror",this)},abort:function(){i.Guard.raise(new i.Exception("Not Implemented","Not Implemented",arguments))},_objectId:{type:s["default"].Integer},transaction:{type:s["default"].Object},oncomplete:{type:s["default"].Event},onerror:{type:s["default"].Event}},null),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../TypeSystem/index.js"),a=r(s);a["default"].Class.define("$data.Validation.Defaults",null,null,null,{validators:{value:{required:function(e,t){return!s.Guard.isNullOrUndefined(e)},customValidator:function(e,t){return s.Guard.isNullOrUndefined(e)||"function"==typeof t?t(e):!0},minValue:function(e,t){return s.Guard.isNullOrUndefined(e)||e>=t},maxValue:function(e,t){return s.Guard.isNullOrUndefined(e)||t>=e},minLength:function(e,t){return s.Guard.isNullOrUndefined(e)||e.length>=t},maxLength:function(e,t){return s.Guard.isNullOrUndefined(e)||e.length<=t},length:function(e,t){return s.Guard.isNullOrUndefined(e)||e.length==t},regex:function(e,t){return s.Guard.isNullOrUndefined(e)||e.match("string"==typeof t?new RegExp(0===t.indexOf("/")&&t.lastIndexOf("/")===t.length-1?t.slice(1,-1):t):t)}}},_getGroupValidations:function(e){var t={};if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];"function"==typeof this.validators[r]&&(t[r]=this.validators[r])}return t}}),a["default"].Class.define("$data.Validation.EntityValidation",a["default"].Validation.EntityValidationBase,null,{ValidateEntity:function(e){var t=[];return e.getType().memberDefinitions.getPublicMappedProperties().forEach(function(n){t=t.concat(this.ValidateEntityField(e,n,void 0,!0))},this),t},ValidateEntityField:function(e,t,n,r){var i=[],o=s.Container.resolveType(t.dataType),u=s.Container.resolveName(o),l=r?e[t.name]:n;return!t.inverseProperty&&o&&"function"==typeof o.isAssignableTo&&o.isAssignableTo(a["default"].Entity)&&(u=a["default"].Entity.fullName),this.fieldValidate(e,t,l,i,u),i},getValidationValue:function(e,t){var n;if(n=e[t]&&e[t].value?e[t].value:e[t],this.convertableValidation[t]){var r;r=this.convertableValidation[t]===!0?e.type:this.convertableValidation[t],r&&(n=s.Container.convertTo(n,r,e.elementType))}return n},getValidationMessage:function(e,t,n){var r=n;return"object"==i(e[t])&&e[t].message?r=e[t].message:e.errorMessage&&(r=e.errorMessage),r},createValidationError:function(e,t,n){return new a["default"].Validation.ValidationError(this.getValidationMessage(e,t,n),e,t)},convertableValidation:{value:{required:"$data.Boolean",minValue:!0,maxValue:!0,minLength:"$data.Integer",maxLength:"$data.Integer",length:"$data.Integer"}},supportedValidations:{value:{"$data.ObjectID":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Byte":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.SByte":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Decimal":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Float":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Number":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int16":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Integer":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int32":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Int64":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.String":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minLength","maxLength","length","regex"]),"$data.Date":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.DateTimeOffset":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Time":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Day":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minValue","maxValue"]),"$data.Duration":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Boolean":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Array":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","length"]),"$data.Object":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Guid":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.Blob":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator","minLength","maxLength","length"]),"$data.GeographyPoint":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyLineString":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyPolygon":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiPoint":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiLineString":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyMultiPolygon":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeographyCollection":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryPoint":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryLineString":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryPolygon":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiPoint":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiLineString":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryMultiPolygon":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"]),"$data.GeometryCollection":a["default"].Validation.Defaults._getGroupValidations(["required","customValidator"])}},fieldValidate:function(e,t,n,r,i){if(!(e.entityState==a["default"].EntityState.Modified&&e.changedProperties&&e.changedProperties.indexOf(t)<0)){var s=this.supportedValidations[i];if(s){var o=Object.keys(s);o.forEach(function(i){t[i]&&s[i]&&!s[i].call(e,n,this.getValidationValue(t,i))&&r.push(this.createValidationError(t,i,"Validation error!"))},this),i===a["default"].Entity.fullName&&n instanceof a["default"].Entity&&!n.isValid()&&r.push(this.createValidationError(t,"ComplexProperty","Validation error!"))}}}},null),a["default"].Validation.Entity=new a["default"].Validation.EntityValidation,n["default"]=a["default"],t.exports=n["default"]},{"../../TypeSystem/index.js":32}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../TypeSystem/index.js"),s=r(i);s["default"].Class.define("$data.Validation.ValidationError",null,null,{constructor:function(e,t,n){this.Message=e,this.PropertyDefinition=t,this.Type=n},Type:{dataType:"string"},Message:{dataType:"string"},PropertyDefinition:{dataType:s["default"].MemberDefinition}},null),s["default"].Class.define("$data.Validation.EntityValidationBase",null,null,{ValidateEntity:function(e){return[]},ValidateEntityField:function(e,t){return[]},getValidationValue:function(e,t){i.Guard.raise("Pure class")},getValidationMessage:function(e,t,n){i.Guard.raise("Pure class")}},null),s["default"].Validation=s["default"].Validation||{},s["default"].Validation.Entity=new s["default"].Validation.EntityValidationBase,n["default"]=s["default"],
t.exports=n["default"]},{"../../TypeSystem/index.js":32}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("../TypeSystem/index.js"),s=r(i),a=e("./Expressions/index.js"),o=(r(a),e("./Validation/EntityValidationBase.js")),u=(r(o),e("./Validation/EntityValidation.js")),l=(r(u),e("./Notifications/ChangeDistributorBase.js")),p=(r(l),e("./Notifications/ChangeCollectorBase.js")),d=(r(p),e("./Notifications/ChangeDistributor.js")),c=(r(d),e("./Notifications/ChangeCollector.js")),f=(r(c),e("./Transaction.js")),y=(r(f),e("./Access.js")),h=(r(y),e("./Entity.js")),m=(r(h),e("./Enum.js")),x=(r(m),e("./RelatedEntityProxy.js")),g=(r(x),e("./EntityContext.js")),v=(r(g),e("./QueryProvider.js")),E=(r(v),e("./ModelBinder.js")),b=(r(E),e("./QueryBuilder.js")),T=(r(b),e("./Query.js")),C=(r(T),e("./Queryable.js")),_=(r(C),e("./EntitySet.js")),S=(r(_),e("./EntityState.js")),P=(r(S),e("./EntityAttachModes.js")),M=(r(P),e("./EntityStateManager.js")),j=(r(M),e("./ItemStore.js")),w=(r(j),e("./StorageProviderLoader.js")),A=(r(w),e("./StorageProviderBase.js")),O=(r(A),e("./ServiceOperation.js")),N=(r(O),e("./EntityWrapper.js")),k=(r(N),e("./Ajax/jQueryAjaxWrapper.js")),V=(r(k),e("./Ajax/WinJSAjaxWrapper.js")),G=(r(V),e("./Ajax/ExtJSAjaxWrapper.js")),B=(r(G),e("./Ajax/AjaxStub.js")),D=(r(B),e("./StorageProviders/modelBinderConfigCompiler.js")),$=(r(D),e("./Authentication/AuthenticationBase.js")),I=(r($),e("./Authentication/Anonymous.js")),L=(r(I),e("./Authentication/FacebookAuth.js")),F=(r(L),e("./Authentication/BasicAuth.js")),R=(r(F),e("jaydata-promise-handler"));R.PromiseHandler.use(s["default"]),n["default"]=s["default"],t.exports=n["default"]},{"../TypeSystem/index.js":32,"./Access.js":35,"./Ajax/AjaxStub.js":36,"./Ajax/ExtJSAjaxWrapper.js":37,"./Ajax/WinJSAjaxWrapper.js":38,"./Ajax/jQueryAjaxWrapper.js":39,"./Authentication/Anonymous.js":40,"./Authentication/AuthenticationBase.js":41,"./Authentication/BasicAuth.js":42,"./Authentication/FacebookAuth.js":43,"./Entity.js":44,"./EntityAttachModes.js":45,"./EntityContext.js":46,"./EntitySet.js":47,"./EntityState.js":48,"./EntityStateManager.js":49,"./EntityWrapper.js":50,"./Enum.js":51,"./Expressions/index.js":99,"./ItemStore.js":100,"./ModelBinder.js":101,"./Notifications/ChangeCollector.js":102,"./Notifications/ChangeCollectorBase.js":103,"./Notifications/ChangeDistributor.js":104,"./Notifications/ChangeDistributorBase.js":105,"./Query.js":106,"./QueryBuilder.js":107,"./QueryProvider.js":108,"./Queryable.js":109,"./RelatedEntityProxy.js":110,"./ServiceOperation.js":111,"./StorageProviderBase.js":112,"./StorageProviderLoader.js":113,"./StorageProviders/modelBinderConfigCompiler.js":114,"./Transaction.js":115,"./Validation/EntityValidation.js":116,"./Validation/EntityValidationBase.js":117,"jaydata-promise-handler":8}],"jaydata/core":[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./TypeSystem/index.js"),s=r(i),a=e("./Types/Expressions/index.js"),o=(r(a),e("./JaySvcUtil/index.js")),u=(r(o),e("./Types/index.js"));r(u);n["default"]=s["default"],t.exports=n["default"]},{"./JaySvcUtil/index.js":17,"./TypeSystem/index.js":32,"./Types/Expressions/index.js":99,"./Types/index.js":118}]},{},[]);if("object"==typeof exports&&"undefined"!=typeof module)module.exports=require("jaydata/core");else if("function"==typeof define&&define.amd){var interopRequire=require;define([],function(){return interopRequire("jaydata/core")}),define("jaydata/core",[],function(){return interopRequire("jaydata/core")})}else{var g;"undefined"!=typeof window?(window.require=require,g=window):g="undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.$data=require("jaydata/core")}}();
//# sourceMappingURL=jaydata.min.js.map
